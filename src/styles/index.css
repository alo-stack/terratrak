/* =========================================
   Tailwind layers
========================================= */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================================
   Base tokens & global
========================================= */
@layer base {
  :root {
    /* light */
    --bg: 210 20% 97%;
    --card: 0 0% 100%;
    --muted: 210 20% 94%;
    --border: 210 16% 86%;
    --text: 222 47% 11%;
  }
  .dark {
    /* dark tuned for contrast */
    --bg: 222 47% 6%;
    --card: 222 47% 8%;
    --muted: 222 25% 14%;
    --border: 222 20% 24%;
    --text: 0 0% 97%;
  }

  html, body, #root { height: 100%; }
  body { @apply bg-[hsl(var(--bg))] text-[hsl(var(--text))] font-sans; }
}

/* =========================================
   Component shortcuts
========================================= */
@layer components {
  .card { @apply bg-[hsl(var(--card))] rounded-2xl shadow-sm border border-[hsl(var(--border))]; }
  .pill { @apply rounded-xl px-3 py-1 text-xs font-medium bg-[hsl(var(--muted))]; }

  /* minimalist sidebar item */
  .sidebar-item {
    @apply flex items-center gap-3 w-full px-3 py-2 rounded-2xl
           transition-all duration-200 ease-out select-none;
  }

  .icon-btn { @apply grid place-items-center rounded-full w-9 h-9 border border-[hsl(var(--border))] bg-[hsl(var(--card))] hover:shadow; }
}

/* =========================================
   Animations & utilities
========================================= */
/* entrances / motion */
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(8px); }
  to   { opacity: 1; transform: translateY(0); }
}
.animate-fade-in-up { animation: fadeInUp .5s ease-out both; }

@keyframes floatY {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-2px); }
}
.animate-float-slow { animation: floatY 6s ease-in-out infinite; }

/* classic background-position shimmer (for legacy uses) */
@keyframes bgShimmer {
  from { background-position: 200% 0; }
  to   { background-position: -200% 0; }
}
.animate-shimmer {
  background-image: linear-gradient(90deg, transparent, rgba(255,255,255,.7), transparent);
  background-size: 200% 100%;
  animation: bgShimmer 2.25s linear infinite;
}
.dark .animate-shimmer {
  background-image: linear-gradient(90deg, transparent, rgba(255,255,255,.5), transparent);
}

/* Card micro-interactions */
.card-live { transition: box-shadow .25s ease, transform .25s ease, border-color .25s ease; }
.card-live:hover {
  transform: translateY(1px);
  box-shadow:
    0 1px 0 rgba(0,0,0,.02),
    0 8px 24px -12px rgba(0,0,0,.25);
  border-color: rgba(16,185,129,.25);
}

/* dotted backdrop helper (optional) */
.bg-dots {
  background-image: radial-gradient(currentColor 1px, transparent 1px);
  background-size: 14px 14px;
  opacity: .08;
}

/* =========================================
   Theme toggle polish
========================================= */
@keyframes toggleSweep {
  from { background-position: 200% 0; }
  to   { background-position: -200% 0; }
}
@keyframes popOnce {
  0% { transform: scale(.94) rotate(0deg); }
  55% { transform: scale(1.08) rotate(8deg); }
  100% { transform: scale(1) rotate(0); }
}
@media (prefers-reduced-motion: reduce) {
  .toggle-sweep, .icon-pop { animation: none !important; }
}
.toggle-sweep {
  background-image: linear-gradient(90deg, transparent, rgba(16,185,129,.35), transparent);
  background-size: 200% 100%;
  animation: toggleSweep .55s ease-out;
}
.icon-pop { animation: popOnce .35s ease-out; }

.toggle-capsule { transition: transform .25s ease, box-shadow .25s ease, outline-color .25s ease; }
.toggle-capsule:hover {
  transform: translateY(-1px) scale(1.03);
  box-shadow:
    0 1px 0 rgba(0,0,0,.03),
    0 10px 24px -12px rgba(0,0,0,.25);
}
.toggle-btn { transition: background-color .25s ease, transform .2s ease, box-shadow .2s ease; }
.toggle-btn:active { transform: scale(.96); }

/* =========================================
   Settings page chrome (glow/banner/inputs)
========================================= */
@keyframes borderGlow {
  0% { box-shadow: 0 0 0 0 rgba(16,185,129,.18); }
  100% { box-shadow: 0 0 0 8px rgba(16,185,129,0); }
}
.glow-on-save { animation: borderGlow .9s ease-out; }

@keyframes slideDown {
  from { opacity: 0; transform: translateY(-6px); }
  to   { opacity: 1; transform: translateY(0); }
}
.banner-enter { animation: slideDown .35s ease-out both; }

/* Neo card variant for Settings */
.setting-card {
  position: relative;
  border-radius: 1rem;            /* rounded-2xl */
  background-color: hsl(var(--card));
  border: 1px solid hsl(var(--border));
  box-shadow:
    0 1px 0 rgba(0,0,0,.02),
    0 10px 28px -18px rgba(0,0,0,.25);
  transition: transform .25s ease, box-shadow .25s ease, border-color .25s ease;
}
.setting-card:hover {
  transform: translateY(1px);
  box-shadow:
    0 2px 0 rgba(0,0,0,.02),
    0 16px 36px -18px rgba(0,0,0,.35);
  border-color: rgba(16,185,129,.22);
}
.dark .setting-card { border-color: rgba(255,255,255,.10); }

/* Inputs */
.input {
  border-radius: .75rem;           /* rounded-xl */
  border: 1px solid hsl(var(--border));
  background-color: hsl(var(--card));
  padding: .5rem .75rem;           /* py-2 px-3 */
  outline: none;
  transition: box-shadow .2s ease, border-color .2s ease;
}
.dark .input { border-color: rgba(255,255,255,.15); }
.input:focus {
  box-shadow: 0 0 0 3px rgba(16,185,129,.25);
  border-color: rgba(16,185,129,.45);
}

/* =========================================
   3D Bin (realistic)
========================================= */
.bin-scene { perspective: 1100px; perspective-origin: 50% 40%; cursor: grab; padding: 8px 0 32px; }
.bin-scene:active { cursor: grabbing; }
.bin-cube { position: relative; margin: 0 auto; transform-style: preserve-3d; transition: transform .08s linear; }

/* Metallic faces */
.bin-real .bin-face {
  position: absolute;
  border-radius: 16px;
  background:
    radial-gradient(120% 80% at 50% -10%, rgba(255,255,255,.45), rgba(255,255,255,0) 60%),
    linear-gradient(180deg, rgba(255,255,255,.6), rgba(255,255,255,.28)),
    repeating-linear-gradient(90deg, rgba(255,255,255,.04) 0, rgba(255,255,255,.04) 2px, transparent 2px, transparent 5px),
    linear-gradient(180deg, #f7f9fb, #eaeef3);
  border: 1px solid hsl(var(--border));
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.6),
    inset 0 -20px 35px rgba(0,0,0,.06);
}
.dark .bin-real .bin-face {
  background:
    radial-gradient(120% 80% at 50% -10%, rgba(255,255,255,.10), rgba(255,255,255,0) 60%),
    linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04)),
    repeating-linear-gradient(90deg, rgba(255,255,255,.03) 0, rgba(255,255,255,.03) 2px, transparent 2px, transparent 5px),
    linear-gradient(180deg, #0d1014, #0b0f13);
  border-color: rgba(255,255,255,.10);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.08), inset 0 -22px 36px rgba(0,0,0,.35);
}

/* Per-face light bias */
.bin-front  { filter: brightness(1.02); }
.bin-right  { filter: brightness(1.03); }
.bin-back   { filter: brightness(.98);  }
.bin-left   { filter: brightness(.98);  }
.bin-bottom { filter: brightness(.95);  }

/* Open top with rim + inner cavity */
.bin-top {
  position: absolute;
  border-radius: 18px;
  background: linear-gradient(180deg, rgba(255,255,255,.75), rgba(255,255,255,.45));
  border: 1px solid hsl(var(--border));
  box-shadow: inset 0 1px 0 rgba(255,255,255,.7);
}
.dark .bin-top {
  background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
  border-color: rgba(255,255,255,.10);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.08);
}

/* brushed metal rim */
.bin-rim {
  position: absolute;
  inset: 0;
  border-radius: 18px;
  background:
    linear-gradient(180deg, rgba(255,255,255,.9), rgba(255,255,255,.5)),
    repeating-linear-gradient(90deg, rgba(0,0,0,.06) 0, rgba(0,0,0,.06) 2px, rgba(255,255,255,.0) 2px, rgba(255,255,255,.0) 5px);
  mask: radial-gradient(closest-side, transparent 0 86%, #000 87%);
  box-shadow:
    0 1px 0 rgba(255,255,255,.8),
    inset 0 -10px 20px rgba(0,0,0,.06);
  opacity: .9;
}
.dark .bin-rim {
  background:
    linear-gradient(180deg, rgba(255,255,255,.22), rgba(255,255,255,.1)),
    repeating-linear-gradient(90deg, rgba(255,255,255,.08) 0, rgba(255,255,255,.08) 2px, rgba(255,255,255,0) 2px, rgba(255,255,255,0) 5px);
  box-shadow: 0 1px 0 rgba(255,255,255,.15), inset 0 -10px 20px rgba(0,0,0,.4);
}

/* inner cavity gradient for depth */
.bin-cavity {
  position: absolute;
  inset: 6% 6% 6% 6%;
  border-radius: 14px;
  background: radial-gradient(120% 80% at 50% -20%, rgba(0,0,0,.22), rgba(0,0,0,.05) 60%, transparent 80%);
}
.dark .bin-cavity {
  background: radial-gradient(120% 80% at 50% -20%, rgba(0,0,0,.55), rgba(0,0,0,.25) 60%, transparent 80%);
}

/* =========================================
   Conflict-free shimmer for card tops
========================================= */
@keyframes shimmerSlide {
  0%   { transform: translateX(-60%); }
  100% { transform: translateX(60%); }
}
/* Use on: <div class="absolute inset-x-0 top-0 h-[2px] shimmer-top" /> */
.shimmer-top { position: relative; overflow: hidden; }
.shimmer-top::after {
  content: "";
  position: absolute; inset: 0;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,.7), transparent);
  opacity: .6;
  transform: translateX(-60%);
  animation: shimmerSlide 2.2s ease-in-out infinite;
}
.dark .shimmer-top::after {
  background: linear-gradient(90deg, transparent, rgba(255,255,255,.5), transparent);
}

/* --- Top-card shimmer (aligned & subtle) --- */
.card-shimmer{
  position:absolute; inset:0 0 auto 0; height:2px;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,.65), transparent);
  opacity:.6;
  mask-image: linear-gradient(to right, transparent, black 12%, black 88%, transparent);
}

/* --- Simple quadrant grid --- */
.tt-qgrid{
  display:grid;
  grid-template-columns: repeat(2, minmax(0,1fr));
  gap: .75rem; /* 12px */
}
.tt-qcell{
  border: 1px solid hsl(var(--border));
  background: hsl(var(--card));
  border-radius: 1rem;
  padding: .9rem;
  box-shadow:
    0 1px 0 rgba(0,0,0,.02),
    0 10px 24px -18px rgba(0,0,0,.25);
  transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease;
}
.tt-qcell:hover{
  transform: translateY(1px);
  border-color: rgba(16,185,129,.22);
  box-shadow:
    0 2px 0 rgba(0,0,0,.02),
    0 16px 36px -18px rgba(0,0,0,.35);
}

/* letter badge */
.tt-qbadge{
  display:inline-grid; place-items:center;
  width:1.5rem; height:1.5rem; border-radius:9999px;
  font-weight:700; font-size:.8rem;
  color:#065f46;
  background: rgba(16,185,129,.18);
  border: 1px solid rgba(16,185,129,.35);
}
.dark .tt-qbadge{ color:#a7f3d0; }

/* Responsive behavior for very narrow screens */
@media (max-width: 720px){
  .tt-qgrid{ grid-template-columns: 1fr; }
}

/* soft corner glow used on About/Settings — reused here */
.corner-glow{
  position:absolute; width:12rem; height:12rem; border-radius:9999px;
  pointer-events:none; filter: blur(28px); opacity:.18;
  background: radial-gradient(closest-side, rgba(16,185,129,.65), transparent 70%);
}
.dark .corner-glow{ opacity:.13; }

/* subtle chart appear (no motion sickness) */
@keyframes chartEnter { from { opacity: 0; transform: translateY(6px) } to { opacity: 1; transform: translateY(0) } }
.chart-enter{ animation: chartEnter .45s ease-out both; }
