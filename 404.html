<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>TerraTrak - Redirecting...</title>
    <script type="text/javascript">
      // Single Page Apps for GitHub Pages
      // MIT License
      // https://github.com/rafgraph/spa-github-pages
      (function(l) {
        if (l.search[1] === '/') {
          var decoded = l.search.slice(1).split('&').map(function(s) { 
            return s.replace(/~and~/g, '&')
          }).join('?');
          window.history.replaceState(null, null,
            l.pathname.slice(0, -1) + decoded + l.hash
          );
        }
      }(window.location));

      // Handle spa routing for GitHub Pages
      (function(location) {
        var path = location.pathname;
        var repo = '/terratrak';
        
        // Already has the correct path
        if (path.indexOf(repo + '/') === 0) {
          return;
        }

        // Redirect to index.html with the correct path
        var redirectPath = repo + (path.endsWith('/') ? path.slice(0, -1) : path);
        var redirectUrl = location.protocol + '//' + location.hostname + 
                         (location.port ? ':' + location.port : '') +
                         redirectPath + '/?' +
                         'p=' + encodeURIComponent(path) +
                         (location.search ? '&q=' + encodeURIComponent(location.search.slice(1)) : '') +
                         (location.hash || '');

        window.location.replace(redirectUrl);
      }(window.location));
    </script>
  </head>
  <body>
    <h1>Redirecting...</h1>
    <p>If you are not redirected automatically, please click <a href="/terratrak/">here</a>.</p>
  </body>
</html>