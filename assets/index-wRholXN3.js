function m1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function g1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Lg={exports:{}},gl={},Og={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yo=Symbol.for("react.element"),y1=Symbol.for("react.portal"),v1=Symbol.for("react.fragment"),_1=Symbol.for("react.strict_mode"),w1=Symbol.for("react.profiler"),E1=Symbol.for("react.provider"),x1=Symbol.for("react.context"),T1=Symbol.for("react.forward_ref"),S1=Symbol.for("react.suspense"),I1=Symbol.for("react.memo"),k1=Symbol.for("react.lazy"),Jf=Symbol.iterator;function C1(t){return t===null||typeof t!="object"?null:(t=Jf&&t[Jf]||t["@@iterator"],typeof t=="function"?t:null)}var Fg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ug=Object.assign,zg={};function Vi(t,e,n){this.props=t,this.context=e,this.refs=zg,this.updater=n||Fg}Vi.prototype.isReactComponent={};Vi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Vi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Bg(){}Bg.prototype=Vi.prototype;function Th(t,e,n){this.props=t,this.context=e,this.refs=zg,this.updater=n||Fg}var Sh=Th.prototype=new Bg;Sh.constructor=Th;Ug(Sh,Vi.prototype);Sh.isPureReactComponent=!0;var Zf=Array.isArray,$g=Object.prototype.hasOwnProperty,Ih={current:null},qg={key:!0,ref:!0,__self:!0,__source:!0};function Wg(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)$g.call(e,r)&&!qg.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:yo,type:t,key:s,ref:o,props:i,_owner:Ih.current}}function A1(t,e){return{$$typeof:yo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function kh(t){return typeof t=="object"&&t!==null&&t.$$typeof===yo}function R1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ep=/\/+/g;function mu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?R1(""+t.key):e.toString(36)}function pa(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case yo:case y1:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+mu(o,0):r,Zf(i)?(n="",t!=null&&(n=t.replace(ep,"$&/")+"/"),pa(i,e,n,"",function(h){return h})):i!=null&&(kh(i)&&(i=A1(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(ep,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Zf(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+mu(s,l);o+=pa(s,e,n,u,i)}else if(u=C1(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+mu(s,l++),o+=pa(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Fo(t,e,n){if(t==null)return t;var r=[],i=0;return pa(t,r,"","",function(s){return e.call(n,s,i++)}),r}function P1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var lt={current:null},ma={transition:null},N1={ReactCurrentDispatcher:lt,ReactCurrentBatchConfig:ma,ReactCurrentOwner:Ih};function Hg(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:Fo,forEach:function(t,e,n){Fo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Fo(t,function(){e++}),e},toArray:function(t){return Fo(t,function(e){return e})||[]},only:function(t){if(!kh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ee.Component=Vi;ee.Fragment=v1;ee.Profiler=w1;ee.PureComponent=Th;ee.StrictMode=_1;ee.Suspense=S1;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N1;ee.act=Hg;ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ug({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Ih.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)$g.call(e,u)&&!qg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:yo,type:t.type,key:i,ref:s,props:r,_owner:o}};ee.createContext=function(t){return t={$$typeof:x1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:E1,_context:t},t.Consumer=t};ee.createElement=Wg;ee.createFactory=function(t){var e=Wg.bind(null,t);return e.type=t,e};ee.createRef=function(){return{current:null}};ee.forwardRef=function(t){return{$$typeof:T1,render:t}};ee.isValidElement=kh;ee.lazy=function(t){return{$$typeof:k1,_payload:{_status:-1,_result:t},_init:P1}};ee.memo=function(t,e){return{$$typeof:I1,type:t,compare:e===void 0?null:e}};ee.startTransition=function(t){var e=ma.transition;ma.transition={};try{t()}finally{ma.transition=e}};ee.unstable_act=Hg;ee.useCallback=function(t,e){return lt.current.useCallback(t,e)};ee.useContext=function(t){return lt.current.useContext(t)};ee.useDebugValue=function(){};ee.useDeferredValue=function(t){return lt.current.useDeferredValue(t)};ee.useEffect=function(t,e){return lt.current.useEffect(t,e)};ee.useId=function(){return lt.current.useId()};ee.useImperativeHandle=function(t,e,n){return lt.current.useImperativeHandle(t,e,n)};ee.useInsertionEffect=function(t,e){return lt.current.useInsertionEffect(t,e)};ee.useLayoutEffect=function(t,e){return lt.current.useLayoutEffect(t,e)};ee.useMemo=function(t,e){return lt.current.useMemo(t,e)};ee.useReducer=function(t,e,n){return lt.current.useReducer(t,e,n)};ee.useRef=function(t){return lt.current.useRef(t)};ee.useState=function(t){return lt.current.useState(t)};ee.useSyncExternalStore=function(t,e,n){return lt.current.useSyncExternalStore(t,e,n)};ee.useTransition=function(){return lt.current.useTransition()};ee.version="18.3.1";Og.exports=ee;var W=Og.exports;const J=g1(W),V1=m1({__proto__:null,default:J},[W]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D1=W,b1=Symbol.for("react.element"),M1=Symbol.for("react.fragment"),j1=Object.prototype.hasOwnProperty,L1=D1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,O1={key:!0,ref:!0,__self:!0,__source:!0};function Kg(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)j1.call(e,r)&&!O1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:b1,type:t,key:s,ref:o,props:i,_owner:L1.current}}gl.Fragment=M1;gl.jsx=Kg;gl.jsxs=Kg;Lg.exports=gl;var f=Lg.exports,rc={},Qg={exports:{}},Et={},Gg={exports:{}},Yg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,H){var X=z.length;z.push(H);e:for(;0<X;){var K=X-1>>>1,Se=z[K];if(0<i(Se,H))z[K]=H,z[X]=Se,X=K;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var H=z[0],X=z.pop();if(X!==H){z[0]=X;e:for(var K=0,Se=z.length,ar=Se>>>1;K<ar;){var Tt=2*(K+1)-1,lr=z[Tt],bt=Tt+1,_n=z[bt];if(0>i(lr,X))bt<Se&&0>i(_n,lr)?(z[K]=_n,z[bt]=X,K=bt):(z[K]=lr,z[Tt]=X,K=Tt);else if(bt<Se&&0>i(_n,X))z[K]=_n,z[bt]=X,K=bt;else break e}}return H}function i(z,H){var X=z.sortIndex-H.sortIndex;return X!==0?X:z.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],p=1,m=null,g=3,k=!1,A=!1,R=!1,N=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(z){for(var H=n(h);H!==null;){if(H.callback===null)r(h);else if(H.startTime<=z)r(h),H.sortIndex=H.expirationTime,e(u,H);else break;H=n(h)}}function P(z){if(R=!1,x(z),!A)if(n(u)!==null)A=!0,Vt(M);else{var H=n(h);H!==null&&Dt(P,H.startTime-z)}}function M(z,H){A=!1,R&&(R=!1,E(_),_=-1),k=!0;var X=g;try{for(x(H),m=n(u);m!==null&&(!(m.expirationTime>H)||z&&!C());){var K=m.callback;if(typeof K=="function"){m.callback=null,g=m.priorityLevel;var Se=K(m.expirationTime<=H);H=t.unstable_now(),typeof Se=="function"?m.callback=Se:m===n(u)&&r(u),x(H)}else r(u);m=n(u)}if(m!==null)var ar=!0;else{var Tt=n(h);Tt!==null&&Dt(P,Tt.startTime-H),ar=!1}return ar}finally{m=null,g=X,k=!1}}var F=!1,w=null,_=-1,T=5,I=-1;function C(){return!(t.unstable_now()-I<T)}function V(){if(w!==null){var z=t.unstable_now();I=z;var H=!0;try{H=w(!0,z)}finally{H?S():(F=!1,w=null)}}else F=!1}var S;if(typeof v=="function")S=function(){v(V)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,nt=ge.port2;ge.port1.onmessage=V,S=function(){nt.postMessage(null)}}else S=function(){N(V,0)};function Vt(z){w=z,F||(F=!0,S())}function Dt(z,H){_=N(function(){z(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){A||k||(A=!0,Vt(M))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(z){switch(g){case 1:case 2:case 3:var H=3;break;default:H=g}var X=g;g=H;try{return z()}finally{g=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,H){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var X=g;g=z;try{return H()}finally{g=X}},t.unstable_scheduleCallback=function(z,H,X){var K=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?K+X:K):X=K,z){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=X+Se,z={id:p++,callback:H,priorityLevel:z,startTime:X,expirationTime:Se,sortIndex:-1},X>K?(z.sortIndex=X,e(h,z),n(u)===null&&z===n(h)&&(R?(E(_),_=-1):R=!0,Dt(P,X-K))):(z.sortIndex=Se,e(u,z),A||k||(A=!0,Vt(M))),z},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(z){var H=g;return function(){var X=g;g=H;try{return z.apply(this,arguments)}finally{g=X}}}})(Yg);Gg.exports=Yg;var F1=Gg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U1=W,wt=F1;function O(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xg=new Set,$s={};function Dr(t,e){yi(t,e),yi(t+"Capture",e)}function yi(t,e){for($s[t]=e,t=0;t<e.length;t++)Xg.add(e[t])}var dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ic=Object.prototype.hasOwnProperty,z1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tp={},np={};function B1(t){return ic.call(np,t)?!0:ic.call(tp,t)?!1:z1.test(t)?np[t]=!0:(tp[t]=!0,!1)}function $1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function q1(t,e,n,r){if(e===null||typeof e>"u"||$1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ut(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var We={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){We[t]=new ut(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];We[e]=new ut(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){We[t]=new ut(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){We[t]=new ut(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){We[t]=new ut(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){We[t]=new ut(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){We[t]=new ut(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){We[t]=new ut(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){We[t]=new ut(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ch=/[\-:]([a-z])/g;function Ah(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ch,Ah);We[e]=new ut(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ch,Ah);We[e]=new ut(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ch,Ah);We[e]=new ut(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){We[t]=new ut(t,1,!1,t.toLowerCase(),null,!1,!1)});We.xlinkHref=new ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){We[t]=new ut(t,1,!1,t.toLowerCase(),null,!0,!0)});function Rh(t,e,n,r){var i=We.hasOwnProperty(e)?We[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(q1(e,n,i,r)&&(n=null),r||i===null?B1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var vn=U1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Uo=Symbol.for("react.element"),Kr=Symbol.for("react.portal"),Qr=Symbol.for("react.fragment"),Ph=Symbol.for("react.strict_mode"),sc=Symbol.for("react.profiler"),Jg=Symbol.for("react.provider"),Zg=Symbol.for("react.context"),Nh=Symbol.for("react.forward_ref"),oc=Symbol.for("react.suspense"),ac=Symbol.for("react.suspense_list"),Vh=Symbol.for("react.memo"),Cn=Symbol.for("react.lazy"),ey=Symbol.for("react.offscreen"),rp=Symbol.iterator;function ss(t){return t===null||typeof t!="object"?null:(t=rp&&t[rp]||t["@@iterator"],typeof t=="function"?t:null)}var we=Object.assign,gu;function _s(t){if(gu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);gu=e&&e[1]||""}return`
`+gu+t}var yu=!1;function vu(t,e){if(!t||yu)return"";yu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{yu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?_s(t):""}function W1(t){switch(t.tag){case 5:return _s(t.type);case 16:return _s("Lazy");case 13:return _s("Suspense");case 19:return _s("SuspenseList");case 0:case 2:case 15:return t=vu(t.type,!1),t;case 11:return t=vu(t.type.render,!1),t;case 1:return t=vu(t.type,!0),t;default:return""}}function lc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Qr:return"Fragment";case Kr:return"Portal";case sc:return"Profiler";case Ph:return"StrictMode";case oc:return"Suspense";case ac:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Zg:return(t.displayName||"Context")+".Consumer";case Jg:return(t._context.displayName||"Context")+".Provider";case Nh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Vh:return e=t.displayName||null,e!==null?e:lc(t.type)||"Memo";case Cn:e=t._payload,t=t._init;try{return lc(t(e))}catch{}}return null}function H1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lc(e);case 8:return e===Ph?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Gn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ty(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function K1(t){var e=ty(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function zo(t){t._valueTracker||(t._valueTracker=K1(t))}function ny(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ty(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Va(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function uc(t,e){var n=e.checked;return we({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ip(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Gn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ry(t,e){e=e.checked,e!=null&&Rh(t,"checked",e,!1)}function cc(t,e){ry(t,e);var n=Gn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?hc(t,e.type,n):e.hasOwnProperty("defaultValue")&&hc(t,e.type,Gn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function sp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function hc(t,e,n){(e!=="number"||Va(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ws=Array.isArray;function si(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Gn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function dc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(O(91));return we({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function op(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(O(92));if(ws(n)){if(1<n.length)throw Error(O(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Gn(n)}}function iy(t,e){var n=Gn(e.value),r=Gn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ap(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function sy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?sy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bo,oy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Bo=Bo||document.createElement("div"),Bo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function qs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var As={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Q1=["Webkit","ms","Moz","O"];Object.keys(As).forEach(function(t){Q1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),As[e]=As[t]})});function ay(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||As.hasOwnProperty(t)&&As[t]?(""+e).trim():e+"px"}function ly(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=ay(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var G1=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pc(t,e){if(e){if(G1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(O(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(O(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(O(61))}if(e.style!=null&&typeof e.style!="object")throw Error(O(62))}}function mc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gc=null;function Dh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yc=null,oi=null,ai=null;function lp(t){if(t=wo(t)){if(typeof yc!="function")throw Error(O(280));var e=t.stateNode;e&&(e=El(e),yc(t.stateNode,t.type,e))}}function uy(t){oi?ai?ai.push(t):ai=[t]:oi=t}function cy(){if(oi){var t=oi,e=ai;if(ai=oi=null,lp(t),e)for(t=0;t<e.length;t++)lp(e[t])}}function hy(t,e){return t(e)}function dy(){}var _u=!1;function fy(t,e,n){if(_u)return t(e,n);_u=!0;try{return hy(t,e,n)}finally{_u=!1,(oi!==null||ai!==null)&&(dy(),cy())}}function Ws(t,e){var n=t.stateNode;if(n===null)return null;var r=El(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(O(231,e,typeof n));return n}var vc=!1;if(dn)try{var os={};Object.defineProperty(os,"passive",{get:function(){vc=!0}}),window.addEventListener("test",os,os),window.removeEventListener("test",os,os)}catch{vc=!1}function Y1(t,e,n,r,i,s,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var Rs=!1,Da=null,ba=!1,_c=null,X1={onError:function(t){Rs=!0,Da=t}};function J1(t,e,n,r,i,s,o,l,u){Rs=!1,Da=null,Y1.apply(X1,arguments)}function Z1(t,e,n,r,i,s,o,l,u){if(J1.apply(this,arguments),Rs){if(Rs){var h=Da;Rs=!1,Da=null}else throw Error(O(198));ba||(ba=!0,_c=h)}}function br(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function py(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function up(t){if(br(t)!==t)throw Error(O(188))}function ew(t){var e=t.alternate;if(!e){if(e=br(t),e===null)throw Error(O(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return up(i),t;if(s===r)return up(i),e;s=s.sibling}throw Error(O(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(O(189))}}if(n.alternate!==r)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?t:e}function my(t){return t=ew(t),t!==null?gy(t):null}function gy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=gy(t);if(e!==null)return e;t=t.sibling}return null}var yy=wt.unstable_scheduleCallback,cp=wt.unstable_cancelCallback,tw=wt.unstable_shouldYield,nw=wt.unstable_requestPaint,ke=wt.unstable_now,rw=wt.unstable_getCurrentPriorityLevel,bh=wt.unstable_ImmediatePriority,vy=wt.unstable_UserBlockingPriority,Ma=wt.unstable_NormalPriority,iw=wt.unstable_LowPriority,_y=wt.unstable_IdlePriority,yl=null,en=null;function sw(t){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(yl,t,void 0,(t.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:lw,ow=Math.log,aw=Math.LN2;function lw(t){return t>>>=0,t===0?32:31-(ow(t)/aw|0)|0}var $o=64,qo=4194304;function Es(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ja(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Es(l):(s&=o,s!==0&&(r=Es(s)))}else o=n&~i,o!==0?r=Es(o):s!==0&&(r=Es(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ut(e),i=1<<n,r|=t[n],e&=~i;return r}function uw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ut(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=uw(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function wc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function wy(){var t=$o;return $o<<=1,!($o&4194240)&&($o=64),t}function wu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function vo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ut(e),t[e]=n}function hw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ut(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Mh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ut(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ae=0;function Ey(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var xy,jh,Ty,Sy,Iy,Ec=!1,Wo=[],jn=null,Ln=null,On=null,Hs=new Map,Ks=new Map,Rn=[],dw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hp(t,e){switch(t){case"focusin":case"focusout":jn=null;break;case"dragenter":case"dragleave":Ln=null;break;case"mouseover":case"mouseout":On=null;break;case"pointerover":case"pointerout":Hs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ks.delete(e.pointerId)}}function as(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=wo(e),e!==null&&jh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function fw(t,e,n,r,i){switch(e){case"focusin":return jn=as(jn,t,e,n,r,i),!0;case"dragenter":return Ln=as(Ln,t,e,n,r,i),!0;case"mouseover":return On=as(On,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Hs.set(s,as(Hs.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ks.set(s,as(Ks.get(s)||null,t,e,n,r,i)),!0}return!1}function ky(t){var e=_r(t.target);if(e!==null){var n=br(e);if(n!==null){if(e=n.tag,e===13){if(e=py(n),e!==null){t.blockedOn=e,Iy(t.priority,function(){Ty(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ga(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=xc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);gc=r,n.target.dispatchEvent(r),gc=null}else return e=wo(n),e!==null&&jh(e),t.blockedOn=n,!1;e.shift()}return!0}function dp(t,e,n){ga(t)&&n.delete(e)}function pw(){Ec=!1,jn!==null&&ga(jn)&&(jn=null),Ln!==null&&ga(Ln)&&(Ln=null),On!==null&&ga(On)&&(On=null),Hs.forEach(dp),Ks.forEach(dp)}function ls(t,e){t.blockedOn===e&&(t.blockedOn=null,Ec||(Ec=!0,wt.unstable_scheduleCallback(wt.unstable_NormalPriority,pw)))}function Qs(t){function e(i){return ls(i,t)}if(0<Wo.length){ls(Wo[0],t);for(var n=1;n<Wo.length;n++){var r=Wo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(jn!==null&&ls(jn,t),Ln!==null&&ls(Ln,t),On!==null&&ls(On,t),Hs.forEach(e),Ks.forEach(e),n=0;n<Rn.length;n++)r=Rn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Rn.length&&(n=Rn[0],n.blockedOn===null);)ky(n),n.blockedOn===null&&Rn.shift()}var li=vn.ReactCurrentBatchConfig,La=!0;function mw(t,e,n,r){var i=ae,s=li.transition;li.transition=null;try{ae=1,Lh(t,e,n,r)}finally{ae=i,li.transition=s}}function gw(t,e,n,r){var i=ae,s=li.transition;li.transition=null;try{ae=4,Lh(t,e,n,r)}finally{ae=i,li.transition=s}}function Lh(t,e,n,r){if(La){var i=xc(t,e,n,r);if(i===null)Pu(t,e,r,Oa,n),hp(t,r);else if(fw(i,t,e,n,r))r.stopPropagation();else if(hp(t,r),e&4&&-1<dw.indexOf(t)){for(;i!==null;){var s=wo(i);if(s!==null&&xy(s),s=xc(t,e,n,r),s===null&&Pu(t,e,r,Oa,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Pu(t,e,r,null,n)}}var Oa=null;function xc(t,e,n,r){if(Oa=null,t=Dh(r),t=_r(t),t!==null)if(e=br(t),e===null)t=null;else if(n=e.tag,n===13){if(t=py(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Oa=t,null}function Cy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rw()){case bh:return 1;case vy:return 4;case Ma:case iw:return 16;case _y:return 536870912;default:return 16}default:return 16}}var Nn=null,Oh=null,ya=null;function Ay(){if(ya)return ya;var t,e=Oh,n=e.length,r,i="value"in Nn?Nn.value:Nn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return ya=i.slice(t,1<r?1-r:void 0)}function va(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ho(){return!0}function fp(){return!1}function xt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ho:fp,this.isPropagationStopped=fp,this}return we(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ho)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ho)},persist:function(){},isPersistent:Ho}),e}var Di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fh=xt(Di),_o=we({},Di,{view:0,detail:0}),yw=xt(_o),Eu,xu,us,vl=we({},_o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==us&&(us&&t.type==="mousemove"?(Eu=t.screenX-us.screenX,xu=t.screenY-us.screenY):xu=Eu=0,us=t),Eu)},movementY:function(t){return"movementY"in t?t.movementY:xu}}),pp=xt(vl),vw=we({},vl,{dataTransfer:0}),_w=xt(vw),ww=we({},_o,{relatedTarget:0}),Tu=xt(ww),Ew=we({},Di,{animationName:0,elapsedTime:0,pseudoElement:0}),xw=xt(Ew),Tw=we({},Di,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Sw=xt(Tw),Iw=we({},Di,{data:0}),mp=xt(Iw),kw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Aw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Aw[t])?!!e[t]:!1}function Uh(){return Rw}var Pw=we({},_o,{key:function(t){if(t.key){var e=kw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=va(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Cw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uh,charCode:function(t){return t.type==="keypress"?va(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?va(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Nw=xt(Pw),Vw=we({},vl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gp=xt(Vw),Dw=we({},_o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uh}),bw=xt(Dw),Mw=we({},Di,{propertyName:0,elapsedTime:0,pseudoElement:0}),jw=xt(Mw),Lw=we({},vl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ow=xt(Lw),Fw=[9,13,27,32],zh=dn&&"CompositionEvent"in window,Ps=null;dn&&"documentMode"in document&&(Ps=document.documentMode);var Uw=dn&&"TextEvent"in window&&!Ps,Ry=dn&&(!zh||Ps&&8<Ps&&11>=Ps),yp=" ",vp=!1;function Py(t,e){switch(t){case"keyup":return Fw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ny(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gr=!1;function zw(t,e){switch(t){case"compositionend":return Ny(e);case"keypress":return e.which!==32?null:(vp=!0,yp);case"textInput":return t=e.data,t===yp&&vp?null:t;default:return null}}function Bw(t,e){if(Gr)return t==="compositionend"||!zh&&Py(t,e)?(t=Ay(),ya=Oh=Nn=null,Gr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ry&&e.locale!=="ko"?null:e.data;default:return null}}var $w={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _p(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!$w[t.type]:e==="textarea"}function Vy(t,e,n,r){uy(r),e=Fa(e,"onChange"),0<e.length&&(n=new Fh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ns=null,Gs=null;function qw(t){$y(t,0)}function _l(t){var e=Jr(t);if(ny(e))return t}function Ww(t,e){if(t==="change")return e}var Dy=!1;if(dn){var Su;if(dn){var Iu="oninput"in document;if(!Iu){var wp=document.createElement("div");wp.setAttribute("oninput","return;"),Iu=typeof wp.oninput=="function"}Su=Iu}else Su=!1;Dy=Su&&(!document.documentMode||9<document.documentMode)}function Ep(){Ns&&(Ns.detachEvent("onpropertychange",by),Gs=Ns=null)}function by(t){if(t.propertyName==="value"&&_l(Gs)){var e=[];Vy(e,Gs,t,Dh(t)),fy(qw,e)}}function Hw(t,e,n){t==="focusin"?(Ep(),Ns=e,Gs=n,Ns.attachEvent("onpropertychange",by)):t==="focusout"&&Ep()}function Kw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _l(Gs)}function Qw(t,e){if(t==="click")return _l(e)}function Gw(t,e){if(t==="input"||t==="change")return _l(e)}function Yw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Bt=typeof Object.is=="function"?Object.is:Yw;function Ys(t,e){if(Bt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ic.call(e,i)||!Bt(t[i],e[i]))return!1}return!0}function xp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Tp(t,e){var n=xp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=xp(n)}}function My(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?My(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function jy(){for(var t=window,e=Va();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Va(t.document)}return e}function Bh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Xw(t){var e=jy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&My(n.ownerDocument.documentElement,n)){if(r!==null&&Bh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Tp(n,s);var o=Tp(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Jw=dn&&"documentMode"in document&&11>=document.documentMode,Yr=null,Tc=null,Vs=null,Sc=!1;function Sp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Sc||Yr==null||Yr!==Va(r)||(r=Yr,"selectionStart"in r&&Bh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vs&&Ys(Vs,r)||(Vs=r,r=Fa(Tc,"onSelect"),0<r.length&&(e=new Fh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Yr)))}function Ko(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Xr={animationend:Ko("Animation","AnimationEnd"),animationiteration:Ko("Animation","AnimationIteration"),animationstart:Ko("Animation","AnimationStart"),transitionend:Ko("Transition","TransitionEnd")},ku={},Ly={};dn&&(Ly=document.createElement("div").style,"AnimationEvent"in window||(delete Xr.animationend.animation,delete Xr.animationiteration.animation,delete Xr.animationstart.animation),"TransitionEvent"in window||delete Xr.transitionend.transition);function wl(t){if(ku[t])return ku[t];if(!Xr[t])return t;var e=Xr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ly)return ku[t]=e[n];return t}var Oy=wl("animationend"),Fy=wl("animationiteration"),Uy=wl("animationstart"),zy=wl("transitionend"),By=new Map,Ip="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rr(t,e){By.set(t,e),Dr(e,[t])}for(var Cu=0;Cu<Ip.length;Cu++){var Au=Ip[Cu],Zw=Au.toLowerCase(),eE=Au[0].toUpperCase()+Au.slice(1);rr(Zw,"on"+eE)}rr(Oy,"onAnimationEnd");rr(Fy,"onAnimationIteration");rr(Uy,"onAnimationStart");rr("dblclick","onDoubleClick");rr("focusin","onFocus");rr("focusout","onBlur");rr(zy,"onTransitionEnd");yi("onMouseEnter",["mouseout","mouseover"]);yi("onMouseLeave",["mouseout","mouseover"]);yi("onPointerEnter",["pointerout","pointerover"]);yi("onPointerLeave",["pointerout","pointerover"]);Dr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tE=new Set("cancel close invalid load scroll toggle".split(" ").concat(xs));function kp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Z1(r,e,void 0,t),t.currentTarget=null}function $y(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;kp(i,l,h),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;kp(i,l,h),s=u}}}if(ba)throw t=_c,ba=!1,_c=null,t}function de(t,e){var n=e[Rc];n===void 0&&(n=e[Rc]=new Set);var r=t+"__bubble";n.has(r)||(qy(e,t,2,!1),n.add(r))}function Ru(t,e,n){var r=0;e&&(r|=4),qy(n,t,r,e)}var Qo="_reactListening"+Math.random().toString(36).slice(2);function Xs(t){if(!t[Qo]){t[Qo]=!0,Xg.forEach(function(n){n!=="selectionchange"&&(tE.has(n)||Ru(n,!1,t),Ru(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Qo]||(e[Qo]=!0,Ru("selectionchange",!1,e))}}function qy(t,e,n,r){switch(Cy(e)){case 1:var i=mw;break;case 4:i=gw;break;default:i=Lh}n=i.bind(null,e,n,t),i=void 0,!vc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Pu(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=_r(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}fy(function(){var h=s,p=Dh(n),m=[];e:{var g=By.get(t);if(g!==void 0){var k=Fh,A=t;switch(t){case"keypress":if(va(n)===0)break e;case"keydown":case"keyup":k=Nw;break;case"focusin":A="focus",k=Tu;break;case"focusout":A="blur",k=Tu;break;case"beforeblur":case"afterblur":k=Tu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=pp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=_w;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=bw;break;case Oy:case Fy:case Uy:k=xw;break;case zy:k=jw;break;case"scroll":k=yw;break;case"wheel":k=Ow;break;case"copy":case"cut":case"paste":k=Sw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=gp}var R=(e&4)!==0,N=!R&&t==="scroll",E=R?g!==null?g+"Capture":null:g;R=[];for(var v=h,x;v!==null;){x=v;var P=x.stateNode;if(x.tag===5&&P!==null&&(x=P,E!==null&&(P=Ws(v,E),P!=null&&R.push(Js(v,P,x)))),N)break;v=v.return}0<R.length&&(g=new k(g,A,null,n,p),m.push({event:g,listeners:R}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",k=t==="mouseout"||t==="pointerout",g&&n!==gc&&(A=n.relatedTarget||n.fromElement)&&(_r(A)||A[fn]))break e;if((k||g)&&(g=p.window===p?p:(g=p.ownerDocument)?g.defaultView||g.parentWindow:window,k?(A=n.relatedTarget||n.toElement,k=h,A=A?_r(A):null,A!==null&&(N=br(A),A!==N||A.tag!==5&&A.tag!==6)&&(A=null)):(k=null,A=h),k!==A)){if(R=pp,P="onMouseLeave",E="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(R=gp,P="onPointerLeave",E="onPointerEnter",v="pointer"),N=k==null?g:Jr(k),x=A==null?g:Jr(A),g=new R(P,v+"leave",k,n,p),g.target=N,g.relatedTarget=x,P=null,_r(p)===h&&(R=new R(E,v+"enter",A,n,p),R.target=x,R.relatedTarget=N,P=R),N=P,k&&A)t:{for(R=k,E=A,v=0,x=R;x;x=zr(x))v++;for(x=0,P=E;P;P=zr(P))x++;for(;0<v-x;)R=zr(R),v--;for(;0<x-v;)E=zr(E),x--;for(;v--;){if(R===E||E!==null&&R===E.alternate)break t;R=zr(R),E=zr(E)}R=null}else R=null;k!==null&&Cp(m,g,k,R,!1),A!==null&&N!==null&&Cp(m,N,A,R,!0)}}e:{if(g=h?Jr(h):window,k=g.nodeName&&g.nodeName.toLowerCase(),k==="select"||k==="input"&&g.type==="file")var M=Ww;else if(_p(g))if(Dy)M=Gw;else{M=Kw;var F=Hw}else(k=g.nodeName)&&k.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(M=Qw);if(M&&(M=M(t,h))){Vy(m,M,n,p);break e}F&&F(t,g,h),t==="focusout"&&(F=g._wrapperState)&&F.controlled&&g.type==="number"&&hc(g,"number",g.value)}switch(F=h?Jr(h):window,t){case"focusin":(_p(F)||F.contentEditable==="true")&&(Yr=F,Tc=h,Vs=null);break;case"focusout":Vs=Tc=Yr=null;break;case"mousedown":Sc=!0;break;case"contextmenu":case"mouseup":case"dragend":Sc=!1,Sp(m,n,p);break;case"selectionchange":if(Jw)break;case"keydown":case"keyup":Sp(m,n,p)}var w;if(zh)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Gr?Py(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(Ry&&n.locale!=="ko"&&(Gr||_!=="onCompositionStart"?_==="onCompositionEnd"&&Gr&&(w=Ay()):(Nn=p,Oh="value"in Nn?Nn.value:Nn.textContent,Gr=!0)),F=Fa(h,_),0<F.length&&(_=new mp(_,t,null,n,p),m.push({event:_,listeners:F}),w?_.data=w:(w=Ny(n),w!==null&&(_.data=w)))),(w=Uw?zw(t,n):Bw(t,n))&&(h=Fa(h,"onBeforeInput"),0<h.length&&(p=new mp("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=w))}$y(m,e)})}function Js(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fa(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ws(t,n),s!=null&&r.unshift(Js(t,s,i)),s=Ws(t,e),s!=null&&r.push(Js(t,s,i))),t=t.return}return r}function zr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Cp(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,i?(u=Ws(n,s),u!=null&&o.unshift(Js(n,u,l))):i||(u=Ws(n,s),u!=null&&o.push(Js(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var nE=/\r\n?/g,rE=/\u0000|\uFFFD/g;function Ap(t){return(typeof t=="string"?t:""+t).replace(nE,`
`).replace(rE,"")}function Go(t,e,n){if(e=Ap(e),Ap(t)!==e&&n)throw Error(O(425))}function Ua(){}var Ic=null,kc=null;function Cc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ac=typeof setTimeout=="function"?setTimeout:void 0,iE=typeof clearTimeout=="function"?clearTimeout:void 0,Rp=typeof Promise=="function"?Promise:void 0,sE=typeof queueMicrotask=="function"?queueMicrotask:typeof Rp<"u"?function(t){return Rp.resolve(null).then(t).catch(oE)}:Ac;function oE(t){setTimeout(function(){throw t})}function Nu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Qs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Qs(e)}function Fn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Pp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var bi=Math.random().toString(36).slice(2),Jt="__reactFiber$"+bi,Zs="__reactProps$"+bi,fn="__reactContainer$"+bi,Rc="__reactEvents$"+bi,aE="__reactListeners$"+bi,lE="__reactHandles$"+bi;function _r(t){var e=t[Jt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fn]||n[Jt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Pp(t);t!==null;){if(n=t[Jt])return n;t=Pp(t)}return e}t=n,n=t.parentNode}return null}function wo(t){return t=t[Jt]||t[fn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Jr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(O(33))}function El(t){return t[Zs]||null}var Pc=[],Zr=-1;function ir(t){return{current:t}}function pe(t){0>Zr||(t.current=Pc[Zr],Pc[Zr]=null,Zr--)}function ce(t,e){Zr++,Pc[Zr]=t.current,t.current=e}var Yn={},tt=ir(Yn),ft=ir(!1),Cr=Yn;function vi(t,e){var n=t.type.contextTypes;if(!n)return Yn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function pt(t){return t=t.childContextTypes,t!=null}function za(){pe(ft),pe(tt)}function Np(t,e,n){if(tt.current!==Yn)throw Error(O(168));ce(tt,e),ce(ft,n)}function Wy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(O(108,H1(t)||"Unknown",i));return we({},n,r)}function Ba(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Yn,Cr=tt.current,ce(tt,t),ce(ft,ft.current),!0}function Vp(t,e,n){var r=t.stateNode;if(!r)throw Error(O(169));n?(t=Wy(t,e,Cr),r.__reactInternalMemoizedMergedChildContext=t,pe(ft),pe(tt),ce(tt,t)):pe(ft),ce(ft,n)}var ln=null,xl=!1,Vu=!1;function Hy(t){ln===null?ln=[t]:ln.push(t)}function uE(t){xl=!0,Hy(t)}function sr(){if(!Vu&&ln!==null){Vu=!0;var t=0,e=ae;try{var n=ln;for(ae=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ln=null,xl=!1}catch(i){throw ln!==null&&(ln=ln.slice(t+1)),yy(bh,sr),i}finally{ae=e,Vu=!1}}return null}var ei=[],ti=0,$a=null,qa=0,It=[],kt=0,Ar=null,un=1,cn="";function pr(t,e){ei[ti++]=qa,ei[ti++]=$a,$a=t,qa=e}function Ky(t,e,n){It[kt++]=un,It[kt++]=cn,It[kt++]=Ar,Ar=t;var r=un;t=cn;var i=32-Ut(r)-1;r&=~(1<<i),n+=1;var s=32-Ut(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,un=1<<32-Ut(e)+i|n<<i|r,cn=s+t}else un=1<<s|n<<i|r,cn=t}function $h(t){t.return!==null&&(pr(t,1),Ky(t,1,0))}function qh(t){for(;t===$a;)$a=ei[--ti],ei[ti]=null,qa=ei[--ti],ei[ti]=null;for(;t===Ar;)Ar=It[--kt],It[kt]=null,cn=It[--kt],It[kt]=null,un=It[--kt],It[kt]=null}var _t=null,vt=null,me=!1,Ft=null;function Qy(t,e){var n=At(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Dp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,_t=t,vt=Fn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,_t=t,vt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ar!==null?{id:un,overflow:cn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=At(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,_t=t,vt=null,!0):!1;default:return!1}}function Nc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vc(t){if(me){var e=vt;if(e){var n=e;if(!Dp(t,e)){if(Nc(t))throw Error(O(418));e=Fn(n.nextSibling);var r=_t;e&&Dp(t,e)?Qy(r,n):(t.flags=t.flags&-4097|2,me=!1,_t=t)}}else{if(Nc(t))throw Error(O(418));t.flags=t.flags&-4097|2,me=!1,_t=t}}}function bp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;_t=t}function Yo(t){if(t!==_t)return!1;if(!me)return bp(t),me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Cc(t.type,t.memoizedProps)),e&&(e=vt)){if(Nc(t))throw Gy(),Error(O(418));for(;e;)Qy(t,e),e=Fn(e.nextSibling)}if(bp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vt=Fn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vt=null}}else vt=_t?Fn(t.stateNode.nextSibling):null;return!0}function Gy(){for(var t=vt;t;)t=Fn(t.nextSibling)}function _i(){vt=_t=null,me=!1}function Wh(t){Ft===null?Ft=[t]:Ft.push(t)}var cE=vn.ReactCurrentBatchConfig;function cs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var r=n.stateNode}if(!r)throw Error(O(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,t))}return t}function Xo(t,e){throw t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Mp(t){var e=t._init;return e(t._payload)}function Yy(t){function e(E,v){if(t){var x=E.deletions;x===null?(E.deletions=[v],E.flags|=16):x.push(v)}}function n(E,v){if(!t)return null;for(;v!==null;)e(E,v),v=v.sibling;return null}function r(E,v){for(E=new Map;v!==null;)v.key!==null?E.set(v.key,v):E.set(v.index,v),v=v.sibling;return E}function i(E,v){return E=$n(E,v),E.index=0,E.sibling=null,E}function s(E,v,x){return E.index=x,t?(x=E.alternate,x!==null?(x=x.index,x<v?(E.flags|=2,v):x):(E.flags|=2,v)):(E.flags|=1048576,v)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,v,x,P){return v===null||v.tag!==6?(v=Fu(x,E.mode,P),v.return=E,v):(v=i(v,x),v.return=E,v)}function u(E,v,x,P){var M=x.type;return M===Qr?p(E,v,x.props.children,P,x.key):v!==null&&(v.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Cn&&Mp(M)===v.type)?(P=i(v,x.props),P.ref=cs(E,v,x),P.return=E,P):(P=Ia(x.type,x.key,x.props,null,E.mode,P),P.ref=cs(E,v,x),P.return=E,P)}function h(E,v,x,P){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=Uu(x,E.mode,P),v.return=E,v):(v=i(v,x.children||[]),v.return=E,v)}function p(E,v,x,P,M){return v===null||v.tag!==7?(v=Sr(x,E.mode,P,M),v.return=E,v):(v=i(v,x),v.return=E,v)}function m(E,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Fu(""+v,E.mode,x),v.return=E,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Uo:return x=Ia(v.type,v.key,v.props,null,E.mode,x),x.ref=cs(E,null,v),x.return=E,x;case Kr:return v=Uu(v,E.mode,x),v.return=E,v;case Cn:var P=v._init;return m(E,P(v._payload),x)}if(ws(v)||ss(v))return v=Sr(v,E.mode,x,null),v.return=E,v;Xo(E,v)}return null}function g(E,v,x,P){var M=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return M!==null?null:l(E,v,""+x,P);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Uo:return x.key===M?u(E,v,x,P):null;case Kr:return x.key===M?h(E,v,x,P):null;case Cn:return M=x._init,g(E,v,M(x._payload),P)}if(ws(x)||ss(x))return M!==null?null:p(E,v,x,P,null);Xo(E,x)}return null}function k(E,v,x,P,M){if(typeof P=="string"&&P!==""||typeof P=="number")return E=E.get(x)||null,l(v,E,""+P,M);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Uo:return E=E.get(P.key===null?x:P.key)||null,u(v,E,P,M);case Kr:return E=E.get(P.key===null?x:P.key)||null,h(v,E,P,M);case Cn:var F=P._init;return k(E,v,x,F(P._payload),M)}if(ws(P)||ss(P))return E=E.get(x)||null,p(v,E,P,M,null);Xo(v,P)}return null}function A(E,v,x,P){for(var M=null,F=null,w=v,_=v=0,T=null;w!==null&&_<x.length;_++){w.index>_?(T=w,w=null):T=w.sibling;var I=g(E,w,x[_],P);if(I===null){w===null&&(w=T);break}t&&w&&I.alternate===null&&e(E,w),v=s(I,v,_),F===null?M=I:F.sibling=I,F=I,w=T}if(_===x.length)return n(E,w),me&&pr(E,_),M;if(w===null){for(;_<x.length;_++)w=m(E,x[_],P),w!==null&&(v=s(w,v,_),F===null?M=w:F.sibling=w,F=w);return me&&pr(E,_),M}for(w=r(E,w);_<x.length;_++)T=k(w,E,_,x[_],P),T!==null&&(t&&T.alternate!==null&&w.delete(T.key===null?_:T.key),v=s(T,v,_),F===null?M=T:F.sibling=T,F=T);return t&&w.forEach(function(C){return e(E,C)}),me&&pr(E,_),M}function R(E,v,x,P){var M=ss(x);if(typeof M!="function")throw Error(O(150));if(x=M.call(x),x==null)throw Error(O(151));for(var F=M=null,w=v,_=v=0,T=null,I=x.next();w!==null&&!I.done;_++,I=x.next()){w.index>_?(T=w,w=null):T=w.sibling;var C=g(E,w,I.value,P);if(C===null){w===null&&(w=T);break}t&&w&&C.alternate===null&&e(E,w),v=s(C,v,_),F===null?M=C:F.sibling=C,F=C,w=T}if(I.done)return n(E,w),me&&pr(E,_),M;if(w===null){for(;!I.done;_++,I=x.next())I=m(E,I.value,P),I!==null&&(v=s(I,v,_),F===null?M=I:F.sibling=I,F=I);return me&&pr(E,_),M}for(w=r(E,w);!I.done;_++,I=x.next())I=k(w,E,_,I.value,P),I!==null&&(t&&I.alternate!==null&&w.delete(I.key===null?_:I.key),v=s(I,v,_),F===null?M=I:F.sibling=I,F=I);return t&&w.forEach(function(V){return e(E,V)}),me&&pr(E,_),M}function N(E,v,x,P){if(typeof x=="object"&&x!==null&&x.type===Qr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Uo:e:{for(var M=x.key,F=v;F!==null;){if(F.key===M){if(M=x.type,M===Qr){if(F.tag===7){n(E,F.sibling),v=i(F,x.props.children),v.return=E,E=v;break e}}else if(F.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Cn&&Mp(M)===F.type){n(E,F.sibling),v=i(F,x.props),v.ref=cs(E,F,x),v.return=E,E=v;break e}n(E,F);break}else e(E,F);F=F.sibling}x.type===Qr?(v=Sr(x.props.children,E.mode,P,x.key),v.return=E,E=v):(P=Ia(x.type,x.key,x.props,null,E.mode,P),P.ref=cs(E,v,x),P.return=E,E=P)}return o(E);case Kr:e:{for(F=x.key;v!==null;){if(v.key===F)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(E,v.sibling),v=i(v,x.children||[]),v.return=E,E=v;break e}else{n(E,v);break}else e(E,v);v=v.sibling}v=Uu(x,E.mode,P),v.return=E,E=v}return o(E);case Cn:return F=x._init,N(E,v,F(x._payload),P)}if(ws(x))return A(E,v,x,P);if(ss(x))return R(E,v,x,P);Xo(E,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(E,v.sibling),v=i(v,x),v.return=E,E=v):(n(E,v),v=Fu(x,E.mode,P),v.return=E,E=v),o(E)):n(E,v)}return N}var wi=Yy(!0),Xy=Yy(!1),Wa=ir(null),Ha=null,ni=null,Hh=null;function Kh(){Hh=ni=Ha=null}function Qh(t){var e=Wa.current;pe(Wa),t._currentValue=e}function Dc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ui(t,e){Ha=t,Hh=ni=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dt=!0),t.firstContext=null)}function Pt(t){var e=t._currentValue;if(Hh!==t)if(t={context:t,memoizedValue:e,next:null},ni===null){if(Ha===null)throw Error(O(308));ni=t,Ha.dependencies={lanes:0,firstContext:t}}else ni=ni.next=t;return e}var wr=null;function Gh(t){wr===null?wr=[t]:wr.push(t)}function Jy(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Gh(e)):(n.next=i.next,i.next=n),e.interleaved=n,pn(t,r)}function pn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var An=!1;function Yh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Un(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,oe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,pn(t,n)}return i=r.interleaved,i===null?(e.next=e,Gh(r)):(e.next=i.next,i.next=e),r.interleaved=e,pn(t,n)}function _a(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Mh(t,n)}}function jp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ka(t,e,n,r){var i=t.updateQueue;An=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?s=h:o.next=h,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=u))}if(s!==null){var m=i.baseState;o=0,p=h=u=null,l=s;do{var g=l.lane,k=l.eventTime;if((r&g)===g){p!==null&&(p=p.next={eventTime:k,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var A=t,R=l;switch(g=e,k=n,R.tag){case 1:if(A=R.payload,typeof A=="function"){m=A.call(k,m,g);break e}m=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=R.payload,g=typeof A=="function"?A.call(k,m,g):A,g==null)break e;m=we({},m,g);break e;case 2:An=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[l]:g.push(l))}else k={eventTime:k,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=k,u=m):p=p.next=k,o|=g;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;g=l,l=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(p===null&&(u=m),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Pr|=o,t.lanes=o,t.memoizedState=m}}function Lp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(O(191,i));i.call(r)}}}var Eo={},tn=ir(Eo),eo=ir(Eo),to=ir(Eo);function Er(t){if(t===Eo)throw Error(O(174));return t}function Xh(t,e){switch(ce(to,e),ce(eo,t),ce(tn,Eo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=fc(e,t)}pe(tn),ce(tn,e)}function Ei(){pe(tn),pe(eo),pe(to)}function ev(t){Er(to.current);var e=Er(tn.current),n=fc(e,t.type);e!==n&&(ce(eo,t),ce(tn,n))}function Jh(t){eo.current===t&&(pe(tn),pe(eo))}var ye=ir(0);function Qa(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Du=[];function Zh(){for(var t=0;t<Du.length;t++)Du[t]._workInProgressVersionPrimary=null;Du.length=0}var wa=vn.ReactCurrentDispatcher,bu=vn.ReactCurrentBatchConfig,Rr=0,ve=null,be=null,Ue=null,Ga=!1,Ds=!1,no=0,hE=0;function Qe(){throw Error(O(321))}function ed(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Bt(t[n],e[n]))return!1;return!0}function td(t,e,n,r,i,s){if(Rr=s,ve=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wa.current=t===null||t.memoizedState===null?mE:gE,t=n(r,i),Ds){s=0;do{if(Ds=!1,no=0,25<=s)throw Error(O(301));s+=1,Ue=be=null,e.updateQueue=null,wa.current=yE,t=n(r,i)}while(Ds)}if(wa.current=Ya,e=be!==null&&be.next!==null,Rr=0,Ue=be=ve=null,Ga=!1,e)throw Error(O(300));return t}function nd(){var t=no!==0;return no=0,t}function Yt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?ve.memoizedState=Ue=t:Ue=Ue.next=t,Ue}function Nt(){if(be===null){var t=ve.alternate;t=t!==null?t.memoizedState:null}else t=be.next;var e=Ue===null?ve.memoizedState:Ue.next;if(e!==null)Ue=e,be=t;else{if(t===null)throw Error(O(310));be=t,t={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},Ue===null?ve.memoizedState=Ue=t:Ue=Ue.next=t}return Ue}function ro(t,e){return typeof e=="function"?e(t):e}function Mu(t){var e=Nt(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=be,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,h=s;do{var p=h.lane;if((Rr&p)===p)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,ve.lanes|=p,Pr|=p}h=h.next}while(h!==null&&h!==s);u===null?o=r:u.next=l,Bt(r,e.memoizedState)||(dt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ve.lanes|=s,Pr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ju(t){var e=Nt(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Bt(s,e.memoizedState)||(dt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function tv(){}function nv(t,e){var n=ve,r=Nt(),i=e(),s=!Bt(r.memoizedState,i);if(s&&(r.memoizedState=i,dt=!0),r=r.queue,rd(sv.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ue!==null&&Ue.memoizedState.tag&1){if(n.flags|=2048,io(9,iv.bind(null,n,r,i,e),void 0,null),ze===null)throw Error(O(349));Rr&30||rv(n,e,i)}return i}function rv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ve.updateQueue,e===null?(e={lastEffect:null,stores:null},ve.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function iv(t,e,n,r){e.value=n,e.getSnapshot=r,ov(e)&&av(t)}function sv(t,e,n){return n(function(){ov(e)&&av(t)})}function ov(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Bt(t,n)}catch{return!0}}function av(t){var e=pn(t,1);e!==null&&zt(e,t,1,-1)}function Op(t){var e=Yt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ro,lastRenderedState:t},e.queue=t,t=t.dispatch=pE.bind(null,ve,t),[e.memoizedState,t]}function io(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ve.updateQueue,e===null?(e={lastEffect:null,stores:null},ve.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function lv(){return Nt().memoizedState}function Ea(t,e,n,r){var i=Yt();ve.flags|=t,i.memoizedState=io(1|e,n,void 0,r===void 0?null:r)}function Tl(t,e,n,r){var i=Nt();r=r===void 0?null:r;var s=void 0;if(be!==null){var o=be.memoizedState;if(s=o.destroy,r!==null&&ed(r,o.deps)){i.memoizedState=io(e,n,s,r);return}}ve.flags|=t,i.memoizedState=io(1|e,n,s,r)}function Fp(t,e){return Ea(8390656,8,t,e)}function rd(t,e){return Tl(2048,8,t,e)}function uv(t,e){return Tl(4,2,t,e)}function cv(t,e){return Tl(4,4,t,e)}function hv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function dv(t,e,n){return n=n!=null?n.concat([t]):null,Tl(4,4,hv.bind(null,e,t),n)}function id(){}function fv(t,e){var n=Nt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ed(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function pv(t,e){var n=Nt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ed(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function mv(t,e,n){return Rr&21?(Bt(n,e)||(n=wy(),ve.lanes|=n,Pr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dt=!0),t.memoizedState=n)}function dE(t,e){var n=ae;ae=n!==0&&4>n?n:4,t(!0);var r=bu.transition;bu.transition={};try{t(!1),e()}finally{ae=n,bu.transition=r}}function gv(){return Nt().memoizedState}function fE(t,e,n){var r=Bn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},yv(t))vv(e,n);else if(n=Jy(t,e,n,r),n!==null){var i=at();zt(n,t,r,i),_v(n,e,r)}}function pE(t,e,n){var r=Bn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(yv(t))vv(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Bt(l,o)){var u=e.interleaved;u===null?(i.next=i,Gh(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Jy(t,e,i,r),n!==null&&(i=at(),zt(n,t,r,i),_v(n,e,r))}}function yv(t){var e=t.alternate;return t===ve||e!==null&&e===ve}function vv(t,e){Ds=Ga=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function _v(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Mh(t,n)}}var Ya={readContext:Pt,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useInsertionEffect:Qe,useLayoutEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useMutableSource:Qe,useSyncExternalStore:Qe,useId:Qe,unstable_isNewReconciler:!1},mE={readContext:Pt,useCallback:function(t,e){return Yt().memoizedState=[t,e===void 0?null:e],t},useContext:Pt,useEffect:Fp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ea(4194308,4,hv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ea(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ea(4,2,t,e)},useMemo:function(t,e){var n=Yt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Yt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=fE.bind(null,ve,t),[r.memoizedState,t]},useRef:function(t){var e=Yt();return t={current:t},e.memoizedState=t},useState:Op,useDebugValue:id,useDeferredValue:function(t){return Yt().memoizedState=t},useTransition:function(){var t=Op(!1),e=t[0];return t=dE.bind(null,t[1]),Yt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ve,i=Yt();if(me){if(n===void 0)throw Error(O(407));n=n()}else{if(n=e(),ze===null)throw Error(O(349));Rr&30||rv(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Fp(sv.bind(null,r,s,t),[t]),r.flags|=2048,io(9,iv.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Yt(),e=ze.identifierPrefix;if(me){var n=cn,r=un;n=(r&~(1<<32-Ut(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=no++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=hE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},gE={readContext:Pt,useCallback:fv,useContext:Pt,useEffect:rd,useImperativeHandle:dv,useInsertionEffect:uv,useLayoutEffect:cv,useMemo:pv,useReducer:Mu,useRef:lv,useState:function(){return Mu(ro)},useDebugValue:id,useDeferredValue:function(t){var e=Nt();return mv(e,be.memoizedState,t)},useTransition:function(){var t=Mu(ro)[0],e=Nt().memoizedState;return[t,e]},useMutableSource:tv,useSyncExternalStore:nv,useId:gv,unstable_isNewReconciler:!1},yE={readContext:Pt,useCallback:fv,useContext:Pt,useEffect:rd,useImperativeHandle:dv,useInsertionEffect:uv,useLayoutEffect:cv,useMemo:pv,useReducer:ju,useRef:lv,useState:function(){return ju(ro)},useDebugValue:id,useDeferredValue:function(t){var e=Nt();return be===null?e.memoizedState=t:mv(e,be.memoizedState,t)},useTransition:function(){var t=ju(ro)[0],e=Nt().memoizedState;return[t,e]},useMutableSource:tv,useSyncExternalStore:nv,useId:gv,unstable_isNewReconciler:!1};function Lt(t,e){if(t&&t.defaultProps){e=we({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function bc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:we({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Sl={isMounted:function(t){return(t=t._reactInternals)?br(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=at(),i=Bn(t),s=hn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Un(t,s,i),e!==null&&(zt(e,t,i,r),_a(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=at(),i=Bn(t),s=hn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Un(t,s,i),e!==null&&(zt(e,t,i,r),_a(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=at(),r=Bn(t),i=hn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Un(t,i,r),e!==null&&(zt(e,t,r,n),_a(e,t,r))}};function Up(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ys(n,r)||!Ys(i,s):!0}function wv(t,e,n){var r=!1,i=Yn,s=e.contextType;return typeof s=="object"&&s!==null?s=Pt(s):(i=pt(e)?Cr:tt.current,r=e.contextTypes,s=(r=r!=null)?vi(t,i):Yn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Sl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function zp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Sl.enqueueReplaceState(e,e.state,null)}function Mc(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Yh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Pt(s):(s=pt(e)?Cr:tt.current,i.context=vi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(bc(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Sl.enqueueReplaceState(i,i.state,null),Ka(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function xi(t,e){try{var n="",r=e;do n+=W1(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Lu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function jc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var vE=typeof WeakMap=="function"?WeakMap:Map;function Ev(t,e,n){n=hn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ja||(Ja=!0,Hc=r),jc(t,e)},n}function xv(t,e,n){n=hn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){jc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){jc(t,e),typeof r!="function"&&(zn===null?zn=new Set([this]):zn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Bp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new vE;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=VE.bind(null,t,e,n),e.then(t,t))}function $p(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function qp(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=hn(-1,1),e.tag=2,Un(n,e,1))),n.lanes|=1),t)}var _E=vn.ReactCurrentOwner,dt=!1;function st(t,e,n,r){e.child=t===null?Xy(e,null,n,r):wi(e,t.child,n,r)}function Wp(t,e,n,r,i){n=n.render;var s=e.ref;return ui(e,i),r=td(t,e,n,r,s,i),n=nd(),t!==null&&!dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,mn(t,e,i)):(me&&n&&$h(e),e.flags|=1,st(t,e,r,i),e.child)}function Hp(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!dd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Tv(t,e,s,r,i)):(t=Ia(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ys,n(o,r)&&t.ref===e.ref)return mn(t,e,i)}return e.flags|=1,t=$n(s,r),t.ref=e.ref,t.return=e,e.child=t}function Tv(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ys(s,r)&&t.ref===e.ref)if(dt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(dt=!0);else return e.lanes=t.lanes,mn(t,e,i)}return Lc(t,e,n,r,i)}function Sv(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ce(ii,yt),yt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ce(ii,yt),yt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ce(ii,yt),yt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ce(ii,yt),yt|=r;return st(t,e,i,n),e.child}function Iv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Lc(t,e,n,r,i){var s=pt(n)?Cr:tt.current;return s=vi(e,s),ui(e,i),n=td(t,e,n,r,s,i),r=nd(),t!==null&&!dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,mn(t,e,i)):(me&&r&&$h(e),e.flags|=1,st(t,e,n,i),e.child)}function Kp(t,e,n,r,i){if(pt(n)){var s=!0;Ba(e)}else s=!1;if(ui(e,i),e.stateNode===null)xa(t,e),wv(e,n,r),Mc(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Pt(h):(h=pt(n)?Cr:tt.current,h=vi(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&zp(e,o,r,h),An=!1;var g=e.memoizedState;o.state=g,Ka(e,r,o,i),u=e.memoizedState,l!==r||g!==u||ft.current||An?(typeof p=="function"&&(bc(e,n,p,r),u=e.memoizedState),(l=An||Up(e,n,l,r,g,u,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Zy(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Lt(e.type,l),o.props=h,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Pt(u):(u=pt(n)?Cr:tt.current,u=vi(e,u));var k=n.getDerivedStateFromProps;(p=typeof k=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&zp(e,o,r,u),An=!1,g=e.memoizedState,o.state=g,Ka(e,r,o,i);var A=e.memoizedState;l!==m||g!==A||ft.current||An?(typeof k=="function"&&(bc(e,n,k,r),A=e.memoizedState),(h=An||Up(e,n,h,r,g,A,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,A,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,A,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=A),o.props=r,o.state=A,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Oc(t,e,n,r,s,i)}function Oc(t,e,n,r,i,s){Iv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Vp(e,n,!1),mn(t,e,s);r=e.stateNode,_E.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=wi(e,t.child,null,s),e.child=wi(e,null,l,s)):st(t,e,l,s),e.memoizedState=r.state,i&&Vp(e,n,!0),e.child}function kv(t){var e=t.stateNode;e.pendingContext?Np(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Np(t,e.context,!1),Xh(t,e.containerInfo)}function Qp(t,e,n,r,i){return _i(),Wh(i),e.flags|=256,st(t,e,n,r),e.child}var Fc={dehydrated:null,treeContext:null,retryLane:0};function Uc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Cv(t,e,n){var r=e.pendingProps,i=ye.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ce(ye,i&1),t===null)return Vc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Cl(o,r,0,null),t=Sr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Uc(n),e.memoizedState=Fc,t):sd(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return wE(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=$n(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=$n(l,s):(s=Sr(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Uc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Fc,r}return s=t.child,t=s.sibling,r=$n(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function sd(t,e){return e=Cl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Jo(t,e,n,r){return r!==null&&Wh(r),wi(e,t.child,null,n),t=sd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function wE(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Lu(Error(O(422))),Jo(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Cl({mode:"visible",children:r.children},i,0,null),s=Sr(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&wi(e,t.child,null,o),e.child.memoizedState=Uc(o),e.memoizedState=Fc,s);if(!(e.mode&1))return Jo(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(O(419)),r=Lu(s,r,void 0),Jo(t,e,o,r)}if(l=(o&t.childLanes)!==0,dt||l){if(r=ze,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,pn(t,i),zt(r,t,i,-1))}return hd(),r=Lu(Error(O(421))),Jo(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=DE.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,vt=Fn(i.nextSibling),_t=e,me=!0,Ft=null,t!==null&&(It[kt++]=un,It[kt++]=cn,It[kt++]=Ar,un=t.id,cn=t.overflow,Ar=e),e=sd(e,r.children),e.flags|=4096,e)}function Gp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Dc(t.return,e,n)}function Ou(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Av(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(st(t,e,r.children,n),r=ye.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Gp(t,n,e);else if(t.tag===19)Gp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ce(ye,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Qa(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ou(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Qa(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ou(e,!0,n,null,s);break;case"together":Ou(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function mn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Pr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,n=$n(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=$n(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function EE(t,e,n){switch(e.tag){case 3:kv(e),_i();break;case 5:ev(e);break;case 1:pt(e.type)&&Ba(e);break;case 4:Xh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ce(Wa,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ce(ye,ye.current&1),e.flags|=128,null):n&e.child.childLanes?Cv(t,e,n):(ce(ye,ye.current&1),t=mn(t,e,n),t!==null?t.sibling:null);ce(ye,ye.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Av(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ce(ye,ye.current),r)break;return null;case 22:case 23:return e.lanes=0,Sv(t,e,n)}return mn(t,e,n)}var Rv,zc,Pv,Nv;Rv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zc=function(){};Pv=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Er(tn.current);var s=null;switch(n){case"input":i=uc(t,i),r=uc(t,r),s=[];break;case"select":i=we({},i,{value:void 0}),r=we({},r,{value:void 0}),s=[];break;case"textarea":i=dc(t,i),r=dc(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ua)}pc(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&($s.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&($s.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&de("scroll",t),s||l===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};Nv=function(t,e,n,r){n!==r&&(e.flags|=4)};function hs(t,e){if(!me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ge(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function xE(t,e,n){var r=e.pendingProps;switch(qh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ge(e),null;case 1:return pt(e.type)&&za(),Ge(e),null;case 3:return r=e.stateNode,Ei(),pe(ft),pe(tt),Zh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Yo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ft!==null&&(Gc(Ft),Ft=null))),zc(t,e),Ge(e),null;case 5:Jh(e);var i=Er(to.current);if(n=e.type,t!==null&&e.stateNode!=null)Pv(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(O(166));return Ge(e),null}if(t=Er(tn.current),Yo(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Jt]=e,r[Zs]=s,t=(e.mode&1)!==0,n){case"dialog":de("cancel",r),de("close",r);break;case"iframe":case"object":case"embed":de("load",r);break;case"video":case"audio":for(i=0;i<xs.length;i++)de(xs[i],r);break;case"source":de("error",r);break;case"img":case"image":case"link":de("error",r),de("load",r);break;case"details":de("toggle",r);break;case"input":ip(r,s),de("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},de("invalid",r);break;case"textarea":op(r,s),de("invalid",r)}pc(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Go(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Go(r.textContent,l,t),i=["children",""+l]):$s.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&de("scroll",r)}switch(n){case"input":zo(r),sp(r,s,!0);break;case"textarea":zo(r),ap(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ua)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=sy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Jt]=e,t[Zs]=r,Rv(t,e,!1,!1),e.stateNode=t;e:{switch(o=mc(n,r),n){case"dialog":de("cancel",t),de("close",t),i=r;break;case"iframe":case"object":case"embed":de("load",t),i=r;break;case"video":case"audio":for(i=0;i<xs.length;i++)de(xs[i],t);i=r;break;case"source":de("error",t),i=r;break;case"img":case"image":case"link":de("error",t),de("load",t),i=r;break;case"details":de("toggle",t),i=r;break;case"input":ip(t,r),i=uc(t,r),de("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=we({},r,{value:void 0}),de("invalid",t);break;case"textarea":op(t,r),i=dc(t,r),de("invalid",t);break;default:i=r}pc(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?ly(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&oy(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&qs(t,u):typeof u=="number"&&qs(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&($s.hasOwnProperty(s)?u!=null&&s==="onScroll"&&de("scroll",t):u!=null&&Rh(t,s,u,o))}switch(n){case"input":zo(t),sp(t,r,!1);break;case"textarea":zo(t),ap(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Gn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?si(t,!!r.multiple,s,!1):r.defaultValue!=null&&si(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ua)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ge(e),null;case 6:if(t&&e.stateNode!=null)Nv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(O(166));if(n=Er(to.current),Er(tn.current),Yo(e)){if(r=e.stateNode,n=e.memoizedProps,r[Jt]=e,(s=r.nodeValue!==n)&&(t=_t,t!==null))switch(t.tag){case 3:Go(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Go(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Jt]=e,e.stateNode=r}return Ge(e),null;case 13:if(pe(ye),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(me&&vt!==null&&e.mode&1&&!(e.flags&128))Gy(),_i(),e.flags|=98560,s=!1;else if(s=Yo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(O(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(O(317));s[Jt]=e}else _i(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ge(e),s=!1}else Ft!==null&&(Gc(Ft),Ft=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ye.current&1?Me===0&&(Me=3):hd())),e.updateQueue!==null&&(e.flags|=4),Ge(e),null);case 4:return Ei(),zc(t,e),t===null&&Xs(e.stateNode.containerInfo),Ge(e),null;case 10:return Qh(e.type._context),Ge(e),null;case 17:return pt(e.type)&&za(),Ge(e),null;case 19:if(pe(ye),s=e.memoizedState,s===null)return Ge(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)hs(s,!1);else{if(Me!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Qa(t),o!==null){for(e.flags|=128,hs(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ce(ye,ye.current&1|2),e.child}t=t.sibling}s.tail!==null&&ke()>Ti&&(e.flags|=128,r=!0,hs(s,!1),e.lanes=4194304)}else{if(!r)if(t=Qa(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),hs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!me)return Ge(e),null}else 2*ke()-s.renderingStartTime>Ti&&n!==1073741824&&(e.flags|=128,r=!0,hs(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ke(),e.sibling=null,n=ye.current,ce(ye,r?n&1|2:n&1),e):(Ge(e),null);case 22:case 23:return cd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?yt&1073741824&&(Ge(e),e.subtreeFlags&6&&(e.flags|=8192)):Ge(e),null;case 24:return null;case 25:return null}throw Error(O(156,e.tag))}function TE(t,e){switch(qh(e),e.tag){case 1:return pt(e.type)&&za(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ei(),pe(ft),pe(tt),Zh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Jh(e),null;case 13:if(pe(ye),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));_i()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return pe(ye),null;case 4:return Ei(),null;case 10:return Qh(e.type._context),null;case 22:case 23:return cd(),null;case 24:return null;default:return null}}var Zo=!1,Je=!1,SE=typeof WeakSet=="function"?WeakSet:Set,q=null;function ri(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Te(t,e,r)}else n.current=null}function Bc(t,e,n){try{n()}catch(r){Te(t,e,r)}}var Yp=!1;function IE(t,e){if(Ic=La,t=jy(),Bh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,p=0,m=t,g=null;t:for(;;){for(var k;m!==n||i!==0&&m.nodeType!==3||(l=o+i),m!==s||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(k=m.firstChild)!==null;)g=m,m=k;for(;;){if(m===t)break t;if(g===n&&++h===i&&(l=o),g===s&&++p===r&&(u=o),(k=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=k}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(kc={focusedElem:t,selectionRange:n},La=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var R=A.memoizedProps,N=A.memoizedState,E=e.stateNode,v=E.getSnapshotBeforeUpdate(e.elementType===e.type?R:Lt(e.type,R),N);E.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(P){Te(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return A=Yp,Yp=!1,A}function bs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Bc(e,n,s)}i=i.next}while(i!==r)}}function Il(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function $c(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Vv(t){var e=t.alternate;e!==null&&(t.alternate=null,Vv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Jt],delete e[Zs],delete e[Rc],delete e[aE],delete e[lE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Dv(t){return t.tag===5||t.tag===3||t.tag===4}function Xp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Dv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ua));else if(r!==4&&(t=t.child,t!==null))for(qc(t,e,n),t=t.sibling;t!==null;)qc(t,e,n),t=t.sibling}function Wc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Wc(t,e,n),t=t.sibling;t!==null;)Wc(t,e,n),t=t.sibling}var Be=null,Ot=!1;function kn(t,e,n){for(n=n.child;n!==null;)bv(t,e,n),n=n.sibling}function bv(t,e,n){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(yl,n)}catch{}switch(n.tag){case 5:Je||ri(n,e);case 6:var r=Be,i=Ot;Be=null,kn(t,e,n),Be=r,Ot=i,Be!==null&&(Ot?(t=Be,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Be.removeChild(n.stateNode));break;case 18:Be!==null&&(Ot?(t=Be,n=n.stateNode,t.nodeType===8?Nu(t.parentNode,n):t.nodeType===1&&Nu(t,n),Qs(t)):Nu(Be,n.stateNode));break;case 4:r=Be,i=Ot,Be=n.stateNode.containerInfo,Ot=!0,kn(t,e,n),Be=r,Ot=i;break;case 0:case 11:case 14:case 15:if(!Je&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Bc(n,e,o),i=i.next}while(i!==r)}kn(t,e,n);break;case 1:if(!Je&&(ri(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Te(n,e,l)}kn(t,e,n);break;case 21:kn(t,e,n);break;case 22:n.mode&1?(Je=(r=Je)||n.memoizedState!==null,kn(t,e,n),Je=r):kn(t,e,n);break;default:kn(t,e,n)}}function Jp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new SE),e.forEach(function(r){var i=bE.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Mt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Be=l.stateNode,Ot=!1;break e;case 3:Be=l.stateNode.containerInfo,Ot=!0;break e;case 4:Be=l.stateNode.containerInfo,Ot=!0;break e}l=l.return}if(Be===null)throw Error(O(160));bv(s,o,i),Be=null,Ot=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){Te(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Mv(e,t),e=e.sibling}function Mv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mt(e,t),Ht(t),r&4){try{bs(3,t,t.return),Il(3,t)}catch(R){Te(t,t.return,R)}try{bs(5,t,t.return)}catch(R){Te(t,t.return,R)}}break;case 1:Mt(e,t),Ht(t),r&512&&n!==null&&ri(n,n.return);break;case 5:if(Mt(e,t),Ht(t),r&512&&n!==null&&ri(n,n.return),t.flags&32){var i=t.stateNode;try{qs(i,"")}catch(R){Te(t,t.return,R)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&ry(i,s),mc(l,o);var h=mc(l,s);for(o=0;o<u.length;o+=2){var p=u[o],m=u[o+1];p==="style"?ly(i,m):p==="dangerouslySetInnerHTML"?oy(i,m):p==="children"?qs(i,m):Rh(i,p,m,h)}switch(l){case"input":cc(i,s);break;case"textarea":iy(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var k=s.value;k!=null?si(i,!!s.multiple,k,!1):g!==!!s.multiple&&(s.defaultValue!=null?si(i,!!s.multiple,s.defaultValue,!0):si(i,!!s.multiple,s.multiple?[]:"",!1))}i[Zs]=s}catch(R){Te(t,t.return,R)}}break;case 6:if(Mt(e,t),Ht(t),r&4){if(t.stateNode===null)throw Error(O(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(R){Te(t,t.return,R)}}break;case 3:if(Mt(e,t),Ht(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Qs(e.containerInfo)}catch(R){Te(t,t.return,R)}break;case 4:Mt(e,t),Ht(t);break;case 13:Mt(e,t),Ht(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(ld=ke())),r&4&&Jp(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Je=(h=Je)||p,Mt(e,t),Je=h):Mt(e,t),Ht(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(q=t,p=t.child;p!==null;){for(m=q=p;q!==null;){switch(g=q,k=g.child,g.tag){case 0:case 11:case 14:case 15:bs(4,g,g.return);break;case 1:ri(g,g.return);var A=g.stateNode;if(typeof A.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(R){Te(r,n,R)}}break;case 5:ri(g,g.return);break;case 22:if(g.memoizedState!==null){em(m);continue}}k!==null?(k.return=g,q=k):em(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{i=m.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=ay("display",o))}catch(R){Te(t,t.return,R)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(R){Te(t,t.return,R)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Mt(e,t),Ht(t),r&4&&Jp(t);break;case 21:break;default:Mt(e,t),Ht(t)}}function Ht(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Dv(n)){var r=n;break e}n=n.return}throw Error(O(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(qs(i,""),r.flags&=-33);var s=Xp(t);Wc(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Xp(t);qc(t,l,o);break;default:throw Error(O(161))}}catch(u){Te(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function kE(t,e,n){q=t,jv(t)}function jv(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var i=q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Zo;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Je;l=Zo;var h=Je;if(Zo=o,(Je=u)&&!h)for(q=i;q!==null;)o=q,u=o.child,o.tag===22&&o.memoizedState!==null?tm(i):u!==null?(u.return=o,q=u):tm(i);for(;s!==null;)q=s,jv(s),s=s.sibling;q=i,Zo=l,Je=h}Zp(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,q=s):Zp(t)}}function Zp(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Je||Il(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Je)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Lt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Lp(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Lp(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&Qs(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}Je||e.flags&512&&$c(e)}catch(g){Te(e,e.return,g)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function em(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function tm(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Il(4,e)}catch(u){Te(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Te(e,i,u)}}var s=e.return;try{$c(e)}catch(u){Te(e,s,u)}break;case 5:var o=e.return;try{$c(e)}catch(u){Te(e,o,u)}}}catch(u){Te(e,e.return,u)}if(e===t){q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,q=l;break}q=e.return}}var CE=Math.ceil,Xa=vn.ReactCurrentDispatcher,od=vn.ReactCurrentOwner,Rt=vn.ReactCurrentBatchConfig,oe=0,ze=null,Re=null,qe=0,yt=0,ii=ir(0),Me=0,so=null,Pr=0,kl=0,ad=0,Ms=null,ht=null,ld=0,Ti=1/0,an=null,Ja=!1,Hc=null,zn=null,ea=!1,Vn=null,Za=0,js=0,Kc=null,Ta=-1,Sa=0;function at(){return oe&6?ke():Ta!==-1?Ta:Ta=ke()}function Bn(t){return t.mode&1?oe&2&&qe!==0?qe&-qe:cE.transition!==null?(Sa===0&&(Sa=wy()),Sa):(t=ae,t!==0||(t=window.event,t=t===void 0?16:Cy(t.type)),t):1}function zt(t,e,n,r){if(50<js)throw js=0,Kc=null,Error(O(185));vo(t,n,r),(!(oe&2)||t!==ze)&&(t===ze&&(!(oe&2)&&(kl|=n),Me===4&&Pn(t,qe)),mt(t,r),n===1&&oe===0&&!(e.mode&1)&&(Ti=ke()+500,xl&&sr()))}function mt(t,e){var n=t.callbackNode;cw(t,e);var r=ja(t,t===ze?qe:0);if(r===0)n!==null&&cp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&cp(n),e===1)t.tag===0?uE(nm.bind(null,t)):Hy(nm.bind(null,t)),sE(function(){!(oe&6)&&sr()}),n=null;else{switch(Ey(r)){case 1:n=bh;break;case 4:n=vy;break;case 16:n=Ma;break;case 536870912:n=_y;break;default:n=Ma}n=qv(n,Lv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Lv(t,e){if(Ta=-1,Sa=0,oe&6)throw Error(O(327));var n=t.callbackNode;if(ci()&&t.callbackNode!==n)return null;var r=ja(t,t===ze?qe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=el(t,r);else{e=r;var i=oe;oe|=2;var s=Fv();(ze!==t||qe!==e)&&(an=null,Ti=ke()+500,Tr(t,e));do try{PE();break}catch(l){Ov(t,l)}while(!0);Kh(),Xa.current=s,oe=i,Re!==null?e=0:(ze=null,qe=0,e=Me)}if(e!==0){if(e===2&&(i=wc(t),i!==0&&(r=i,e=Qc(t,i))),e===1)throw n=so,Tr(t,0),Pn(t,r),mt(t,ke()),n;if(e===6)Pn(t,r);else{if(i=t.current.alternate,!(r&30)&&!AE(i)&&(e=el(t,r),e===2&&(s=wc(t),s!==0&&(r=s,e=Qc(t,s))),e===1))throw n=so,Tr(t,0),Pn(t,r),mt(t,ke()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(O(345));case 2:mr(t,ht,an);break;case 3:if(Pn(t,r),(r&130023424)===r&&(e=ld+500-ke(),10<e)){if(ja(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){at(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ac(mr.bind(null,t,ht,an),e);break}mr(t,ht,an);break;case 4:if(Pn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Ut(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*CE(r/1960))-r,10<r){t.timeoutHandle=Ac(mr.bind(null,t,ht,an),r);break}mr(t,ht,an);break;case 5:mr(t,ht,an);break;default:throw Error(O(329))}}}return mt(t,ke()),t.callbackNode===n?Lv.bind(null,t):null}function Qc(t,e){var n=Ms;return t.current.memoizedState.isDehydrated&&(Tr(t,e).flags|=256),t=el(t,e),t!==2&&(e=ht,ht=n,e!==null&&Gc(e)),t}function Gc(t){ht===null?ht=t:ht.push.apply(ht,t)}function AE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Bt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Pn(t,e){for(e&=~ad,e&=~kl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ut(e),r=1<<n;t[n]=-1,e&=~r}}function nm(t){if(oe&6)throw Error(O(327));ci();var e=ja(t,0);if(!(e&1))return mt(t,ke()),null;var n=el(t,e);if(t.tag!==0&&n===2){var r=wc(t);r!==0&&(e=r,n=Qc(t,r))}if(n===1)throw n=so,Tr(t,0),Pn(t,e),mt(t,ke()),n;if(n===6)throw Error(O(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,mr(t,ht,an),mt(t,ke()),null}function ud(t,e){var n=oe;oe|=1;try{return t(e)}finally{oe=n,oe===0&&(Ti=ke()+500,xl&&sr())}}function Nr(t){Vn!==null&&Vn.tag===0&&!(oe&6)&&ci();var e=oe;oe|=1;var n=Rt.transition,r=ae;try{if(Rt.transition=null,ae=1,t)return t()}finally{ae=r,Rt.transition=n,oe=e,!(oe&6)&&sr()}}function cd(){yt=ii.current,pe(ii)}function Tr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,iE(n)),Re!==null)for(n=Re.return;n!==null;){var r=n;switch(qh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&za();break;case 3:Ei(),pe(ft),pe(tt),Zh();break;case 5:Jh(r);break;case 4:Ei();break;case 13:pe(ye);break;case 19:pe(ye);break;case 10:Qh(r.type._context);break;case 22:case 23:cd()}n=n.return}if(ze=t,Re=t=$n(t.current,null),qe=yt=e,Me=0,so=null,ad=kl=Pr=0,ht=Ms=null,wr!==null){for(e=0;e<wr.length;e++)if(n=wr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}wr=null}return t}function Ov(t,e){do{var n=Re;try{if(Kh(),wa.current=Ya,Ga){for(var r=ve.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ga=!1}if(Rr=0,Ue=be=ve=null,Ds=!1,no=0,od.current=null,n===null||n.return===null){Me=1,so=e,Re=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=qe,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var g=p.alternate;g?(p.updateQueue=g.updateQueue,p.memoizedState=g.memoizedState,p.lanes=g.lanes):(p.updateQueue=null,p.memoizedState=null)}var k=$p(o);if(k!==null){k.flags&=-257,qp(k,o,l,s,e),k.mode&1&&Bp(s,h,e),e=k,u=h;var A=e.updateQueue;if(A===null){var R=new Set;R.add(u),e.updateQueue=R}else A.add(u);break e}else{if(!(e&1)){Bp(s,h,e),hd();break e}u=Error(O(426))}}else if(me&&l.mode&1){var N=$p(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),qp(N,o,l,s,e),Wh(xi(u,l));break e}}s=u=xi(u,l),Me!==4&&(Me=2),Ms===null?Ms=[s]:Ms.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=Ev(s,u,e);jp(s,E);break e;case 1:l=u;var v=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(zn===null||!zn.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var P=xv(s,l,e);jp(s,P);break e}}s=s.return}while(s!==null)}zv(n)}catch(M){e=M,Re===n&&n!==null&&(Re=n=n.return);continue}break}while(!0)}function Fv(){var t=Xa.current;return Xa.current=Ya,t===null?Ya:t}function hd(){(Me===0||Me===3||Me===2)&&(Me=4),ze===null||!(Pr&268435455)&&!(kl&268435455)||Pn(ze,qe)}function el(t,e){var n=oe;oe|=2;var r=Fv();(ze!==t||qe!==e)&&(an=null,Tr(t,e));do try{RE();break}catch(i){Ov(t,i)}while(!0);if(Kh(),oe=n,Xa.current=r,Re!==null)throw Error(O(261));return ze=null,qe=0,Me}function RE(){for(;Re!==null;)Uv(Re)}function PE(){for(;Re!==null&&!tw();)Uv(Re)}function Uv(t){var e=$v(t.alternate,t,yt);t.memoizedProps=t.pendingProps,e===null?zv(t):Re=e,od.current=null}function zv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=TE(n,e),n!==null){n.flags&=32767,Re=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Me=6,Re=null;return}}else if(n=xE(n,e,yt),n!==null){Re=n;return}if(e=e.sibling,e!==null){Re=e;return}Re=e=t}while(e!==null);Me===0&&(Me=5)}function mr(t,e,n){var r=ae,i=Rt.transition;try{Rt.transition=null,ae=1,NE(t,e,n,r)}finally{Rt.transition=i,ae=r}return null}function NE(t,e,n,r){do ci();while(Vn!==null);if(oe&6)throw Error(O(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(O(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(hw(t,s),t===ze&&(Re=ze=null,qe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ea||(ea=!0,qv(Ma,function(){return ci(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Rt.transition,Rt.transition=null;var o=ae;ae=1;var l=oe;oe|=4,od.current=null,IE(t,n),Mv(n,t),Xw(kc),La=!!Ic,kc=Ic=null,t.current=n,kE(n),nw(),oe=l,ae=o,Rt.transition=s}else t.current=n;if(ea&&(ea=!1,Vn=t,Za=i),s=t.pendingLanes,s===0&&(zn=null),sw(n.stateNode),mt(t,ke()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ja)throw Ja=!1,t=Hc,Hc=null,t;return Za&1&&t.tag!==0&&ci(),s=t.pendingLanes,s&1?t===Kc?js++:(js=0,Kc=t):js=0,sr(),null}function ci(){if(Vn!==null){var t=Ey(Za),e=Rt.transition,n=ae;try{if(Rt.transition=null,ae=16>t?16:t,Vn===null)var r=!1;else{if(t=Vn,Vn=null,Za=0,oe&6)throw Error(O(331));var i=oe;for(oe|=4,q=t.current;q!==null;){var s=q,o=s.child;if(q.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(q=h;q!==null;){var p=q;switch(p.tag){case 0:case 11:case 15:bs(8,p,s)}var m=p.child;if(m!==null)m.return=p,q=m;else for(;q!==null;){p=q;var g=p.sibling,k=p.return;if(Vv(p),p===h){q=null;break}if(g!==null){g.return=k,q=g;break}q=k}}}var A=s.alternate;if(A!==null){var R=A.child;if(R!==null){A.child=null;do{var N=R.sibling;R.sibling=null,R=N}while(R!==null)}}q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,q=o;else e:for(;q!==null;){if(s=q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:bs(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,q=E;break e}q=s.return}}var v=t.current;for(q=v;q!==null;){o=q;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,q=x;else e:for(o=v;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Il(9,l)}}catch(M){Te(l,l.return,M)}if(l===o){q=null;break e}var P=l.sibling;if(P!==null){P.return=l.return,q=P;break e}q=l.return}}if(oe=i,sr(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(yl,t)}catch{}r=!0}return r}finally{ae=n,Rt.transition=e}}return!1}function rm(t,e,n){e=xi(n,e),e=Ev(t,e,1),t=Un(t,e,1),e=at(),t!==null&&(vo(t,1,e),mt(t,e))}function Te(t,e,n){if(t.tag===3)rm(t,t,n);else for(;e!==null;){if(e.tag===3){rm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zn===null||!zn.has(r))){t=xi(n,t),t=xv(e,t,1),e=Un(e,t,1),t=at(),e!==null&&(vo(e,1,t),mt(e,t));break}}e=e.return}}function VE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=at(),t.pingedLanes|=t.suspendedLanes&n,ze===t&&(qe&n)===n&&(Me===4||Me===3&&(qe&130023424)===qe&&500>ke()-ld?Tr(t,0):ad|=n),mt(t,e)}function Bv(t,e){e===0&&(t.mode&1?(e=qo,qo<<=1,!(qo&130023424)&&(qo=4194304)):e=1);var n=at();t=pn(t,e),t!==null&&(vo(t,e,n),mt(t,n))}function DE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Bv(t,n)}function bE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(O(314))}r!==null&&r.delete(e),Bv(t,n)}var $v;$v=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ft.current)dt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return dt=!1,EE(t,e,n);dt=!!(t.flags&131072)}else dt=!1,me&&e.flags&1048576&&Ky(e,qa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;xa(t,e),t=e.pendingProps;var i=vi(e,tt.current);ui(e,n),i=td(null,e,r,t,i,n);var s=nd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pt(r)?(s=!0,Ba(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Yh(e),i.updater=Sl,e.stateNode=i,i._reactInternals=e,Mc(e,r,t,n),e=Oc(null,e,r,!0,s,n)):(e.tag=0,me&&s&&$h(e),st(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(xa(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=jE(r),t=Lt(r,t),i){case 0:e=Lc(null,e,r,t,n);break e;case 1:e=Kp(null,e,r,t,n);break e;case 11:e=Wp(null,e,r,t,n);break e;case 14:e=Hp(null,e,r,Lt(r.type,t),n);break e}throw Error(O(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lt(r,i),Lc(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lt(r,i),Kp(t,e,r,i,n);case 3:e:{if(kv(e),t===null)throw Error(O(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Zy(t,e),Ka(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=xi(Error(O(423)),e),e=Qp(t,e,r,n,i);break e}else if(r!==i){i=xi(Error(O(424)),e),e=Qp(t,e,r,n,i);break e}else for(vt=Fn(e.stateNode.containerInfo.firstChild),_t=e,me=!0,Ft=null,n=Xy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_i(),r===i){e=mn(t,e,n);break e}st(t,e,r,n)}e=e.child}return e;case 5:return ev(e),t===null&&Vc(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Cc(r,i)?o=null:s!==null&&Cc(r,s)&&(e.flags|=32),Iv(t,e),st(t,e,o,n),e.child;case 6:return t===null&&Vc(e),null;case 13:return Cv(t,e,n);case 4:return Xh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=wi(e,null,r,n):st(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lt(r,i),Wp(t,e,r,i,n);case 7:return st(t,e,e.pendingProps,n),e.child;case 8:return st(t,e,e.pendingProps.children,n),e.child;case 12:return st(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ce(Wa,r._currentValue),r._currentValue=o,s!==null)if(Bt(s.value,o)){if(s.children===i.children&&!ft.current){e=mn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=hn(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?u.next=u:(u.next=p.next,p.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Dc(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(O(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Dc(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}st(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ui(e,n),i=Pt(i),r=r(i),e.flags|=1,st(t,e,r,n),e.child;case 14:return r=e.type,i=Lt(r,e.pendingProps),i=Lt(r.type,i),Hp(t,e,r,i,n);case 15:return Tv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lt(r,i),xa(t,e),e.tag=1,pt(r)?(t=!0,Ba(e)):t=!1,ui(e,n),wv(e,r,i),Mc(e,r,i,n),Oc(null,e,r,!0,t,n);case 19:return Av(t,e,n);case 22:return Sv(t,e,n)}throw Error(O(156,e.tag))};function qv(t,e){return yy(t,e)}function ME(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function At(t,e,n,r){return new ME(t,e,n,r)}function dd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function jE(t){if(typeof t=="function")return dd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Nh)return 11;if(t===Vh)return 14}return 2}function $n(t,e){var n=t.alternate;return n===null?(n=At(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ia(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")dd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Qr:return Sr(n.children,i,s,e);case Ph:o=8,i|=8;break;case sc:return t=At(12,n,e,i|2),t.elementType=sc,t.lanes=s,t;case oc:return t=At(13,n,e,i),t.elementType=oc,t.lanes=s,t;case ac:return t=At(19,n,e,i),t.elementType=ac,t.lanes=s,t;case ey:return Cl(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Jg:o=10;break e;case Zg:o=9;break e;case Nh:o=11;break e;case Vh:o=14;break e;case Cn:o=16,r=null;break e}throw Error(O(130,t==null?t:typeof t,""))}return e=At(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Sr(t,e,n,r){return t=At(7,t,r,e),t.lanes=n,t}function Cl(t,e,n,r){return t=At(22,t,r,e),t.elementType=ey,t.lanes=n,t.stateNode={isHidden:!1},t}function Fu(t,e,n){return t=At(6,t,null,e),t.lanes=n,t}function Uu(t,e,n){return e=At(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function LE(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wu(0),this.expirationTimes=wu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function fd(t,e,n,r,i,s,o,l,u){return t=new LE(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=At(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yh(s),t}function OE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Kr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Wv(t){if(!t)return Yn;t=t._reactInternals;e:{if(br(t)!==t||t.tag!==1)throw Error(O(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(pt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(O(171))}if(t.tag===1){var n=t.type;if(pt(n))return Wy(t,n,e)}return e}function Hv(t,e,n,r,i,s,o,l,u){return t=fd(n,r,!0,t,i,s,o,l,u),t.context=Wv(null),n=t.current,r=at(),i=Bn(n),s=hn(r,i),s.callback=e??null,Un(n,s,i),t.current.lanes=i,vo(t,i,r),mt(t,r),t}function Al(t,e,n,r){var i=e.current,s=at(),o=Bn(i);return n=Wv(n),e.context===null?e.context=n:e.pendingContext=n,e=hn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Un(i,e,o),t!==null&&(zt(t,i,o,s),_a(t,i,o)),o}function tl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function im(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function pd(t,e){im(t,e),(t=t.alternate)&&im(t,e)}function FE(){return null}var Kv=typeof reportError=="function"?reportError:function(t){console.error(t)};function md(t){this._internalRoot=t}Rl.prototype.render=md.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));Al(t,e,null,null)};Rl.prototype.unmount=md.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Nr(function(){Al(null,t,null,null)}),e[fn]=null}};function Rl(t){this._internalRoot=t}Rl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Sy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Rn.length&&e!==0&&e<Rn[n].priority;n++);Rn.splice(n,0,t),n===0&&ky(t)}};function gd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function sm(){}function UE(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=tl(o);s.call(h)}}var o=Hv(e,r,t,0,null,!1,!1,"",sm);return t._reactRootContainer=o,t[fn]=o.current,Xs(t.nodeType===8?t.parentNode:t),Nr(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=tl(u);l.call(h)}}var u=fd(t,0,!1,null,null,!1,!1,"",sm);return t._reactRootContainer=u,t[fn]=u.current,Xs(t.nodeType===8?t.parentNode:t),Nr(function(){Al(e,u,n,r)}),u}function Nl(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=tl(o);l.call(u)}}Al(e,o,t,i)}else o=UE(n,e,t,i,r);return tl(o)}xy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Es(e.pendingLanes);n!==0&&(Mh(e,n|1),mt(e,ke()),!(oe&6)&&(Ti=ke()+500,sr()))}break;case 13:Nr(function(){var r=pn(t,1);if(r!==null){var i=at();zt(r,t,1,i)}}),pd(t,1)}};jh=function(t){if(t.tag===13){var e=pn(t,134217728);if(e!==null){var n=at();zt(e,t,134217728,n)}pd(t,134217728)}};Ty=function(t){if(t.tag===13){var e=Bn(t),n=pn(t,e);if(n!==null){var r=at();zt(n,t,e,r)}pd(t,e)}};Sy=function(){return ae};Iy=function(t,e){var n=ae;try{return ae=t,e()}finally{ae=n}};yc=function(t,e,n){switch(e){case"input":if(cc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=El(r);if(!i)throw Error(O(90));ny(r),cc(r,i)}}}break;case"textarea":iy(t,n);break;case"select":e=n.value,e!=null&&si(t,!!n.multiple,e,!1)}};hy=ud;dy=Nr;var zE={usingClientEntryPoint:!1,Events:[wo,Jr,El,uy,cy,ud]},ds={findFiberByHostInstance:_r,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},BE={bundleType:ds.bundleType,version:ds.version,rendererPackageName:ds.rendererPackageName,rendererConfig:ds.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=my(t),t===null?null:t.stateNode},findFiberByHostInstance:ds.findFiberByHostInstance||FE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ta=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ta.isDisabled&&ta.supportsFiber)try{yl=ta.inject(BE),en=ta}catch{}}Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zE;Et.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gd(e))throw Error(O(200));return OE(t,e,null,n)};Et.createRoot=function(t,e){if(!gd(t))throw Error(O(299));var n=!1,r="",i=Kv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=fd(t,1,!1,null,null,n,!1,r,i),t[fn]=e.current,Xs(t.nodeType===8?t.parentNode:t),new md(e)};Et.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=my(e),t=t===null?null:t.stateNode,t};Et.flushSync=function(t){return Nr(t)};Et.hydrate=function(t,e,n){if(!Pl(e))throw Error(O(200));return Nl(null,t,e,!0,n)};Et.hydrateRoot=function(t,e,n){if(!gd(t))throw Error(O(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Kv;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Hv(e,null,t,1,n??null,i,!1,s,o),t[fn]=e.current,Xs(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Rl(e)};Et.render=function(t,e,n){if(!Pl(e))throw Error(O(200));return Nl(null,t,e,!1,n)};Et.unmountComponentAtNode=function(t){if(!Pl(t))throw Error(O(40));return t._reactRootContainer?(Nr(function(){Nl(null,null,t,!1,function(){t._reactRootContainer=null,t[fn]=null})}),!0):!1};Et.unstable_batchedUpdates=ud;Et.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Pl(n))throw Error(O(200));if(t==null||t._reactInternals===void 0)throw Error(O(38));return Nl(t,e,n,!1,r)};Et.version="18.3.1-next-f1338f8080-20240426";function Qv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qv)}catch(t){console.error(t)}}Qv(),Qg.exports=Et;var $E=Qg.exports,om=$E;rc.createRoot=om.createRoot,rc.hydrateRoot=om.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function oo(){return oo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oo.apply(this,arguments)}var Dn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Dn||(Dn={}));const am="popstate";function qE(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return Yc("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:nl(i)}return HE(e,n,null,t)}function Ve(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Gv(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function WE(){return Math.random().toString(36).substr(2,8)}function lm(t,e){return{usr:t.state,key:t.key,idx:e}}function Yc(t,e,n,r){return n===void 0&&(n=null),oo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Mi(e):e,{state:n,key:e&&e.key||r||WE()})}function nl(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Mi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function HE(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=Dn.Pop,u=null,h=p();h==null&&(h=0,o.replaceState(oo({},o.state,{idx:h}),""));function p(){return(o.state||{idx:null}).idx}function m(){l=Dn.Pop;let N=p(),E=N==null?null:N-h;h=N,u&&u({action:l,location:R.location,delta:E})}function g(N,E){l=Dn.Push;let v=Yc(R.location,N,E);h=p()+1;let x=lm(v,h),P=R.createHref(v);try{o.pushState(x,"",P)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(P)}s&&u&&u({action:l,location:R.location,delta:1})}function k(N,E){l=Dn.Replace;let v=Yc(R.location,N,E);h=p();let x=lm(v,h),P=R.createHref(v);o.replaceState(x,"",P),s&&u&&u({action:l,location:R.location,delta:0})}function A(N){let E=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof N=="string"?N:nl(N);return v=v.replace(/ $/,"%20"),Ve(E,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,E)}let R={get action(){return l},get location(){return t(i,o)},listen(N){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(am,m),u=N,()=>{i.removeEventListener(am,m),u=null}},createHref(N){return e(i,N)},createURL:A,encodeLocation(N){let E=A(N);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:g,replace:k,go(N){return o.go(N)}};return R}var um;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(um||(um={}));function KE(t,e,n){return n===void 0&&(n="/"),QE(t,e,n)}function QE(t,e,n,r){let i=typeof e=="string"?Mi(e):e,s=yd(i.pathname||"/",n);if(s==null)return null;let o=Yv(t);GE(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let h=ax(s);l=ix(o[u],h)}return l}function Yv(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Ve(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let h=qn([r,u.relativePath]),p=n.concat(u);s.children&&s.children.length>0&&(Ve(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),Yv(s.children,e,p,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:nx(h,s.index),routesMeta:p})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let u of Xv(s.path))i(s,o,u)}),e}function Xv(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Xv(r.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function GE(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:rx(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const YE=/^:[\w-]+$/,XE=3,JE=2,ZE=1,ex=10,tx=-2,cm=t=>t==="*";function nx(t,e){let n=t.split("/"),r=n.length;return n.some(cm)&&(r+=tx),e&&(r+=JE),n.filter(i=>!cm(i)).reduce((i,s)=>i+(YE.test(s)?XE:s===""?ZE:ex),r)}function rx(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function ix(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],h=l===r.length-1,p=s==="/"?e:e.slice(s.length)||"/",m=sx({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},p),g=u.route;if(!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:qn([s,m.pathname]),pathnameBase:hx(qn([s,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(s=qn([s,m.pathnameBase]))}return o}function sx(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=ox(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((h,p,m)=>{let{paramName:g,isOptional:k}=p;if(g==="*"){let R=l[m]||"";o=s.slice(0,s.length-R.length).replace(/(.)\/+$/,"$1")}const A=l[m];return k&&!A?h[g]=void 0:h[g]=(A||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:o,pattern:t}}function ox(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Gv(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function ax(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Gv(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function yd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function lx(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Mi(t):t;return{pathname:n?n.startsWith("/")?n:ux(n,e):e,search:dx(r),hash:fx(i)}}function ux(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function zu(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function cx(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Jv(t,e){let n=cx(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Zv(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Mi(t):(i=oo({},t),Ve(!i.pathname||!i.pathname.includes("?"),zu("?","pathname","search",i)),Ve(!i.pathname||!i.pathname.includes("#"),zu("#","pathname","hash",i)),Ve(!i.search||!i.search.includes("#"),zu("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;i.pathname=g.join("/")}l=m>=0?e[m]:"/"}let u=lx(i,l),h=o&&o!=="/"&&o.endsWith("/"),p=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||p)&&(u.pathname+="/"),u}const qn=t=>t.join("/").replace(/\/\/+/g,"/"),hx=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),dx=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,fx=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function px(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const e0=["post","put","patch","delete"];new Set(e0);const mx=["get",...e0];new Set(mx);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ao(){return ao=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ao.apply(this,arguments)}const vd=W.createContext(null),gx=W.createContext(null),Mr=W.createContext(null),Vl=W.createContext(null),jr=W.createContext({outlet:null,matches:[],isDataRoute:!1}),t0=W.createContext(null);function yx(t,e){let{relative:n}=e===void 0?{}:e;xo()||Ve(!1);let{basename:r,navigator:i}=W.useContext(Mr),{hash:s,pathname:o,search:l}=r0(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:qn([r,o])),i.createHref({pathname:u,search:l,hash:s})}function xo(){return W.useContext(Vl)!=null}function ji(){return xo()||Ve(!1),W.useContext(Vl).location}function n0(t){W.useContext(Mr).static||W.useLayoutEffect(t)}function vx(){let{isDataRoute:t}=W.useContext(jr);return t?Nx():_x()}function _x(){xo()||Ve(!1);let t=W.useContext(vd),{basename:e,future:n,navigator:r}=W.useContext(Mr),{matches:i}=W.useContext(jr),{pathname:s}=ji(),o=JSON.stringify(Jv(i,n.v7_relativeSplatPath)),l=W.useRef(!1);return n0(()=>{l.current=!0}),W.useCallback(function(h,p){if(p===void 0&&(p={}),!l.current)return;if(typeof h=="number"){r.go(h);return}let m=Zv(h,JSON.parse(o),s,p.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:qn([e,m.pathname])),(p.replace?r.replace:r.push)(m,p.state,p)},[e,r,o,s,t])}function r0(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=W.useContext(Mr),{matches:i}=W.useContext(jr),{pathname:s}=ji(),o=JSON.stringify(Jv(i,r.v7_relativeSplatPath));return W.useMemo(()=>Zv(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function wx(t,e){return Ex(t,e)}function Ex(t,e,n,r){xo()||Ve(!1);let{navigator:i}=W.useContext(Mr),{matches:s}=W.useContext(jr),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let h=ji(),p;if(e){var m;let N=typeof e=="string"?Mi(e):e;u==="/"||(m=N.pathname)!=null&&m.startsWith(u)||Ve(!1),p=N}else p=h;let g=p.pathname||"/",k=g;if(u!=="/"){let N=u.replace(/^\//,"").split("/");k="/"+g.replace(/^\//,"").split("/").slice(N.length).join("/")}let A=KE(t,{pathname:k}),R=kx(A&&A.map(N=>Object.assign({},N,{params:Object.assign({},l,N.params),pathname:qn([u,i.encodeLocation?i.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?u:qn([u,i.encodeLocation?i.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),s,n,r);return e&&R?W.createElement(Vl.Provider,{value:{location:ao({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Dn.Pop}},R):R}function xx(){let t=Px(),e=px(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),n?W.createElement("pre",{style:i},n):null,null)}const Tx=W.createElement(xx,null);class Sx extends W.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?W.createElement(jr.Provider,{value:this.props.routeContext},W.createElement(t0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ix(t){let{routeContext:e,match:n,children:r}=t,i=W.useContext(vd);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),W.createElement(jr.Provider,{value:e},r)}function kx(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let p=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);p>=0||Ve(!1),o=o.slice(0,Math.min(o.length,p+1))}let u=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=p),m.route.id){let{loaderData:g,errors:k}=n,A=m.route.loader&&g[m.route.id]===void 0&&(!k||k[m.route.id]===void 0);if(m.route.lazy||A){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((p,m,g)=>{let k,A=!1,R=null,N=null;n&&(k=l&&m.route.id?l[m.route.id]:void 0,R=m.route.errorElement||Tx,u&&(h<0&&g===0?(Vx("route-fallback"),A=!0,N=null):h===g&&(A=!0,N=m.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,g+1)),v=()=>{let x;return k?x=R:A?x=N:m.route.Component?x=W.createElement(m.route.Component,null):m.route.element?x=m.route.element:x=p,W.createElement(Ix,{match:m,routeContext:{outlet:p,matches:E,isDataRoute:n!=null},children:x})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?W.createElement(Sx,{location:n.location,revalidation:n.revalidation,component:R,error:k,children:v(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):v()},null)}var i0=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(i0||{}),s0=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(s0||{});function Cx(t){let e=W.useContext(vd);return e||Ve(!1),e}function Ax(t){let e=W.useContext(gx);return e||Ve(!1),e}function Rx(t){let e=W.useContext(jr);return e||Ve(!1),e}function o0(t){let e=Rx(),n=e.matches[e.matches.length-1];return n.route.id||Ve(!1),n.route.id}function Px(){var t;let e=W.useContext(t0),n=Ax(),r=o0();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Nx(){let{router:t}=Cx(i0.UseNavigateStable),e=o0(s0.UseNavigateStable),n=W.useRef(!1);return n0(()=>{n.current=!0}),W.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ao({fromRouteId:e},s)))},[t,e])}const hm={};function Vx(t,e,n){hm[t]||(hm[t]=!0)}function Dx(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Ts(t){Ve(!1)}function bx(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Dn.Pop,navigator:s,static:o=!1,future:l}=t;xo()&&Ve(!1);let u=e.replace(/^\/*/,"/"),h=W.useMemo(()=>({basename:u,navigator:s,static:o,future:ao({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=Mi(r));let{pathname:p="/",search:m="",hash:g="",state:k=null,key:A="default"}=r,R=W.useMemo(()=>{let N=yd(p,u);return N==null?null:{location:{pathname:N,search:m,hash:g,state:k,key:A},navigationType:i}},[u,p,m,g,k,A,i]);return R==null?null:W.createElement(Mr.Provider,{value:h},W.createElement(Vl.Provider,{children:n,value:R}))}function Mx(t){let{children:e,location:n}=t;return wx(Xc(e),n)}new Promise(()=>{});function Xc(t,e){e===void 0&&(e=[]);let n=[];return W.Children.forEach(t,(r,i)=>{if(!W.isValidElement(r))return;let s=[...e,i];if(r.type===W.Fragment){n.push.apply(n,Xc(r.props.children,s));return}r.type!==Ts&&Ve(!1),!r.props.index||!r.props.children||Ve(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Xc(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jc(){return Jc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jc.apply(this,arguments)}function jx(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Lx(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Ox(t,e){return t.button===0&&(!e||e==="_self")&&!Lx(t)}const Fx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ux="6";try{window.__reactRouterVersion=Ux}catch{}const zx="startTransition",dm=V1[zx];function Bx(t){let{basename:e,children:n,future:r,window:i}=t,s=W.useRef();s.current==null&&(s.current=qE({window:i,v5Compat:!0}));let o=s.current,[l,u]=W.useState({action:o.action,location:o.location}),{v7_startTransition:h}=r||{},p=W.useCallback(m=>{h&&dm?dm(()=>u(m)):u(m)},[u,h]);return W.useLayoutEffect(()=>o.listen(p),[o,p]),W.useEffect(()=>Dx(r),[r]),W.createElement(bx,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const $x=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_d=W.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:l,target:u,to:h,preventScrollReset:p,viewTransition:m}=e,g=jx(e,Fx),{basename:k}=W.useContext(Mr),A,R=!1;if(typeof h=="string"&&qx.test(h)&&(A=h,$x))try{let x=new URL(window.location.href),P=h.startsWith("//")?new URL(x.protocol+h):new URL(h),M=yd(P.pathname,k);P.origin===x.origin&&M!=null?h=M+P.search+P.hash:R=!0}catch{}let N=yx(h,{relative:i}),E=Wx(h,{replace:o,state:l,target:u,preventScrollReset:p,relative:i,viewTransition:m});function v(x){r&&r(x),x.defaultPrevented||E(x)}return W.createElement("a",Jc({},g,{href:A||N,onClick:R||s?r:v,ref:n,target:u}))});var fm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(fm||(fm={}));var pm;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(pm||(pm={}));function Wx(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,u=vx(),h=ji(),p=r0(t,{relative:o});return W.useCallback(m=>{if(Ox(m,n)){m.preventDefault();let g=r!==void 0?r:nl(h)===nl(p);u(t,{replace:g,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[h,u,p,r,i,n,t,s,o,l])}function lo({name:t,...e}){switch(t){case"dashboard":return f.jsx("svg",{viewBox:"0 0 24 24",fill:"none",...e,children:f.jsx("path",{d:"M3 3h8v8H3V3zm10 0h8v5h-8V3zM3 13h8v8H3v-8zm10 7v-8h8v8h-8z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})});case"gauge":return f.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",...e,children:[f.jsx("path",{d:"M5 20a9 9 0 1114 0",stroke:"currentColor",strokeWidth:"1.5"}),f.jsx("path",{d:"M12 13l4-4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]});case"cog":return f.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",...e,children:[f.jsx("path",{d:"M12 8a4 4 0 100 8 4 4 0 000-8z",stroke:"currentColor",strokeWidth:"1.5"}),f.jsx("path",{d:"M3 12h3M18 12h3M12 3v3M12 18v3M5 5l2 2M17 17l2 2M19 5l-2 2M7 17l-2 2",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]});case"info":return f.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",...e,children:[f.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:"currentColor",strokeWidth:"1.5"}),f.jsx("path",{d:"M12 8.5v.5M12 11v5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]});case"search":return f.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",...e,children:[f.jsx("circle",{cx:"11",cy:"11",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),f.jsx("path",{d:"M20 20l-3.5-3.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]});case"plus":return f.jsx("svg",{viewBox:"0 0 24 24",fill:"none",...e,children:f.jsx("path",{d:"M12 5v14M5 12h14",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})});case"chev-right":return f.jsx("svg",{viewBox:"0 0 24 24",fill:"none",...e,children:f.jsx("path",{d:"M9 6l6 6-6 6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})});case"more":return f.jsxs("svg",{viewBox:"0 0 24 24",fill:"currentColor",...e,children:[f.jsx("circle",{cx:"5",cy:"12",r:"1.5"}),f.jsx("circle",{cx:"12",cy:"12",r:"1.5"}),f.jsx("circle",{cx:"19",cy:"12",r:"1.5"})]});case"dot":return f.jsx("svg",{viewBox:"0 0 8 8",fill:"currentColor",...e,children:f.jsx("circle",{cx:"4",cy:"4",r:"4"})});case"moon":return f.jsx("svg",{viewBox:"0 0 24 24",fill:"none",...e,children:f.jsx("path",{d:"M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z",stroke:"currentColor",strokeWidth:"1.5"})});case"sun":return f.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",...e,children:[f.jsx("circle",{cx:"12",cy:"12",r:"4",stroke:"currentColor",strokeWidth:"1.5"}),f.jsx("path",{d:"M12 2v3m0 14v3M2 12h3m14 0h3M5 5l2 2m10 10l2 2m0-14l-2 2M7 17l-2 2",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]});default:return null}}function mm(){const t=()=>{var p;const h=localStorage.getItem("theme");return h==="dark"?!0:h==="light"?!1:((p=window.matchMedia)==null?void 0:p.call(window,"(prefers-color-scheme: dark)").matches)??!1},[e,n]=J.useState(t),[r,i]=J.useState(!1),[s,o]=J.useState(null);J.useEffect(()=>{const h=document.documentElement;e?(h.classList.add("dark"),localStorage.setItem("theme","dark")):(h.classList.remove("dark"),localStorage.setItem("theme","light"))},[e]);const l=h=>{e!==h&&(n(h),i(!0),o(h?"moon":"sun"),window.setTimeout(()=>i(!1),600),window.setTimeout(()=>o(null),380))},u=({active:h,label:p,onClick:m,children:g})=>f.jsxs("button",{type:"button","aria-label":p,"aria-pressed":h,onClick:m,className:["toggle-btn grid place-items-center transition-colors","w-9 h-9 md:w-8 md:h-8 rounded-full",h?"bg-[hsl(var(--muted))] dark:bg-white/12 shadow-inner":"hover:bg-black/[0.05] dark:hover:bg-white/[0.08]"].join(" "),children:[f.jsx("span",{className:"sr-only",children:p}),g]});return f.jsxs("div",{className:["toggle-capsule flex md:flex-col items-center gap-1 md:gap-1.5","md:w-12 md:py-1.5 md:rounded-2xl w-auto px-1.5 py-1 rounded-full","bg-[hsl(var(--card))] backdrop-blur","border border-[hsl(var(--border))] dark:border-white/12",r?"toggle-sweep":""].join(" "),tabIndex:-1,children:[f.jsx(u,{active:e,label:"Dark mode",onClick:()=>l(!0),children:f.jsx(lo,{name:"moon",className:["w-4 h-4 transition-colors duration-300",e?"text-gray-100 drop-shadow-[0_0_6px_rgba(255,255,255,0.8)]":"text-gray-600",s==="moon"?"icon-pop":""].join(" ")})}),f.jsx(u,{active:!e,label:"Light mode",onClick:()=>l(!1),children:f.jsx(lo,{name:"sun",className:["w-4 h-4 transition-colors duration-300",e?"text-gray-400":"text-yellow-500 drop-shadow-[0_0_8px_rgba(255,200,0,0.7)]",s==="sun"?"icon-pop":""].join(" ")})})]})}const gm="/terratrak/assets/logo-BOTr2cCN.png",Hx=[{key:"overview",label:"Dashboard",icon:"dashboard",to:"/"},{key:"sensors",label:"Sensors",icon:"gauge",to:"/sensors"},{key:"settings",label:"Settings",icon:"cog",to:"/settings"},{key:"about",label:"About",icon:"info",to:"/about"}];function na({to:t,label:e,icon:n,active:r}){return f.jsx(_d,{to:t,title:e,"aria-label":e,"aria-current":r?"page":void 0,className:["relative w-9 h-9 rounded-full grid place-items-center","bg-[hsl(var(--card))]/65 dark:bg-white/5 backdrop-blur","ring-1 ring-[hsl(var(--border))]/70 dark:ring-white/10","transition-colors duration-150 hover:bg-[hsl(var(--muted))]/70 dark:hover:bg-white/[0.08]",r?"ring-emerald-500/50":""].join(" "),children:f.jsx(lo,{name:n,className:["w-4 h-4",r?"text-emerald-400":"text-gray-600 dark:text-gray-300"].join(" ")})})}function Kx(){const{pathname:t}=ji(),e=t.startsWith("/sensors")?"sensors":t.startsWith("/settings")?"settings":t.startsWith("/about")?"about":"overview";return f.jsxs(f.Fragment,{children:[f.jsxs("aside",{className:`
          hidden md:flex flex-col w-64 shrink-0
          px-4 py-6 bg-[hsl(var(--bg))]
        `,"aria-label":"Sidebar",children:[f.jsx("div",{className:"mb-7 flex items-center pl-1",children:f.jsx("img",{src:gm,alt:"TerraTrak",className:"w-8 h-8 object-contain"})}),f.jsxs("nav",{className:"flex flex-col gap-2",children:[Hx.map(n=>{const r=n.key===e;return f.jsxs(_d,{to:n.to,className:["sidebar-item group focus:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400/40",r?"bg-[hsl(var(--card))] border border-[hsl(var(--border))] shadow-sm":"hover:bg-[hsl(var(--muted))] dark:hover:bg-white/[0.06]"].join(" "),"aria-current":r?"page":void 0,children:[f.jsx(lo,{name:n.icon,className:["w-4 h-4 shrink-0 transition-transform duration-150",r?"scale-[1.05]":"group-hover:scale-105"].join(" ")}),f.jsx("span",{className:r?"font-semibold":"font-medium",children:n.label})]},n.key)}),f.jsx("div",{className:"mt-2 mb-1 h-px bg-[hsl(var(--border))] dark:bg-white/10"}),f.jsx("div",{className:"pl-1 pt-1",children:f.jsx(mm,{})})]})]}),f.jsxs("aside",{className:`
          md:hidden sticky top-0 h-[100dvh] w-12 shrink-0 z-40
          bg-[hsl(var(--bg))]/92 backdrop-blur
          border-r border-[hsl(var(--border))] dark:border-white/10
          flex flex-col items-center justify-between py-2
        `,"aria-label":"Mobile sidebar",children:[f.jsxs("div",{className:"flex flex-col items-center gap-2",children:[f.jsx("img",{src:gm,alt:"TerraTrak",className:"w-7 h-7 object-contain"}),f.jsxs("nav",{className:"mt-1 flex flex-col items-center gap-1.5",children:[f.jsx(na,{to:"/",label:"Dashboard",icon:"dashboard",active:e==="overview"}),f.jsx(na,{to:"/sensors",label:"Sensors",icon:"gauge",active:e==="sensors"}),f.jsx(na,{to:"/settings",label:"Settings",icon:"cog",active:e==="settings"}),f.jsx(na,{to:"/about",label:"About",icon:"info",active:e==="about"})]})]}),f.jsx("div",{className:"pb-1",children:f.jsx("div",{className:"scale-90 origin-bottom",children:f.jsx(mm,{})})})]})]})}function Qx(){const{pathname:t}=ji(),e=Gx(t);J.useEffect(()=>{document.title=`${e}  TerraTrak`},[e]);const n=["Compost today, nourish tomorrow.","Healthy soil starts with steady care.","Balance carbon and nitrogen, and the worms will thrive.","Moist, airy, and patientperfect compost in time.","Feed the bin, and the bin feeds the earth."],r=n[new Date().getDate()%n.length];return f.jsxs("header",{className:"flex items-center justify-between px-4 py-3",children:[f.jsx("h1",{className:"text-xl md:text-2xl font-semibold tracking-tight",children:e}),f.jsxs("div",{className:["hidden sm:flex items-center gap-2 cursor-default","rounded-full px-3 py-1.5","bg-white/30 dark:bg-white/10 backdrop-blur-md","border border-white/40 dark:border-white/20","shadow-[0_4px_12px_rgba(0,0,0,0.08)]","transition-all duration-300 ease-out","hover:scale-105 hover:shadow-[0_6px_18px_rgba(0,0,0,0.15)]","hover:ring-2 hover:ring-emerald-400/40"].join(" "),title:r,"aria-label":"Vermicompost tip",children:[f.jsx(Yx,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400 drop-shadow-sm"}),f.jsx("p",{className:"text-xs md:text-sm text-gray-800 dark:text-gray-100 italic",children:r})]})]})}function Gx(t){if(t==="/"||t.startsWith("/overview"))return"Dashboard";if(t.startsWith("/sensors"))return"Sensors";if(t.startsWith("/settings"))return"Settings";if(t.startsWith("/about"))return"About";const e=t.split("/").filter(Boolean)[0]||"Dashboard";return e.charAt(0).toUpperCase()+e.slice(1)}function Yx(t){return f.jsxs("svg",{viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",...t,children:[f.jsx("path",{d:"M20.5 3.5c-6.5.6-10.6 3.1-13 5.5C5 11.5 4.2 14 5.9 16.1c1.7 2.1 4.8 2.6 7.1.9 2.4-1.8 4.9-6.1 5.5-13z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),f.jsx("path",{d:"M6 18c3-2.2 5.2-4.1 8-8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}const Xx=()=>{};var ym={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Jx=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},l0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,p=s>>2,m=(s&3)<<4|l>>4;let g=(l&15)<<2|h>>6,k=h&63;u||(k=64,o||(g=64)),r.push(n[p],n[m],n[g],n[k])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Jx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||m==null)throw new Zx;const g=s<<2|l>>4;if(r.push(g),h!==64){const k=l<<4&240|h>>2;if(r.push(k),m!==64){const A=h<<6&192|m;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Zx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eT=function(t){const e=a0(t);return l0.encodeByteArray(e,!0)},rl=function(t){return eT(t).replace(/\./g,"")},tT=function(t){try{return l0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT=()=>nT().__FIREBASE_DEFAULTS__,iT=()=>{if(typeof process>"u"||typeof ym>"u")return;const t=ym.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},sT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&tT(t[1]);return e&&JSON.parse(e)},wd=()=>{try{return Xx()||rT()||iT()||sT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},oT=t=>{var e,n;return(n=(e=wd())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},aT=t=>{const e=oT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},u0=()=>{var t;return(t=wd())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function uT(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[rl(JSON.stringify(n)),rl(JSON.stringify(o)),""].join(".")}const Ls={};function hT(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ls))Ls[e]?t.emulator.push(e):t.prod.push(e);return t}function dT(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let vm=!1;function fT(t,e){if(typeof window>"u"||typeof document>"u"||!Ed(window.location.host)||Ls[t]===e||Ls[t]||vm)return;Ls[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",s=hT().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,k){g.setAttribute("width","24"),g.setAttribute("id",k),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{vm=!0,o()},g}function p(g,k){g.setAttribute("id",k),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=dT(r),k=n("text"),A=document.getElementById(k)||document.createElement("span"),R=n("learnmore"),N=document.getElementById(R)||document.createElement("a"),E=n("preprendIcon"),v=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const x=g.element;l(x),p(N,R);const P=h();u(v,E),x.append(v,A,N,P),document.body.appendChild(x)}s?(A.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mT(){var e;const t=(e=wd())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gT(){return!mT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yT(){try{return typeof indexedDB=="object"}catch{return!1}}function vT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="FirebaseError";class Li extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=_T,Object.setPrototypeOf(this,Li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,c0.prototype.create)}}class c0{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?wT(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Li(i,l,r)}}function wT(t,e){return t.replace(ET,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const ET=/\{\$([^}]+)}/g;function il(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(_m(s)&&_m(o)){if(!il(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function _m(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(t){return t&&t._delegate?t._delegate:t}class uo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new lT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ST(e))try{this.getOrInitializeService({instanceIdentifier:gr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=gr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gr){return this.instances.has(e)}getOptions(e=gr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:TT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=gr){return this.component?this.component.multipleInstances?e:gr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TT(t){return t===gr?void 0:t}function ST(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new xT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(re||(re={}));const kT={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},CT=re.INFO,AT={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},RT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=AT[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class h0{constructor(e){this.name=e,this._logLevel=CT,this._logHandler=RT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...e),this._logHandler(this,re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...e),this._logHandler(this,re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,re.INFO,...e),this._logHandler(this,re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,re.WARN,...e),this._logHandler(this,re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...e),this._logHandler(this,re.ERROR,...e)}}const PT=(t,e)=>e.some(n=>t instanceof n);let wm,Em;function NT(){return wm||(wm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VT(){return Em||(Em=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const d0=new WeakMap,Zc=new WeakMap,f0=new WeakMap,Bu=new WeakMap,xd=new WeakMap;function DT(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Wn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&d0.set(n,t)}).catch(()=>{}),xd.set(e,t),e}function bT(t){if(Zc.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Zc.set(t,e)}let eh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Zc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||f0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function MT(t){eh=t(eh)}function jT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call($u(this),e,...n);return f0.set(r,e.sort?e.sort():[e]),Wn(r)}:VT().includes(t)?function(...e){return t.apply($u(this),e),Wn(d0.get(this))}:function(...e){return Wn(t.apply($u(this),e))}}function LT(t){return typeof t=="function"?jT(t):(t instanceof IDBTransaction&&bT(t),PT(t,NT())?new Proxy(t,eh):t)}function Wn(t){if(t instanceof IDBRequest)return DT(t);if(Bu.has(t))return Bu.get(t);const e=LT(t);return e!==t&&(Bu.set(t,e),xd.set(e,t)),e}const $u=t=>xd.get(t);function OT(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Wn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Wn(o.result),u.oldVersion,u.newVersion,Wn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const FT=["get","getKey","getAll","getAllKeys","count"],UT=["put","add","delete","clear"],qu=new Map;function xm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(qu.get(e))return qu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=UT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||FT.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&u.done]))[0]};return qu.set(e,s),s}MT(t=>({...t,get:(e,n,r)=>xm(e,n)||t.get(e,n,r),has:(e,n)=>!!xm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(BT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function BT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const th="@firebase/app",Tm="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn=new h0("@firebase/app"),$T="@firebase/app-compat",qT="@firebase/analytics-compat",WT="@firebase/analytics",HT="@firebase/app-check-compat",KT="@firebase/app-check",QT="@firebase/auth",GT="@firebase/auth-compat",YT="@firebase/database",XT="@firebase/data-connect",JT="@firebase/database-compat",ZT="@firebase/functions",eS="@firebase/functions-compat",tS="@firebase/installations",nS="@firebase/installations-compat",rS="@firebase/messaging",iS="@firebase/messaging-compat",sS="@firebase/performance",oS="@firebase/performance-compat",aS="@firebase/remote-config",lS="@firebase/remote-config-compat",uS="@firebase/storage",cS="@firebase/storage-compat",hS="@firebase/firestore",dS="@firebase/ai",fS="@firebase/firestore-compat",pS="firebase",mS="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh="[DEFAULT]",gS={[th]:"fire-core",[$T]:"fire-core-compat",[WT]:"fire-analytics",[qT]:"fire-analytics-compat",[KT]:"fire-app-check",[HT]:"fire-app-check-compat",[QT]:"fire-auth",[GT]:"fire-auth-compat",[YT]:"fire-rtdb",[XT]:"fire-data-connect",[JT]:"fire-rtdb-compat",[ZT]:"fire-fn",[eS]:"fire-fn-compat",[tS]:"fire-iid",[nS]:"fire-iid-compat",[rS]:"fire-fcm",[iS]:"fire-fcm-compat",[sS]:"fire-perf",[oS]:"fire-perf-compat",[aS]:"fire-rc",[lS]:"fire-rc-compat",[uS]:"fire-gcs",[cS]:"fire-gcs-compat",[hS]:"fire-fst",[fS]:"fire-fst-compat",[dS]:"fire-vertex","fire-js":"fire-js",[pS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl=new Map,yS=new Map,rh=new Map;function Sm(t,e){try{t.container.addComponent(e)}catch(n){gn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ol(t){const e=t.name;if(rh.has(e))return gn.debug(`There were multiple attempts to register component ${e}.`),!1;rh.set(e,t);for(const n of sl.values())Sm(n,t);for(const n of yS.values())Sm(n,t);return!0}function vS(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _S(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hn=new c0("app","Firebase",wS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new uo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=mS;function p0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:nh,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Hn.create("bad-app-name",{appName:String(i)});if(n||(n=u0()),!n)throw Hn.create("no-options");const s=sl.get(i);if(s){if(il(n,s.options)&&il(r,s.config))return s;throw Hn.create("duplicate-app",{appName:i})}const o=new IT(i);for(const u of rh.values())o.addComponent(u);const l=new ES(n,r,o);return sl.set(i,l),l}function TS(t=nh){const e=sl.get(t);if(!e&&t===nh&&u0())return p0();if(!e)throw Hn.create("no-app",{appName:t});return e}function hi(t,e,n){let r=gS[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gn.warn(o.join(" "));return}ol(new uo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="firebase-heartbeat-database",IS=1,co="firebase-heartbeat-store";let Wu=null;function m0(){return Wu||(Wu=OT(SS,IS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(co)}catch(n){console.warn(n)}}}}).catch(t=>{throw Hn.create("idb-open",{originalErrorMessage:t.message})})),Wu}async function kS(t){try{const n=(await m0()).transaction(co),r=await n.objectStore(co).get(g0(t));return await n.done,r}catch(e){if(e instanceof Li)gn.warn(e.message);else{const n=Hn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gn.warn(n.message)}}}async function Im(t,e){try{const r=(await m0()).transaction(co,"readwrite");await r.objectStore(co).put(e,g0(t)),await r.done}catch(n){if(n instanceof Li)gn.warn(n.message);else{const r=Hn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});gn.warn(r.message)}}}function g0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS=1024,AS=30;class RS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new NS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=km();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>AS){const o=VS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){gn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=km(),{heartbeatsToSend:r,unsentEntries:i}=PS(this._heartbeatsCache.heartbeats),s=rl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return gn.warn(n),""}}}function km(){return new Date().toISOString().substring(0,10)}function PS(t,e=CS){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Cm(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Cm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class NS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yT()?vT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await kS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Im(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Im(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Cm(t){return rl(JSON.stringify({version:2,heartbeats:t})).length}function VS(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(t){ol(new uo("platform-logger",e=>new zT(e),"PRIVATE")),ol(new uo("heartbeat",e=>new RS(e),"PRIVATE")),hi(th,Tm,t),hi(th,Tm,"esm2020"),hi("fire-js","")}DS("");var Am=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Kn,y0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,_){function T(){}T.prototype=_.prototype,w.F=_.prototype,w.prototype=new T,w.prototype.constructor=w,w.D=function(I,C,V){for(var S=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)S[ge-2]=arguments[ge];return _.prototype[C].apply(I,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,_,T){T||(T=0);const I=Array(16);if(typeof _=="string")for(var C=0;C<16;++C)I[C]=_.charCodeAt(T++)|_.charCodeAt(T++)<<8|_.charCodeAt(T++)<<16|_.charCodeAt(T++)<<24;else for(C=0;C<16;++C)I[C]=_[T++]|_[T++]<<8|_[T++]<<16|_[T++]<<24;_=w.g[0],T=w.g[1],C=w.g[2];let V=w.g[3],S;S=_+(V^T&(C^V))+I[0]+3614090360&4294967295,_=T+(S<<7&4294967295|S>>>25),S=V+(C^_&(T^C))+I[1]+3905402710&4294967295,V=_+(S<<12&4294967295|S>>>20),S=C+(T^V&(_^T))+I[2]+606105819&4294967295,C=V+(S<<17&4294967295|S>>>15),S=T+(_^C&(V^_))+I[3]+3250441966&4294967295,T=C+(S<<22&4294967295|S>>>10),S=_+(V^T&(C^V))+I[4]+4118548399&4294967295,_=T+(S<<7&4294967295|S>>>25),S=V+(C^_&(T^C))+I[5]+1200080426&4294967295,V=_+(S<<12&4294967295|S>>>20),S=C+(T^V&(_^T))+I[6]+2821735955&4294967295,C=V+(S<<17&4294967295|S>>>15),S=T+(_^C&(V^_))+I[7]+4249261313&4294967295,T=C+(S<<22&4294967295|S>>>10),S=_+(V^T&(C^V))+I[8]+1770035416&4294967295,_=T+(S<<7&4294967295|S>>>25),S=V+(C^_&(T^C))+I[9]+2336552879&4294967295,V=_+(S<<12&4294967295|S>>>20),S=C+(T^V&(_^T))+I[10]+4294925233&4294967295,C=V+(S<<17&4294967295|S>>>15),S=T+(_^C&(V^_))+I[11]+2304563134&4294967295,T=C+(S<<22&4294967295|S>>>10),S=_+(V^T&(C^V))+I[12]+1804603682&4294967295,_=T+(S<<7&4294967295|S>>>25),S=V+(C^_&(T^C))+I[13]+4254626195&4294967295,V=_+(S<<12&4294967295|S>>>20),S=C+(T^V&(_^T))+I[14]+2792965006&4294967295,C=V+(S<<17&4294967295|S>>>15),S=T+(_^C&(V^_))+I[15]+1236535329&4294967295,T=C+(S<<22&4294967295|S>>>10),S=_+(C^V&(T^C))+I[1]+4129170786&4294967295,_=T+(S<<5&4294967295|S>>>27),S=V+(T^C&(_^T))+I[6]+3225465664&4294967295,V=_+(S<<9&4294967295|S>>>23),S=C+(_^T&(V^_))+I[11]+643717713&4294967295,C=V+(S<<14&4294967295|S>>>18),S=T+(V^_&(C^V))+I[0]+3921069994&4294967295,T=C+(S<<20&4294967295|S>>>12),S=_+(C^V&(T^C))+I[5]+3593408605&4294967295,_=T+(S<<5&4294967295|S>>>27),S=V+(T^C&(_^T))+I[10]+38016083&4294967295,V=_+(S<<9&4294967295|S>>>23),S=C+(_^T&(V^_))+I[15]+3634488961&4294967295,C=V+(S<<14&4294967295|S>>>18),S=T+(V^_&(C^V))+I[4]+3889429448&4294967295,T=C+(S<<20&4294967295|S>>>12),S=_+(C^V&(T^C))+I[9]+568446438&4294967295,_=T+(S<<5&4294967295|S>>>27),S=V+(T^C&(_^T))+I[14]+3275163606&4294967295,V=_+(S<<9&4294967295|S>>>23),S=C+(_^T&(V^_))+I[3]+4107603335&4294967295,C=V+(S<<14&4294967295|S>>>18),S=T+(V^_&(C^V))+I[8]+1163531501&4294967295,T=C+(S<<20&4294967295|S>>>12),S=_+(C^V&(T^C))+I[13]+2850285829&4294967295,_=T+(S<<5&4294967295|S>>>27),S=V+(T^C&(_^T))+I[2]+4243563512&4294967295,V=_+(S<<9&4294967295|S>>>23),S=C+(_^T&(V^_))+I[7]+1735328473&4294967295,C=V+(S<<14&4294967295|S>>>18),S=T+(V^_&(C^V))+I[12]+2368359562&4294967295,T=C+(S<<20&4294967295|S>>>12),S=_+(T^C^V)+I[5]+4294588738&4294967295,_=T+(S<<4&4294967295|S>>>28),S=V+(_^T^C)+I[8]+2272392833&4294967295,V=_+(S<<11&4294967295|S>>>21),S=C+(V^_^T)+I[11]+1839030562&4294967295,C=V+(S<<16&4294967295|S>>>16),S=T+(C^V^_)+I[14]+4259657740&4294967295,T=C+(S<<23&4294967295|S>>>9),S=_+(T^C^V)+I[1]+2763975236&4294967295,_=T+(S<<4&4294967295|S>>>28),S=V+(_^T^C)+I[4]+1272893353&4294967295,V=_+(S<<11&4294967295|S>>>21),S=C+(V^_^T)+I[7]+4139469664&4294967295,C=V+(S<<16&4294967295|S>>>16),S=T+(C^V^_)+I[10]+3200236656&4294967295,T=C+(S<<23&4294967295|S>>>9),S=_+(T^C^V)+I[13]+681279174&4294967295,_=T+(S<<4&4294967295|S>>>28),S=V+(_^T^C)+I[0]+3936430074&4294967295,V=_+(S<<11&4294967295|S>>>21),S=C+(V^_^T)+I[3]+3572445317&4294967295,C=V+(S<<16&4294967295|S>>>16),S=T+(C^V^_)+I[6]+76029189&4294967295,T=C+(S<<23&4294967295|S>>>9),S=_+(T^C^V)+I[9]+3654602809&4294967295,_=T+(S<<4&4294967295|S>>>28),S=V+(_^T^C)+I[12]+3873151461&4294967295,V=_+(S<<11&4294967295|S>>>21),S=C+(V^_^T)+I[15]+530742520&4294967295,C=V+(S<<16&4294967295|S>>>16),S=T+(C^V^_)+I[2]+3299628645&4294967295,T=C+(S<<23&4294967295|S>>>9),S=_+(C^(T|~V))+I[0]+4096336452&4294967295,_=T+(S<<6&4294967295|S>>>26),S=V+(T^(_|~C))+I[7]+1126891415&4294967295,V=_+(S<<10&4294967295|S>>>22),S=C+(_^(V|~T))+I[14]+2878612391&4294967295,C=V+(S<<15&4294967295|S>>>17),S=T+(V^(C|~_))+I[5]+4237533241&4294967295,T=C+(S<<21&4294967295|S>>>11),S=_+(C^(T|~V))+I[12]+1700485571&4294967295,_=T+(S<<6&4294967295|S>>>26),S=V+(T^(_|~C))+I[3]+2399980690&4294967295,V=_+(S<<10&4294967295|S>>>22),S=C+(_^(V|~T))+I[10]+4293915773&4294967295,C=V+(S<<15&4294967295|S>>>17),S=T+(V^(C|~_))+I[1]+2240044497&4294967295,T=C+(S<<21&4294967295|S>>>11),S=_+(C^(T|~V))+I[8]+1873313359&4294967295,_=T+(S<<6&4294967295|S>>>26),S=V+(T^(_|~C))+I[15]+4264355552&4294967295,V=_+(S<<10&4294967295|S>>>22),S=C+(_^(V|~T))+I[6]+2734768916&4294967295,C=V+(S<<15&4294967295|S>>>17),S=T+(V^(C|~_))+I[13]+1309151649&4294967295,T=C+(S<<21&4294967295|S>>>11),S=_+(C^(T|~V))+I[4]+4149444226&4294967295,_=T+(S<<6&4294967295|S>>>26),S=V+(T^(_|~C))+I[11]+3174756917&4294967295,V=_+(S<<10&4294967295|S>>>22),S=C+(_^(V|~T))+I[2]+718787259&4294967295,C=V+(S<<15&4294967295|S>>>17),S=T+(V^(C|~_))+I[9]+3951481745&4294967295,w.g[0]=w.g[0]+_&4294967295,w.g[1]=w.g[1]+(C+(S<<21&4294967295|S>>>11))&4294967295,w.g[2]=w.g[2]+C&4294967295,w.g[3]=w.g[3]+V&4294967295}r.prototype.v=function(w,_){_===void 0&&(_=w.length);const T=_-this.blockSize,I=this.C;let C=this.h,V=0;for(;V<_;){if(C==0)for(;V<=T;)i(this,w,V),V+=this.blockSize;if(typeof w=="string"){for(;V<_;)if(I[C++]=w.charCodeAt(V++),C==this.blockSize){i(this,I),C=0;break}}else for(;V<_;)if(I[C++]=w[V++],C==this.blockSize){i(this,I),C=0;break}}this.h=C,this.o+=_},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var _=1;_<w.length-8;++_)w[_]=0;_=this.o*8;for(var T=w.length-8;T<w.length;++T)w[T]=_&255,_/=256;for(this.v(w),w=Array(16),_=0,T=0;T<4;++T)for(let I=0;I<32;I+=8)w[_++]=this.g[T]>>>I&255;return w};function s(w,_){var T=l;return Object.prototype.hasOwnProperty.call(T,w)?T[w]:T[w]=_(w)}function o(w,_){this.h=_;const T=[];let I=!0;for(let C=w.length-1;C>=0;C--){const V=w[C]|0;I&&V==_||(T[C]=V,I=!1)}this.g=T}var l={};function u(w){return-128<=w&&w<128?s(w,function(_){return new o([_|0],_<0?-1:0)}):new o([w|0],w<0?-1:0)}function h(w){if(isNaN(w)||!isFinite(w))return m;if(w<0)return N(h(-w));const _=[];let T=1;for(let I=0;w>=T;I++)_[I]=w/T|0,T*=4294967296;return new o(_,0)}function p(w,_){if(w.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(w.charAt(0)=="-")return N(p(w.substring(1),_));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=h(Math.pow(_,8));let I=m;for(let V=0;V<w.length;V+=8){var C=Math.min(8,w.length-V);const S=parseInt(w.substring(V,V+C),_);C<8?(C=h(Math.pow(_,C)),I=I.j(C).add(h(S))):(I=I.j(T),I=I.add(h(S)))}return I}var m=u(0),g=u(1),k=u(16777216);t=o.prototype,t.m=function(){if(R(this))return-N(this).m();let w=0,_=1;for(let T=0;T<this.g.length;T++){const I=this.i(T);w+=(I>=0?I:4294967296+I)*_,_*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(A(this))return"0";if(R(this))return"-"+N(this).toString(w);const _=h(Math.pow(w,6));var T=this;let I="";for(;;){const C=P(T,_).g;T=E(T,C.j(_));let V=((T.g.length>0?T.g[0]:T.h)>>>0).toString(w);if(T=C,A(T))return V+I;for(;V.length<6;)V="0"+V;I=V+I}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function A(w){if(w.h!=0)return!1;for(let _=0;_<w.g.length;_++)if(w.g[_]!=0)return!1;return!0}function R(w){return w.h==-1}t.l=function(w){return w=E(this,w),R(w)?-1:A(w)?0:1};function N(w){const _=w.g.length,T=[];for(let I=0;I<_;I++)T[I]=~w.g[I];return new o(T,~w.h).add(g)}t.abs=function(){return R(this)?N(this):this},t.add=function(w){const _=Math.max(this.g.length,w.g.length),T=[];let I=0;for(let C=0;C<=_;C++){let V=I+(this.i(C)&65535)+(w.i(C)&65535),S=(V>>>16)+(this.i(C)>>>16)+(w.i(C)>>>16);I=S>>>16,V&=65535,S&=65535,T[C]=S<<16|V}return new o(T,T[T.length-1]&-2147483648?-1:0)};function E(w,_){return w.add(N(_))}t.j=function(w){if(A(this)||A(w))return m;if(R(this))return R(w)?N(this).j(N(w)):N(N(this).j(w));if(R(w))return N(this.j(N(w)));if(this.l(k)<0&&w.l(k)<0)return h(this.m()*w.m());const _=this.g.length+w.g.length,T=[];for(var I=0;I<2*_;I++)T[I]=0;for(I=0;I<this.g.length;I++)for(let C=0;C<w.g.length;C++){const V=this.i(I)>>>16,S=this.i(I)&65535,ge=w.i(C)>>>16,nt=w.i(C)&65535;T[2*I+2*C]+=S*nt,v(T,2*I+2*C),T[2*I+2*C+1]+=V*nt,v(T,2*I+2*C+1),T[2*I+2*C+1]+=S*ge,v(T,2*I+2*C+1),T[2*I+2*C+2]+=V*ge,v(T,2*I+2*C+2)}for(w=0;w<_;w++)T[w]=T[2*w+1]<<16|T[2*w];for(w=_;w<2*_;w++)T[w]=0;return new o(T,0)};function v(w,_){for(;(w[_]&65535)!=w[_];)w[_+1]+=w[_]>>>16,w[_]&=65535,_++}function x(w,_){this.g=w,this.h=_}function P(w,_){if(A(_))throw Error("division by zero");if(A(w))return new x(m,m);if(R(w))return _=P(N(w),_),new x(N(_.g),N(_.h));if(R(_))return _=P(w,N(_)),new x(N(_.g),_.h);if(w.g.length>30){if(R(w)||R(_))throw Error("slowDivide_ only works with positive integers.");for(var T=g,I=_;I.l(w)<=0;)T=M(T),I=M(I);var C=F(T,1),V=F(I,1);for(I=F(I,2),T=F(T,2);!A(I);){var S=V.add(I);S.l(w)<=0&&(C=C.add(T),V=S),I=F(I,1),T=F(T,1)}return _=E(w,C.j(_)),new x(C,_)}for(C=m;w.l(_)>=0;){for(T=Math.max(1,Math.floor(w.m()/_.m())),I=Math.ceil(Math.log(T)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),V=h(T),S=V.j(_);R(S)||S.l(w)>0;)T-=I,V=h(T),S=V.j(_);A(V)&&(V=g),C=C.add(V),w=E(w,S)}return new x(C,w)}t.B=function(w){return P(this,w).h},t.and=function(w){const _=Math.max(this.g.length,w.g.length),T=[];for(let I=0;I<_;I++)T[I]=this.i(I)&w.i(I);return new o(T,this.h&w.h)},t.or=function(w){const _=Math.max(this.g.length,w.g.length),T=[];for(let I=0;I<_;I++)T[I]=this.i(I)|w.i(I);return new o(T,this.h|w.h)},t.xor=function(w){const _=Math.max(this.g.length,w.g.length),T=[];for(let I=0;I<_;I++)T[I]=this.i(I)^w.i(I);return new o(T,this.h^w.h)};function M(w){const _=w.g.length+1,T=[];for(let I=0;I<_;I++)T[I]=w.i(I)<<1|w.i(I-1)>>>31;return new o(T,w.h)}function F(w,_){const T=_>>5;_%=32;const I=w.g.length-T,C=[];for(let V=0;V<I;V++)C[V]=_>0?w.i(V+T)>>>_|w.i(V+T+1)<<32-_:w.i(V+T);return new o(C,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,y0=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,Kn=o}).apply(typeof Am<"u"?Am:typeof self<"u"?self:typeof window<"u"?window:{});var ra=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var v0,Ss,_0,ka,ih,w0,E0,x0;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ra=="object"&&ra];for(var c=0;c<a.length;++c){var d=a[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function i(a,c){if(c)e:{var d=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var D=a[y];if(!(D in d))break e;d=d[D]}a=a[a.length-1],y=d[a],c=c(y),c!=y&&c!=null&&e(d,a,{configurable:!0,writable:!0,value:c})}}i("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(a){return a||function(c){var d=[],y;for(y in c)Object.prototype.hasOwnProperty.call(c,y)&&d.push([y,c[y]]);return d}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function l(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function u(a,c,d){return a.call.apply(a.bind,arguments)}function h(a,c,d){return h=u,h.apply(null,arguments)}function p(a,c){var d=Array.prototype.slice.call(arguments,1);return function(){var y=d.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function m(a,c){function d(){}d.prototype=c.prototype,a.Z=c.prototype,a.prototype=new d,a.prototype.constructor=a,a.Ob=function(y,D,b){for(var U=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)U[Z-2]=arguments[Z];return c.prototype[D].apply(y,U)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function k(a){const c=a.length;if(c>0){const d=Array(c);for(let y=0;y<c;y++)d[y]=a[y];return d}return[]}function A(a,c){for(let y=1;y<arguments.length;y++){const D=arguments[y];var d=typeof D;if(d=d!="object"?d:D?Array.isArray(D)?"array":d:"null",d=="array"||d=="object"&&typeof D.length=="number"){d=a.length||0;const b=D.length||0;a.length=d+b;for(let U=0;U<b;U++)a[d+U]=D[U]}else a.push(D)}}class R{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return this.h>0?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function N(a){o.setTimeout(()=>{throw a},0)}function E(){var a=w;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class v{constructor(){this.h=this.g=null}add(c,d){const y=x.get();y.set(c,d),this.h?this.h.next=y:this.g=y,this.h=y}}var x=new R(()=>new P,a=>a.reset());class P{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let M,F=!1,w=new v,_=()=>{const a=Promise.resolve(void 0);M=()=>{a.then(T)}};function T(){for(var a;a=E();){try{a.h.call(a.g)}catch(d){N(d)}var c=x;c.j(a),c.h<100&&(c.h++,a.next=c.g,c.g=a)}F=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var V=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};o.addEventListener("test",d,c),o.removeEventListener("test",d,c)}catch{}return a}();function S(a){return/^[\s\xa0]*$/.test(a)}function ge(a,c){C.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,c)}m(ge,C),ge.prototype.init=function(a,c){const d=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget,c||(d=="mouseover"?c=a.fromElement:d=="mouseout"&&(c=a.toElement)),this.relatedTarget=c,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&ge.Z.h.call(this)},ge.prototype.h=function(){ge.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var nt="closure_listenable_"+(Math.random()*1e6|0),Vt=0;function Dt(a,c,d,y,D){this.listener=a,this.proxy=null,this.src=c,this.type=d,this.capture=!!y,this.ha=D,this.key=++Vt,this.da=this.fa=!1}function z(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function H(a,c,d){for(const y in a)c.call(d,a[y],y,a)}function X(a,c){for(const d in a)c.call(void 0,a[d],d,a)}function K(a){const c={};for(const d in a)c[d]=a[d];return c}const Se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ar(a,c){let d,y;for(let D=1;D<arguments.length;D++){y=arguments[D];for(d in y)a[d]=y[d];for(let b=0;b<Se.length;b++)d=Se[b],Object.prototype.hasOwnProperty.call(y,d)&&(a[d]=y[d])}}function Tt(a){this.src=a,this.g={},this.h=0}Tt.prototype.add=function(a,c,d,y,D){const b=a.toString();a=this.g[b],a||(a=this.g[b]=[],this.h++);const U=bt(a,c,y,D);return U>-1?(c=a[U],d||(c.fa=!1)):(c=new Dt(c,this.src,b,!!y,D),c.fa=d,a.push(c)),c};function lr(a,c){const d=c.type;if(d in a.g){var y=a.g[d],D=Array.prototype.indexOf.call(y,c,void 0),b;(b=D>=0)&&Array.prototype.splice.call(y,D,1),b&&(z(c),a.g[d].length==0&&(delete a.g[d],a.h--))}}function bt(a,c,d,y){for(let D=0;D<a.length;++D){const b=a[D];if(!b.da&&b.listener==c&&b.capture==!!d&&b.ha==y)return D}return-1}var _n="closure_lm_"+(Math.random()*1e6|0),Ql={};function Zd(a,c,d,y,D){if(Array.isArray(c)){for(let b=0;b<c.length;b++)Zd(a,c[b],d,y,D);return null}return d=nf(d),a&&a[nt]?a.J(c,d,l(y)?!!y.capture:!1,D):U_(a,c,d,!1,y,D)}function U_(a,c,d,y,D,b){if(!c)throw Error("Invalid event type");const U=l(D)?!!D.capture:!!D;let Z=Yl(a);if(Z||(a[_n]=Z=new Tt(a)),d=Z.add(c,d,y,U,b),d.proxy)return d;if(y=z_(),d.proxy=y,y.src=a,y.listener=d,a.addEventListener)V||(D=U),D===void 0&&(D=!1),a.addEventListener(c.toString(),y,D);else if(a.attachEvent)a.attachEvent(tf(c.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return d}function z_(){function a(d){return c.call(a.src,a.listener,d)}const c=B_;return a}function ef(a,c,d,y,D){if(Array.isArray(c))for(var b=0;b<c.length;b++)ef(a,c[b],d,y,D);else y=l(y)?!!y.capture:!!y,d=nf(d),a&&a[nt]?(a=a.i,b=String(c).toString(),b in a.g&&(c=a.g[b],d=bt(c,d,y,D),d>-1&&(z(c[d]),Array.prototype.splice.call(c,d,1),c.length==0&&(delete a.g[b],a.h--)))):a&&(a=Yl(a))&&(c=a.g[c.toString()],a=-1,c&&(a=bt(c,d,y,D)),(d=a>-1?c[a]:null)&&Gl(d))}function Gl(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[nt])lr(c.i,a);else{var d=a.type,y=a.proxy;c.removeEventListener?c.removeEventListener(d,y,a.capture):c.detachEvent?c.detachEvent(tf(d),y):c.addListener&&c.removeListener&&c.removeListener(y),(d=Yl(c))?(lr(d,a),d.h==0&&(d.src=null,c[_n]=null)):z(a)}}}function tf(a){return a in Ql?Ql[a]:Ql[a]="on"+a}function B_(a,c){if(a.da)a=!0;else{c=new ge(c,this);const d=a.listener,y=a.ha||a.src;a.fa&&Gl(a),a=d.call(y,c)}return a}function Yl(a){return a=a[_n],a instanceof Tt?a:null}var Xl="__closure_events_fn_"+(Math.random()*1e9>>>0);function nf(a){return typeof a=="function"?a:(a[Xl]||(a[Xl]=function(c){return a.handleEvent(c)}),a[Xl])}function Ke(){I.call(this),this.i=new Tt(this),this.M=this,this.G=null}m(Ke,I),Ke.prototype[nt]=!0,Ke.prototype.removeEventListener=function(a,c,d,y){ef(this,a,c,d,y)};function rt(a,c){var d,y=a.G;if(y)for(d=[];y;y=y.G)d.push(y);if(a=a.M,y=c.type||c,typeof c=="string")c=new C(c,a);else if(c instanceof C)c.target=c.target||a;else{var D=c;c=new C(y,a),ar(c,D)}D=!0;let b,U;if(d)for(U=d.length-1;U>=0;U--)b=c.g=d[U],D=Co(b,y,!0,c)&&D;if(b=c.g=a,D=Co(b,y,!0,c)&&D,D=Co(b,y,!1,c)&&D,d)for(U=0;U<d.length;U++)b=c.g=d[U],D=Co(b,y,!1,c)&&D}Ke.prototype.N=function(){if(Ke.Z.N.call(this),this.i){var a=this.i;for(const c in a.g){const d=a.g[c];for(let y=0;y<d.length;y++)z(d[y]);delete a.g[c],a.h--}}this.G=null},Ke.prototype.J=function(a,c,d,y){return this.i.add(String(a),c,!1,d,y)},Ke.prototype.K=function(a,c,d,y){return this.i.add(String(a),c,!0,d,y)};function Co(a,c,d,y){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();let D=!0;for(let b=0;b<c.length;++b){const U=c[b];if(U&&!U.da&&U.capture==d){const Z=U.listener,De=U.ha||U.src;U.fa&&lr(a.i,U),D=Z.call(De,y)!==!1&&D}}return D&&!y.defaultPrevented}function $_(a,c){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=h(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(c)>2147483647?-1:o.setTimeout(a,c||0)}function rf(a){a.g=$_(()=>{a.g=null,a.i&&(a.i=!1,rf(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class q_ extends I{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:rf(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $i(a){I.call(this),this.h=a,this.g={}}m($i,I);var sf=[];function of(a){H(a.g,function(c,d){this.g.hasOwnProperty(d)&&Gl(c)},a),a.g={}}$i.prototype.N=function(){$i.Z.N.call(this),of(this)},$i.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jl=o.JSON.stringify,W_=o.JSON.parse,H_=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function af(){}function lf(){}var qi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Zl(){C.call(this,"d")}m(Zl,C);function eu(){C.call(this,"c")}m(eu,C);var ur={},uf=null;function Ao(){return uf=uf||new Ke}ur.Ia="serverreachability";function cf(a){C.call(this,ur.Ia,a)}m(cf,C);function Wi(a){const c=Ao();rt(c,new cf(c))}ur.STAT_EVENT="statevent";function hf(a,c){C.call(this,ur.STAT_EVENT,a),this.stat=c}m(hf,C);function it(a){const c=Ao();rt(c,new hf(c,a))}ur.Ja="timingevent";function df(a,c){C.call(this,ur.Ja,a),this.size=c}m(df,C);function Hi(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},c)}function Ki(){this.g=!0}Ki.prototype.ua=function(){this.g=!1};function K_(a,c,d,y,D,b){a.info(function(){if(a.g)if(b){var U="",Z=b.split("&");for(let le=0;le<Z.length;le++){var De=Z[le].split("=");if(De.length>1){const Oe=De[0];De=De[1];const Wt=Oe.split("_");U=Wt.length>=2&&Wt[1]=="type"?U+(Oe+"="+De+"&"):U+(Oe+"=redacted&")}}}else U=null;else U=b;return"XMLHTTP REQ ("+y+") [attempt "+D+"]: "+c+`
`+d+`
`+U})}function Q_(a,c,d,y,D,b,U){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+D+"]: "+c+`
`+d+`
`+b+" "+U})}function Or(a,c,d,y){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+Y_(a,d)+(y?" "+y:"")})}function G_(a,c){a.info(function(){return"TIMEOUT: "+c})}Ki.prototype.info=function(){};function Y_(a,c){if(!a.g)return c;if(!c)return null;try{const b=JSON.parse(c);if(b){for(a=0;a<b.length;a++)if(Array.isArray(b[a])){var d=b[a];if(!(d.length<2)){var y=d[1];if(Array.isArray(y)&&!(y.length<1)){var D=y[0];if(D!="noop"&&D!="stop"&&D!="close")for(let U=1;U<y.length;U++)y[U]=""}}}}return Jl(b)}catch{return c}}var Ro={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ff={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},pf;function tu(){}m(tu,af),tu.prototype.g=function(){return new XMLHttpRequest},pf=new tu;function Qi(a){return encodeURIComponent(String(a))}function X_(a){var c=1;a=a.split(":");const d=[];for(;c>0&&a.length;)d.push(a.shift()),c--;return a.length&&d.push(a.join(":")),d}function wn(a,c,d,y){this.j=a,this.i=c,this.l=d,this.S=y||1,this.V=new $i(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new mf}function mf(){this.i=null,this.g="",this.h=!1}var gf={},nu={};function ru(a,c,d){a.M=1,a.A=No(qt(c)),a.u=d,a.R=!0,yf(a,null)}function yf(a,c){a.F=Date.now(),Po(a),a.B=qt(a.A);var d=a.B,y=a.S;Array.isArray(y)||(y=[String(y)]),Pf(d.i,"t",y),a.C=0,d=a.j.L,a.h=new mf,a.g=Qf(a.j,d?c:null,!a.u),a.P>0&&(a.O=new q_(h(a.Y,a,a.g),a.P)),c=a.V,d=a.g,y=a.ba;var D="readystatechange";Array.isArray(D)||(D&&(sf[0]=D.toString()),D=sf);for(let b=0;b<D.length;b++){const U=Zd(d,D[b],y||c.handleEvent,!1,c.h||c);if(!U)break;c.g[U.key]=U}c=a.J?K(a.J):{},a.u?(a.v||(a.v="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,c)):(a.v="GET",a.g.ea(a.B,a.v,null,c)),Wi(),K_(a.i,a.v,a.B,a.l,a.S,a.u)}wn.prototype.ba=function(a){a=a.target;const c=this.O;c&&Tn(a)==3?c.j():this.Y(a)},wn.prototype.Y=function(a){try{if(a==this.g)e:{const Z=Tn(this.g),De=this.g.ya(),le=this.g.ca();if(!(Z<3)&&(Z!=3||this.g&&(this.h.h||this.g.la()||Lf(this.g)))){this.K||Z!=4||De==7||(De==8||le<=0?Wi(3):Wi(2)),iu(this);var c=this.g.ca();this.X=c;var d=J_(this);if(this.o=c==200,Q_(this.i,this.v,this.B,this.l,this.S,Z,c),this.o){if(this.U&&!this.L){t:{if(this.g){var y,D=this.g;if((y=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(y)){var b=y;break t}}b=null}if(a=b)Or(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,su(this,a);else{this.o=!1,this.m=3,it(12),cr(this),Gi(this);break e}}if(this.R){a=!0;let Oe;for(;!this.K&&this.C<d.length;)if(Oe=Z_(this,d),Oe==nu){Z==4&&(this.m=4,it(14),a=!1),Or(this.i,this.l,null,"[Incomplete Response]");break}else if(Oe==gf){this.m=4,it(15),Or(this.i,this.l,d,"[Invalid Chunk]"),a=!1;break}else Or(this.i,this.l,Oe,null),su(this,Oe);if(vf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Z!=4||d.length!=0||this.h.h||(this.m=1,it(16),a=!1),this.o=this.o&&a,!a)Or(this.i,this.l,d,"[Invalid Chunked Response]"),cr(this),Gi(this);else if(d.length>0&&!this.W){this.W=!0;var U=this.j;U.g==this&&U.aa&&!U.P&&(U.j.info("Great, no buffering proxy detected. Bytes received: "+d.length),fu(U),U.P=!0,it(11))}}else Or(this.i,this.l,d,null),su(this,d);Z==4&&cr(this),this.o&&!this.K&&(Z==4?qf(this.j,this):(this.o=!1,Po(this)))}else f1(this.g),c==400&&d.indexOf("Unknown SID")>0?(this.m=3,it(12)):(this.m=0,it(13)),cr(this),Gi(this)}}}catch{}finally{}};function J_(a){if(!vf(a))return a.g.la();const c=Lf(a.g);if(c==="")return"";let d="";const y=c.length,D=Tn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return cr(a),Gi(a),"";a.h.i=new o.TextDecoder}for(let b=0;b<y;b++)a.h.h=!0,d+=a.h.i.decode(c[b],{stream:!(D&&b==y-1)});return c.length=0,a.h.g+=d,a.C=0,a.h.g}function vf(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function Z_(a,c){var d=a.C,y=c.indexOf(`
`,d);return y==-1?nu:(d=Number(c.substring(d,y)),isNaN(d)?gf:(y+=1,y+d>c.length?nu:(c=c.slice(y,y+d),a.C=y+d,c)))}wn.prototype.cancel=function(){this.K=!0,cr(this)};function Po(a){a.T=Date.now()+a.H,_f(a,a.H)}function _f(a,c){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Hi(h(a.aa,a),c)}function iu(a){a.D&&(o.clearTimeout(a.D),a.D=null)}wn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(G_(this.i,this.B),this.M!=2&&(Wi(),it(17)),cr(this),this.m=2,Gi(this)):_f(this,this.T-a)};function Gi(a){a.j.I==0||a.K||qf(a.j,a)}function cr(a){iu(a);var c=a.O;c&&typeof c.dispose=="function"&&c.dispose(),a.O=null,of(a.V),a.g&&(c=a.g,a.g=null,c.abort(),c.dispose())}function su(a,c){try{var d=a.j;if(d.I!=0&&(d.g==a||ou(d.h,a))){if(!a.L&&ou(d.h,a)&&d.I==3){try{var y=d.Ba.g.parse(c)}catch{y=null}if(Array.isArray(y)&&y.length==3){var D=y;if(D[0]==0){e:if(!d.v){if(d.g)if(d.g.F+3e3<a.F)jo(d),bo(d);else break e;du(d),it(18)}}else d.xa=D[1],0<d.xa-d.K&&D[2]<37500&&d.F&&d.A==0&&!d.C&&(d.C=Hi(h(d.Va,d),6e3));xf(d.h)<=1&&d.ta&&(d.ta=void 0)}else dr(d,11)}else if((a.L||d.g==a)&&jo(d),!S(c))for(D=d.Ba.g.parse(c),c=0;c<D.length;c++){let le=D[c];const Oe=le[0];if(!(Oe<=d.K))if(d.K=Oe,le=le[1],d.I==2)if(le[0]=="c"){d.M=le[1],d.ba=le[2];const Wt=le[3];Wt!=null&&(d.ka=Wt,d.j.info("VER="+d.ka));const fr=le[4];fr!=null&&(d.za=fr,d.j.info("SVER="+d.za));const Sn=le[5];Sn!=null&&typeof Sn=="number"&&Sn>0&&(y=1.5*Sn,d.O=y,d.j.info("backChannelRequestTimeoutMs_="+y)),y=d;const In=a.g;if(In){const Oo=In.g?In.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oo){var b=y.h;b.g||Oo.indexOf("spdy")==-1&&Oo.indexOf("quic")==-1&&Oo.indexOf("h2")==-1||(b.j=b.l,b.g=new Set,b.h&&(au(b,b.h),b.h=null))}if(y.G){const pu=In.g?In.g.getResponseHeader("X-HTTP-Session-Id"):null;pu&&(y.wa=pu,he(y.J,y.G,pu))}}d.I=3,d.l&&d.l.ra(),d.aa&&(d.T=Date.now()-a.F,d.j.info("Handshake RTT: "+d.T+"ms")),y=d;var U=a;if(y.na=Kf(y,y.L?y.ba:null,y.W),U.L){Tf(y.h,U);var Z=U,De=y.O;De&&(Z.H=De),Z.D&&(iu(Z),Po(Z)),y.g=U}else Bf(y);d.i.length>0&&Mo(d)}else le[0]!="stop"&&le[0]!="close"||dr(d,7);else d.I==3&&(le[0]=="stop"||le[0]=="close"?le[0]=="stop"?dr(d,7):hu(d):le[0]!="noop"&&d.l&&d.l.qa(le),d.A=0)}}Wi(4)}catch{}}var e1=class{constructor(a,c){this.g=a,this.map=c}};function wf(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ef(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function xf(a){return a.h?1:a.g?a.g.size:0}function ou(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function au(a,c){a.g?a.g.add(c):a.h=c}function Tf(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}wf.prototype.cancel=function(){if(this.i=Sf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Sf(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const d of a.g.values())c=c.concat(d.G);return c}return k(a.i)}var If=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function t1(a,c){if(a){a=a.split("&");for(let d=0;d<a.length;d++){const y=a[d].indexOf("=");let D,b=null;y>=0?(D=a[d].substring(0,y),b=a[d].substring(y+1)):D=a[d],c(D,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function En(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let c;a instanceof En?(this.l=a.l,Yi(this,a.j),this.o=a.o,this.g=a.g,Xi(this,a.u),this.h=a.h,lu(this,Nf(a.i)),this.m=a.m):a&&(c=String(a).match(If))?(this.l=!1,Yi(this,c[1]||"",!0),this.o=Ji(c[2]||""),this.g=Ji(c[3]||"",!0),Xi(this,c[4]),this.h=Ji(c[5]||"",!0),lu(this,c[6]||"",!0),this.m=Ji(c[7]||"")):(this.l=!1,this.i=new es(null,this.l))}En.prototype.toString=function(){const a=[];var c=this.j;c&&a.push(Zi(c,kf,!0),":");var d=this.g;return(d||c=="file")&&(a.push("//"),(c=this.o)&&a.push(Zi(c,kf,!0),"@"),a.push(Qi(d).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,d!=null&&a.push(":",String(d))),(d=this.h)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(Zi(d,d.charAt(0)=="/"?i1:r1,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",Zi(d,o1)),a.join("")},En.prototype.resolve=function(a){const c=qt(this);let d=!!a.j;d?Yi(c,a.j):d=!!a.o,d?c.o=a.o:d=!!a.g,d?c.g=a.g:d=a.u!=null;var y=a.h;if(d)Xi(c,a.u);else if(d=!!a.h){if(y.charAt(0)!="/")if(this.g&&!this.h)y="/"+y;else{var D=c.h.lastIndexOf("/");D!=-1&&(y=c.h.slice(0,D+1)+y)}if(D=y,D==".."||D==".")y="";else if(D.indexOf("./")!=-1||D.indexOf("/.")!=-1){y=D.lastIndexOf("/",0)==0,D=D.split("/");const b=[];for(let U=0;U<D.length;){const Z=D[U++];Z=="."?y&&U==D.length&&b.push(""):Z==".."?((b.length>1||b.length==1&&b[0]!="")&&b.pop(),y&&U==D.length&&b.push("")):(b.push(Z),y=!0)}y=b.join("/")}else y=D}return d?c.h=y:d=a.i.toString()!=="",d?lu(c,Nf(a.i)):d=!!a.m,d&&(c.m=a.m),c};function qt(a){return new En(a)}function Yi(a,c,d){a.j=d?Ji(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function Xi(a,c){if(c){if(c=Number(c),isNaN(c)||c<0)throw Error("Bad port number "+c);a.u=c}else a.u=null}function lu(a,c,d){c instanceof es?(a.i=c,a1(a.i,a.l)):(d||(c=Zi(c,s1)),a.i=new es(c,a.l))}function he(a,c,d){a.i.set(c,d)}function No(a){return he(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Ji(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Zi(a,c,d){return typeof a=="string"?(a=encodeURI(a).replace(c,n1),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function n1(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var kf=/[#\/\?@]/g,r1=/[#\?:]/g,i1=/[#\?]/g,s1=/[#\?@]/g,o1=/#/g;function es(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function hr(a){a.g||(a.g=new Map,a.h=0,a.i&&t1(a.i,function(c,d){a.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}t=es.prototype,t.add=function(a,c){hr(this),this.i=null,a=Fr(this,a);let d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(c),this.h+=1,this};function Cf(a,c){hr(a),c=Fr(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function Af(a,c){return hr(a),c=Fr(a,c),a.g.has(c)}t.forEach=function(a,c){hr(this),this.g.forEach(function(d,y){d.forEach(function(D){a.call(c,D,y,this)},this)},this)};function Rf(a,c){hr(a);let d=[];if(typeof c=="string")Af(a,c)&&(d=d.concat(a.g.get(Fr(a,c))));else for(a=Array.from(a.g.values()),c=0;c<a.length;c++)d=d.concat(a[c]);return d}t.set=function(a,c){return hr(this),this.i=null,a=Fr(this,a),Af(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=Rf(this,a),a.length>0?String(a[0]):c):c};function Pf(a,c,d){Cf(a,c),d.length>0&&(a.i=null,a.g.set(Fr(a,c),k(d)),a.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(let y=0;y<c.length;y++){var d=c[y];const D=Qi(d);d=Rf(this,d);for(let b=0;b<d.length;b++){let U=D;d[b]!==""&&(U+="="+Qi(d[b])),a.push(U)}}return this.i=a.join("&")};function Nf(a){const c=new es;return c.i=a.i,a.g&&(c.g=new Map(a.g),c.h=a.h),c}function Fr(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function a1(a,c){c&&!a.j&&(hr(a),a.i=null,a.g.forEach(function(d,y){const D=y.toLowerCase();y!=D&&(Cf(this,y),Pf(this,D,d))},a)),a.j=c}function l1(a,c){const d=new Ki;if(o.Image){const y=new Image;y.onload=p(xn,d,"TestLoadImage: loaded",!0,c,y),y.onerror=p(xn,d,"TestLoadImage: error",!1,c,y),y.onabort=p(xn,d,"TestLoadImage: abort",!1,c,y),y.ontimeout=p(xn,d,"TestLoadImage: timeout",!1,c,y),o.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else c(!1)}function u1(a,c){const d=new Ki,y=new AbortController,D=setTimeout(()=>{y.abort(),xn(d,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:y.signal}).then(b=>{clearTimeout(D),b.ok?xn(d,"TestPingServer: ok",!0,c):xn(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(D),xn(d,"TestPingServer: error",!1,c)})}function xn(a,c,d,y,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),y(d)}catch{}}function c1(){this.g=new H_}function uu(a){this.i=a.Sb||null,this.h=a.ab||!1}m(uu,af),uu.prototype.g=function(){return new Vo(this.i,this.h)};function Vo(a,c){Ke.call(this),this.H=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Vo,Ke),t=Vo.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=c,this.readyState=1,ns(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const c={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(c.body=a),(this.H||o).fetch(new Request(this.D,c)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ts(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ns(this)),this.g&&(this.readyState=3,ns(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Vf(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Vf(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.B.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?ts(this):ns(this),this.readyState==3&&Vf(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,ts(this))},t.Na=function(a){this.g&&(this.response=a,ts(this))},t.ga=function(){this.g&&ts(this)};function ts(a){a.readyState=4,a.l=null,a.j=null,a.B=null,ns(a)}t.setRequestHeader=function(a,c){this.A.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=c.next();return a.join(`\r
`)};function ns(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Vo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Df(a){let c="";return H(a,function(d,y){c+=y,c+=":",c+=d,c+=`\r
`}),c}function cu(a,c,d){e:{for(y in d){var y=!1;break e}y=!0}y||(d=Df(d),typeof a=="string"?d!=null&&Qi(d):he(a,c,d))}function Ee(a){Ke.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Ee,Ke);var h1=/^https?$/i,d1=["POST","PUT"];t=Ee.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,c,d,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():pf.g(),this.g.onreadystatechange=g(h(this.Ca,this));try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(b){bf(this,b);return}if(a=d||"",d=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var D in y)d.set(D,y[D]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const b of y.keys())d.set(b,y.get(b));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(d.keys()).find(b=>b.toLowerCase()=="content-type"),D=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(d1,c,void 0)>=0)||y||D||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[b,U]of d)this.g.setRequestHeader(b,U);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(b){bf(this,b)}};function bf(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.o=5,Mf(a),Do(a)}function Mf(a){a.A||(a.A=!0,rt(a,"complete"),rt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,rt(this,"complete"),rt(this,"abort"),Do(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Do(this,!0)),Ee.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?jf(this):this.Xa())},t.Xa=function(){jf(this)};function jf(a){if(a.h&&typeof s<"u"){if(a.v&&Tn(a)==4)setTimeout(a.Ca.bind(a),0);else if(rt(a,"readystatechange"),Tn(a)==4){a.h=!1;try{const b=a.ca();e:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var d;if(!(d=c)){var y;if(y=b===0){let U=String(a.D).match(If)[1]||null;!U&&o.self&&o.self.location&&(U=o.self.location.protocol.slice(0,-1)),y=!h1.test(U?U.toLowerCase():"")}d=y}if(d)rt(a,"complete"),rt(a,"success");else{a.o=6;try{var D=Tn(a)>2?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.ca()+"]",Mf(a)}}finally{Do(a)}}}}function Do(a,c){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const d=a.g;a.g=null,c||rt(a,"ready");try{d.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Tn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Tn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),W_(c)}};function Lf(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function f1(a){const c={};a=(a.g&&Tn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(S(a[y]))continue;var d=X_(a[y]);const D=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const b=c[D]||[];c[D]=b,b.push(d)}X(c,function(y){return y.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function rs(a,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||c}function Of(a){this.za=0,this.i=[],this.j=new Ki,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=rs("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=rs("baseRetryDelayMs",5e3,a),this.Za=rs("retryDelaySeedMs",1e4,a),this.Ta=rs("forwardChannelMaxRetries",2,a),this.va=rs("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new wf(a&&a.concurrentRequestLimit),this.Ba=new c1,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Of.prototype,t.ka=8,t.I=1,t.connect=function(a,c,d,y){it(0),this.W=a,this.H=c||{},d&&y!==void 0&&(this.H.OSID=d,this.H.OAID=y),this.F=this.X,this.J=Kf(this,null,this.W),Mo(this)};function hu(a){if(Ff(a),a.I==3){var c=a.V++,d=qt(a.J);if(he(d,"SID",a.M),he(d,"RID",c),he(d,"TYPE","terminate"),is(a,d),c=new wn(a,a.j,c),c.M=2,c.A=No(qt(d)),d=!1,o.navigator&&o.navigator.sendBeacon)try{d=o.navigator.sendBeacon(c.A.toString(),"")}catch{}!d&&o.Image&&(new Image().src=c.A,d=!0),d||(c.g=Qf(c.j,null),c.g.ea(c.A)),c.F=Date.now(),Po(c)}Hf(a)}function bo(a){a.g&&(fu(a),a.g.cancel(),a.g=null)}function Ff(a){bo(a),a.v&&(o.clearTimeout(a.v),a.v=null),jo(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Mo(a){if(!Ef(a.h)&&!a.m){a.m=!0;var c=a.Ea;M||_(),F||(M(),F=!0),w.add(c,a),a.D=0}}function p1(a,c){return xf(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=c.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Hi(h(a.Ea,a,c),Wf(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const D=new wn(this,this.j,a);let b=this.o;if(this.U&&(b?(b=K(b),ar(b,this.U)):b=this.U),this.u!==null||this.R||(D.J=b,b=null),this.S)e:{for(var c=0,d=0;d<this.i.length;d++){t:{var y=this.i[d];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(c+=y,c>4096){c=d;break e}if(c===4096||d===this.i.length-1){c=d+1;break e}}c=1e3}else c=1e3;c=zf(this,D,c),d=qt(this.J),he(d,"RID",a),he(d,"CVER",22),this.G&&he(d,"X-HTTP-Session-Id",this.G),is(this,d),b&&(this.R?c="headers="+Qi(Df(b))+"&"+c:this.u&&cu(d,this.u,b)),au(this.h,D),this.Ra&&he(d,"TYPE","init"),this.S?(he(d,"$req",c),he(d,"SID","null"),D.U=!0,ru(D,d,null)):ru(D,d,c),this.I=2}}else this.I==3&&(a?Uf(this,a):this.i.length==0||Ef(this.h)||Uf(this))};function Uf(a,c){var d;c?d=c.l:d=a.V++;const y=qt(a.J);he(y,"SID",a.M),he(y,"RID",d),he(y,"AID",a.K),is(a,y),a.u&&a.o&&cu(y,a.u,a.o),d=new wn(a,a.j,d,a.D+1),a.u===null&&(d.J=a.o),c&&(a.i=c.G.concat(a.i)),c=zf(a,d,1e3),d.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),au(a.h,d),ru(d,y,c)}function is(a,c){a.H&&H(a.H,function(d,y){he(c,y,d)}),a.l&&H({},function(d,y){he(c,y,d)})}function zf(a,c,d){d=Math.min(a.i.length,d);const y=a.l?h(a.l.Ka,a.l,a):null;e:{var D=a.i;let Z=-1;for(;;){const De=["count="+d];Z==-1?d>0?(Z=D[0].g,De.push("ofs="+Z)):Z=0:De.push("ofs="+Z);let le=!0;for(let Oe=0;Oe<d;Oe++){var b=D[Oe].g;const Wt=D[Oe].map;if(b-=Z,b<0)Z=Math.max(0,D[Oe].g-100),le=!1;else try{b="req"+b+"_"||"";try{var U=Wt instanceof Map?Wt:Object.entries(Wt);for(const[fr,Sn]of U){let In=Sn;l(Sn)&&(In=Jl(Sn)),De.push(b+fr+"="+encodeURIComponent(In))}}catch(fr){throw De.push(b+"type="+encodeURIComponent("_badmap")),fr}}catch{y&&y(Wt)}}if(le){U=De.join("&");break e}}U=void 0}return a=a.i.splice(0,d),c.G=a,U}function Bf(a){if(!a.g&&!a.v){a.Y=1;var c=a.Da;M||_(),F||(M(),F=!0),w.add(c,a),a.A=0}}function du(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Hi(h(a.Da,a),Wf(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,$f(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Hi(h(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,it(10),bo(this),$f(this))};function fu(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function $f(a){a.g=new wn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var c=qt(a.na);he(c,"RID","rpc"),he(c,"SID",a.M),he(c,"AID",a.K),he(c,"CI",a.F?"0":"1"),!a.F&&a.ia&&he(c,"TO",a.ia),he(c,"TYPE","xmlhttp"),is(a,c),a.u&&a.o&&cu(c,a.u,a.o),a.O&&(a.g.H=a.O);var d=a.g;a=a.ba,d.M=1,d.A=No(qt(c)),d.u=null,d.R=!0,yf(d,a)}t.Va=function(){this.C!=null&&(this.C=null,bo(this),du(this),it(19))};function jo(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function qf(a,c){var d=null;if(a.g==c){jo(a),fu(a),a.g=null;var y=2}else if(ou(a.h,c))d=c.G,Tf(a.h,c),y=1;else return;if(a.I!=0){if(c.o)if(y==1){d=c.u?c.u.length:0,c=Date.now()-c.F;var D=a.D;y=Ao(),rt(y,new df(y,d)),Mo(a)}else Bf(a);else if(D=c.m,D==3||D==0&&c.X>0||!(y==1&&p1(a,c)||y==2&&du(a)))switch(d&&d.length>0&&(c=a.h,c.i=c.i.concat(d)),D){case 1:dr(a,5);break;case 4:dr(a,10);break;case 3:dr(a,6);break;default:dr(a,2)}}}function Wf(a,c){let d=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(d*=2),d*c}function dr(a,c){if(a.j.info("Error code "+c),c==2){var d=h(a.bb,a),y=a.Ua;const D=!y;y=new En(y||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Yi(y,"https"),No(y),D?l1(y.toString(),d):u1(y.toString(),d)}else it(2);a.I=0,a.l&&a.l.pa(c),Hf(a),Ff(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),it(2)):(this.j.info("Failed to ping google.com"),it(1))};function Hf(a){if(a.I=0,a.ja=[],a.l){const c=Sf(a.h);(c.length!=0||a.i.length!=0)&&(A(a.ja,c),A(a.ja,a.i),a.h.i.length=0,k(a.i),a.i.length=0),a.l.oa()}}function Kf(a,c,d){var y=d instanceof En?qt(d):new En(d);if(y.g!="")c&&(y.g=c+"."+y.g),Xi(y,y.u);else{var D=o.location;y=D.protocol,c=c?c+"."+D.hostname:D.hostname,D=+D.port;const b=new En(null);y&&Yi(b,y),c&&(b.g=c),D&&Xi(b,D),d&&(b.h=d),y=b}return d=a.G,c=a.wa,d&&c&&he(y,d,c),he(y,"VER",a.ka),is(a,y),y}function Qf(a,c,d){if(c&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Aa&&!a.ma?new Ee(new uu({ab:d})):new Ee(a.ma),c.Fa(a.L),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gf(){}t=Gf.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Lo(){}Lo.prototype.g=function(a,c){return new gt(a,c)};function gt(a,c){Ke.call(this),this.g=new Of(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.sa&&(a?a["X-WebChannel-Client-Profile"]=c.sa:a={"X-WebChannel-Client-Profile":c.sa}),this.g.U=a,(a=c&&c.Qb)&&!S(a)&&(this.g.u=a),this.A=c&&c.supportsCrossDomainXhr||!1,this.v=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!S(c)&&(this.g.G=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new Ur(this)}m(gt,Ke),gt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gt.prototype.close=function(){hu(this.g)},gt.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.v&&(d={},d.__data__=Jl(a),a=d);c.i.push(new e1(c.Ya++,a)),c.I==3&&Mo(c)},gt.prototype.N=function(){this.g.l=null,delete this.j,hu(this.g),delete this.g,gt.Z.N.call(this)};function Yf(a){Zl.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const d in c){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}m(Yf,Zl);function Xf(){eu.call(this),this.status=1}m(Xf,eu);function Ur(a){this.g=a}m(Ur,Gf),Ur.prototype.ra=function(){rt(this.g,"a")},Ur.prototype.qa=function(a){rt(this.g,new Yf(a))},Ur.prototype.pa=function(a){rt(this.g,new Xf)},Ur.prototype.oa=function(){rt(this.g,"b")},Lo.prototype.createWebChannel=Lo.prototype.g,gt.prototype.send=gt.prototype.o,gt.prototype.open=gt.prototype.m,gt.prototype.close=gt.prototype.close,x0=function(){return new Lo},E0=function(){return Ao()},w0=ur,ih={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ro.NO_ERROR=0,Ro.TIMEOUT=8,Ro.HTTP_ERROR=6,ka=Ro,ff.COMPLETE="complete",_0=ff,lf.EventType=qi,qi.OPEN="a",qi.CLOSE="b",qi.ERROR="c",qi.MESSAGE="d",Ke.prototype.listen=Ke.prototype.J,Ss=lf,Ee.prototype.listenOnce=Ee.prototype.K,Ee.prototype.getLastError=Ee.prototype.Ha,Ee.prototype.getLastErrorCode=Ee.prototype.ya,Ee.prototype.getStatus=Ee.prototype.ca,Ee.prototype.getResponseJson=Ee.prototype.La,Ee.prototype.getResponseText=Ee.prototype.la,Ee.prototype.send=Ee.prototype.ea,Ee.prototype.setWithCredentials=Ee.prototype.Fa,v0=Ee}).apply(typeof ra<"u"?ra:typeof self<"u"?self:typeof window<"u"?window:{});const Rm="@firebase/firestore",Pm="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xe.UNAUTHENTICATED=new Xe(null),Xe.GOOGLE_CREDENTIALS=new Xe("google-credentials-uid"),Xe.FIRST_PARTY=new Xe("first-party-uid"),Xe.MOCK_USER=new Xe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oi="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=new h0("@firebase/firestore");function $r(){return Vr.logLevel}function $(t,...e){if(Vr.logLevel<=re.DEBUG){const n=e.map(Td);Vr.debug(`Firestore (${Oi}): ${t}`,...n)}}function yn(t,...e){if(Vr.logLevel<=re.ERROR){const n=e.map(Td);Vr.error(`Firestore (${Oi}): ${t}`,...n)}}function Ii(t,...e){if(Vr.logLevel<=re.WARN){const n=e.map(Td);Vr.warn(`Firestore (${Oi}): ${t}`,...n)}}function Td(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,T0(t,r,n)}function T0(t,e,n){let r=`FIRESTORE (${Oi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw yn(r),new Error(r)}function _e(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||T0(e,i,r)}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends Li{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Xe.UNAUTHENTICATED))}shutdown(){}}class MS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class jS{constructor(e){this.t=e,this.currentUser=Xe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new di;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new di,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new di)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string",31837,{l:r}),new S0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string",2055,{h:e}),new Xe(e)}}class LS{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Xe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class OS{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new LS(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Xe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Nm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FS{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_S(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){_e(this.o===void 0,3512);const r=s=>{s.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,$("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Nm(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Nm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=US(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function te(t,e){return t<e?-1:t>e?1:0}function sh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Hu(i)===Hu(s)?te(i,s):Hu(i)?1:-1}return te(t.length,e.length)}const zS=55296,BS=57343;function Hu(t){const e=t.charCodeAt(0);return e>=zS&&e<=BS}function ki(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="__name__";class Xt{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Y(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Xt.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xt?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Xt.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return te(e.length,n.length)}static compareSegments(e,n){const r=Xt.isNumericId(e),i=Xt.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Xt.extractNumericId(e).compare(Xt.extractNumericId(n)):sh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Kn.fromString(e.substring(4,e.length-2))}}class ue extends Xt{construct(e,n,r){return new ue(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new B(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ue(n)}static emptyPath(){return new ue([])}}const $S=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class et extends Xt{construct(e,n,r){return new et(e,n,r)}static isValidIdentifier(e){return $S.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Vm}static keyField(){return new et([Vm])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new B(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new B(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new B(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new et(n)}static emptyPath(){return new et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(ue.fromString(e))}static fromName(e){return new Q(ue.fromString(e).popFirst(5))}static empty(){return new Q(ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new ue(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(t,e,n){if(!n)throw new B(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function qS(t,e,n,r){if(e===!0&&r===!0)throw new B(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Dm(t){if(!Q.isDocumentKey(t))throw new B(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function bm(t){if(Q.isDocumentKey(t))throw new B(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function k0(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Dl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y(12329,{type:typeof t})}function Ca(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Dl(t);throw new B(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function WS(t,e){if(e<=0)throw new B(L.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t,e){const n={typeString:t};return e&&(n.value=e),n}function To(t,e){if(!k0(t))throw new B(L.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new B(L.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm=-62135596800,jm=1e6;class fe{static now(){return fe.fromMillis(Date.now())}static fromDate(e){return fe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*jm);return new fe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Mm)throw new B(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jm}_compareTo(e){return this.seconds===e.seconds?te(this.nanoseconds,e.nanoseconds):te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:fe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(To(e,fe._jsonSchema))return new fe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Mm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}fe._jsonSchemaVersion="firestore/timestamp/1.0",fe._jsonSchema={type:Ne("string",fe._jsonSchemaVersion),seconds:Ne("number"),nanoseconds:Ne("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{static fromTimestamp(e){return new G(e)}static min(){return new G(new fe(0,0))}static max(){return new G(new fe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=-1;function HS(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=G.fromTimestamp(r===1e9?new fe(n+1,0):new fe(n,r));return new Xn(i,Q.empty(),e)}function KS(t){return new Xn(t.readTime,t.key,ho)}class Xn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Xn(G.min(),Q.empty(),ho)}static max(){return new Xn(G.max(),Q.empty(),ho)}}function QS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:te(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==GS)throw t;$("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,r)=>{n(e)})}static reject(e){return new j((n,r)=>{r(e)})}static waitFor(e){return new j((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=j.resolve(!1);for(const r of e)n=n.next(i=>i?j.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new j((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(p=>{o[h]=p,++l,l===s&&r(o)},p=>i(p))}})}static doWhile(e,n){return new j((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function XS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ml.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS=-1;function jl(t){return t==null}function al(t){return t===0&&1/t==-1/0}function ZS(t){return typeof t=="number"&&Number.isInteger(t)&&!al(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="";function eI(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Lm(e)),e=tI(t.get(n),e);return Lm(e)}function tI(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case C0:n+="";break;default:n+=s}}return n}function Lm(t){return t+C0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ui(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function A0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e,n){this.comparator=e,this.root=n||$e.EMPTY}insert(e,n){return new Ce(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$e.BLACK,null,null))}remove(e){return new Ce(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$e.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ia(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ia(this.root,e,this.comparator,!1)}getReverseIterator(){return new ia(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ia(this.root,e,this.comparator,!0)}}class ia{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $e{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??$e.RED,this.left=i??$e.EMPTY,this.right=s??$e.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new $e(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return $e.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return $e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$e.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Y(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Y(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Y(27949);return e+(this.isRed()?0:1)}}$e.EMPTY=null,$e.RED=!0,$e.BLACK=!1;$e.EMPTY=new class{constructor(){this.size=0}get key(){throw Y(57766)}get value(){throw Y(16141)}get color(){throw Y(16727)}get left(){throw Y(29726)}get right(){throw Y(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new $e(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.comparator=e,this.data=new Ce(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Fm(this.data.getIterator())}getIteratorFrom(e){return new Fm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Le)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Le(this.comparator);return n.data=e,n}}class Fm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.fields=e,e.sort(et.comparator)}static empty(){return new bn([])}unionWith(e){let n=new Le(et.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new bn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ki(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new R0("Invalid base64 string: "+s):s}}(e);return new He(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new He(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}He.EMPTY_BYTE_STRING=new He("");const nI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jn(t){if(_e(!!t,39018),typeof t=="string"){let e=0;const n=nI.exec(t);if(_e(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ie(t.seconds),nanos:Ie(t.nanos)}}function Ie(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zn(t){return typeof t=="string"?He.fromBase64String(t):He.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="server_timestamp",N0="__type__",V0="__previous_value__",D0="__local_write_time__";function Id(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[N0])==null?void 0:r.stringValue)===P0}function Ll(t){const e=t.mapValue.fields[V0];return Id(e)?Ll(e):e}function fo(t){const e=Jn(t.mapValue.fields[D0].timestampValue);return new fe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,n,r,i,s,o,l,u,h,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=p}}const ll="(default)";class po{constructor(e,n){this.projectId=e,this.database=n||ll}static empty(){return new po("","")}get isDefaultDatabase(){return this.database===ll}isEqual(e){return e instanceof po&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="__type__",iI="__max__",sa={mapValue:{}},M0="__vector__",ul="value";function er(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Id(t)?4:oI(t)?9007199254740991:sI(t)?10:11:Y(28295,{value:t})}function on(t,e){if(t===e)return!0;const n=er(t);if(n!==er(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return fo(t).isEqual(fo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Jn(i.timestampValue),l=Jn(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Zn(i.bytesValue).isEqual(Zn(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ie(i.geoPointValue.latitude)===Ie(s.geoPointValue.latitude)&&Ie(i.geoPointValue.longitude)===Ie(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ie(i.integerValue)===Ie(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ie(i.doubleValue),l=Ie(s.doubleValue);return o===l?al(o)===al(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return ki(t.arrayValue.values||[],e.arrayValue.values||[],on);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(Om(o)!==Om(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!on(o[u],l[u])))return!1;return!0}(t,e);default:return Y(52216,{left:t})}}function mo(t,e){return(t.values||[]).find(n=>on(n,e))!==void 0}function Ci(t,e){if(t===e)return 0;const n=er(t),r=er(e);if(n!==r)return te(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return te(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Ie(s.integerValue||s.doubleValue),u=Ie(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Um(t.timestampValue,e.timestampValue);case 4:return Um(fo(t),fo(e));case 5:return sh(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Zn(s),u=Zn(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const p=te(l[h],u[h]);if(p!==0)return p}return te(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=te(Ie(s.latitude),Ie(o.latitude));return l!==0?l:te(Ie(s.longitude),Ie(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return zm(t.arrayValue,e.arrayValue);case 10:return function(s,o){var g,k,A,R;const l=s.fields||{},u=o.fields||{},h=(g=l[ul])==null?void 0:g.arrayValue,p=(k=u[ul])==null?void 0:k.arrayValue,m=te(((A=h==null?void 0:h.values)==null?void 0:A.length)||0,((R=p==null?void 0:p.values)==null?void 0:R.length)||0);return m!==0?m:zm(h,p)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===sa.mapValue&&o===sa.mapValue)return 0;if(s===sa.mapValue)return 1;if(o===sa.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=o.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){const g=sh(u[m],p[m]);if(g!==0)return g;const k=Ci(l[u[m]],h[p[m]]);if(k!==0)return k}return te(u.length,p.length)}(t.mapValue,e.mapValue);default:throw Y(23264,{he:n})}}function Um(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return te(t,e);const n=Jn(t),r=Jn(e),i=te(n.seconds,r.seconds);return i!==0?i:te(n.nanos,r.nanos)}function zm(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ci(n[i],r[i]);if(s)return s}return te(n.length,r.length)}function Ai(t){return oh(t)}function oh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Jn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Zn(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=oh(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${oh(n.fields[o])}`;return i+"}"}(t.mapValue):Y(61005,{value:t})}function Aa(t){switch(er(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ll(t);return e?16+Aa(e):16;case 5:return 2*t.stringValue.length;case 6:return Zn(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Aa(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ui(r.fields,(s,o)=>{i+=s.length+Aa(o)}),i}(t.mapValue);default:throw Y(13486,{value:t})}}function Bm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ah(t){return!!t&&"integerValue"in t}function kd(t){return!!t&&"arrayValue"in t}function $m(t){return!!t&&"nullValue"in t}function qm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ku(t){return!!t&&"mapValue"in t}function sI(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[b0])==null?void 0:r.stringValue)===M0}function Os(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ui(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Os(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Os(t.arrayValue.values[n]);return e}return{...t}}function oI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===iI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.value=e}static empty(){return new Zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ku(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Os(n)}setAll(e){let n=et.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=Os(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Ku(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return on(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ku(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ui(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Zt(Os(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Ze(e,0,G.min(),G.min(),G.min(),Zt.empty(),0)}static newFoundDocument(e,n,r,i){return new Ze(e,1,n,G.min(),r,i,0)}static newNoDocument(e,n){return new Ze(e,2,n,G.min(),G.min(),Zt.empty(),0)}static newUnknownDocument(e,n){return new Ze(e,3,n,G.min(),G.min(),Zt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(G.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=G.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ze&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ze(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,n){this.position=e,this.inclusive=n}}function Wm(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Q.comparator(Q.fromName(o.referenceValue),n.key):r=Ci(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Hm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!on(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n="asc"){this.field=e,this.dir=n}}function aI(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{}class Pe extends j0{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new uI(e,n,r):n==="array-contains"?new dI(e,r):n==="in"?new fI(e,r):n==="not-in"?new pI(e,r):n==="array-contains-any"?new mI(e,r):new Pe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new cI(e,r):new hI(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ci(n,this.value)):n!==null&&er(this.value)===er(n)&&this.matchesComparison(Ci(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $t extends j0{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new $t(e,n)}matches(e){return L0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function L0(t){return t.op==="and"}function O0(t){return lI(t)&&L0(t)}function lI(t){for(const e of t.filters)if(e instanceof $t)return!1;return!0}function lh(t){if(t instanceof Pe)return t.field.canonicalString()+t.op.toString()+Ai(t.value);if(O0(t))return t.filters.map(e=>lh(e)).join(",");{const e=t.filters.map(n=>lh(n)).join(",");return`${t.op}(${e})`}}function F0(t,e){return t instanceof Pe?function(r,i){return i instanceof Pe&&r.op===i.op&&r.field.isEqual(i.field)&&on(r.value,i.value)}(t,e):t instanceof $t?function(r,i){return i instanceof $t&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&F0(o,i.filters[l]),!0):!1}(t,e):void Y(19439)}function U0(t){return t instanceof Pe?function(n){return`${n.field.canonicalString()} ${n.op} ${Ai(n.value)}`}(t):t instanceof $t?function(n){return n.op.toString()+" {"+n.getFilters().map(U0).join(" ,")+"}"}(t):"Filter"}class uI extends Pe{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class cI extends Pe{constructor(e,n){super(e,"in",n),this.keys=z0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class hI extends Pe{constructor(e,n){super(e,"not-in",n),this.keys=z0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function z0(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}class dI extends Pe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return kd(n)&&mo(n.arrayValue,this.value)}}class fI extends Pe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&mo(this.value.arrayValue,n)}}class pI extends Pe{constructor(e,n){super(e,"not-in",n)}matches(e){if(mo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!mo(this.value.arrayValue,n)}}class mI extends Pe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!kd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>mo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.Te=null}}function Km(t,e=null,n=[],r=[],i=null,s=null,o=null){return new gI(t,e,n,r,i,s,o)}function Cd(t){const e=ie(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>lh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),jl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ai(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ai(r)).join(",")),e.Te=n}return e.Te}function Ad(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!aI(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!F0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Hm(t.startAt,e.startAt)&&Hm(t.endAt,e.endAt)}function uh(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function yI(t,e,n,r,i,s,o,l){return new zi(t,e,n,r,i,s,o,l)}function Rd(t){return new zi(t)}function Qm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function B0(t){return t.collectionGroup!==null}function Fs(t){const e=ie(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Le(et.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new go(s,r))}),n.has(et.keyField().canonicalString())||e.Ie.push(new go(et.keyField(),r))}return e.Ie}function nn(t){const e=ie(t);return e.Ee||(e.Ee=vI(e,Fs(t))),e.Ee}function vI(t,e){if(t.limitType==="F")return Km(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new go(i.field,s)});const n=t.endAt?new cl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new cl(t.startAt.position,t.startAt.inclusive):null;return Km(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ch(t,e){const n=t.filters.concat([e]);return new zi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function hl(t,e,n){return new zi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ol(t,e){return Ad(nn(t),nn(e))&&t.limitType===e.limitType}function $0(t){return`${Cd(nn(t))}|lt:${t.limitType}`}function qr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>U0(i)).join(", ")}]`),jl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ai(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ai(i)).join(",")),`Target(${r})`}(nn(t))}; limitType=${t.limitType})`}function Fl(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Fs(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const h=Wm(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,Fs(r),i)||r.endAt&&!function(o,l,u){const h=Wm(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,Fs(r),i))}(t,e)}function _I(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function q0(t){return(e,n)=>{let r=!1;for(const i of Fs(t)){const s=wI(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function wI(t,e,n){const r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),h=l.data.field(s);return u!==null&&h!==null?Ci(u,h):Y(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ui(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return A0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI=new Ce(Q.comparator);function tr(){return EI}const W0=new Ce(Q.comparator);function Is(...t){let e=W0;for(const n of t)e=e.insert(n.key,n);return e}function xI(t){let e=W0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function xr(){return Us()}function H0(){return Us()}function Us(){return new Lr(t=>t.toString(),(t,e)=>t.isEqual(e))}const TI=new Le(Q.comparator);function se(...t){let e=TI;for(const n of t)e=e.add(n);return e}const SI=new Le(te);function II(){return SI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pd(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:al(e)?"-0":e}}function K0(t){return{integerValue:""+t}}function kI(t,e){return ZS(e)?K0(e):Pd(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(){this._=void 0}}function CI(t,e,n){return t instanceof hh?function(i,s){const o={fields:{[N0]:{stringValue:P0},[D0]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Id(s)&&(s=Ll(s)),s&&(o.fields[V0]=s),{mapValue:o}}(n,e):t instanceof dl?Q0(t,e):t instanceof fl?G0(t,e):function(i,s){const o=RI(i,s),l=Gm(o)+Gm(i.Ae);return ah(o)&&ah(i.Ae)?K0(l):Pd(i.serializer,l)}(t,e)}function AI(t,e,n){return t instanceof dl?Q0(t,e):t instanceof fl?G0(t,e):n}function RI(t,e){return t instanceof dh?function(r){return ah(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class hh extends Ul{}class dl extends Ul{constructor(e){super(),this.elements=e}}function Q0(t,e){const n=Y0(e);for(const r of t.elements)n.some(i=>on(i,r))||n.push(r);return{arrayValue:{values:n}}}class fl extends Ul{constructor(e){super(),this.elements=e}}function G0(t,e){let n=Y0(e);for(const r of t.elements)n=n.filter(i=>!on(i,r));return{arrayValue:{values:n}}}class dh extends Ul{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Gm(t){return Ie(t.integerValue||t.doubleValue)}function Y0(t){return kd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function PI(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof dl&&i instanceof dl||r instanceof fl&&i instanceof fl?ki(r.elements,i.elements,on):r instanceof dh&&i instanceof dh?on(r.Ae,i.Ae):r instanceof hh&&i instanceof hh}(t.transform,e.transform)}class Ir{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ir}static exists(e){return new Ir(void 0,e)}static updateTime(e){return new Ir(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ra(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Nd{}function X0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new VI(t.key,Ir.none()):new Vd(t.key,t.data,Ir.none());{const n=t.data,r=Zt.empty();let i=new Le(et.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new zl(t.key,r,new bn(i.toArray()),Ir.none())}}function NI(t,e,n){t instanceof Vd?function(i,s,o){const l=i.value.clone(),u=Xm(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof zl?function(i,s,o){if(!Ra(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Xm(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(J0(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function zs(t,e,n,r){return t instanceof Vd?function(s,o,l,u){if(!Ra(s.precondition,o))return l;const h=s.value.clone(),p=Jm(s.fieldTransforms,u,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof zl?function(s,o,l,u){if(!Ra(s.precondition,o))return l;const h=Jm(s.fieldTransforms,u,o),p=o.data;return p.setAll(J0(s)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,o,l){return Ra(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function Ym(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ki(r,i,(s,o)=>PI(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Vd extends Nd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class zl extends Nd{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function J0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Xm(t,e,n){const r=new Map;_e(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,AI(o,l,n[i]))}return r}function Jm(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,CI(s,o,e))}return r}class VI extends Nd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&NI(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=zs(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=zs(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=H0();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=X0(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(G.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&ki(this.mutations,e.mutations,(n,r)=>Ym(n,r))&&ki(this.baseMutations,e.baseMutations,(n,r)=>Ym(n,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae,ne;function Z0(t){if(t===void 0)return yn("GRPC error has no .code"),L.UNKNOWN;switch(t){case Ae.OK:return L.OK;case Ae.CANCELLED:return L.CANCELLED;case Ae.UNKNOWN:return L.UNKNOWN;case Ae.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Ae.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Ae.INTERNAL:return L.INTERNAL;case Ae.UNAVAILABLE:return L.UNAVAILABLE;case Ae.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Ae.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Ae.NOT_FOUND:return L.NOT_FOUND;case Ae.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Ae.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Ae.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Ae.ABORTED:return L.ABORTED;case Ae.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Ae.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Ae.DATA_LOSS:return L.DATA_LOSS;default:return Y(39323,{code:t})}}(ne=Ae||(Ae={}))[ne.OK=0]="OK",ne[ne.CANCELLED=1]="CANCELLED",ne[ne.UNKNOWN=2]="UNKNOWN",ne[ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ne[ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ne[ne.NOT_FOUND=5]="NOT_FOUND",ne[ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",ne[ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",ne[ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",ne[ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ne[ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ne[ne.ABORTED=10]="ABORTED",ne[ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",ne[ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",ne[ne.INTERNAL=13]="INTERNAL",ne[ne.UNAVAILABLE=14]="UNAVAILABLE",ne[ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI=new Kn([4294967295,4294967295],0);function Zm(t){const e=jI().encode(t),n=new y0;return n.update(e),new Uint8Array(n.digest())}function eg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Kn([n,r],0),new Kn([i,s],0)]}class Dd{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ks(`Invalid padding: ${n}`);if(r<0)throw new ks(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ks(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ks(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Kn.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Kn.fromNumber(r)));return i.compare(LI)===1&&(i=new Kn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Zm(e),[r,i]=eg(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Dd(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=Zm(e),[r,i]=eg(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ks extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,So.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Bl(G.min(),i,new Ce(te),tr(),se())}}class So{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new So(r,n,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class e_{constructor(e,n){this.targetId=e,this.Ce=n}}class t_{constructor(e,n,r=He.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class tg{constructor(){this.ve=0,this.Fe=ng(),this.Me=He.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=se(),n=se(),r=se();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Y(38017,{changeType:s})}}),new So(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=ng()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,_e(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class OI{constructor(e){this.Ge=e,this.ze=new Map,this.je=tr(),this.Je=oa(),this.He=oa(),this.Ye=new Ce(te)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Y(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(uh(s))if(r===0){const o=new Q(s.path);this.et(n,o,Ze.newNoDocument(o,G.min()))}else _e(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),u=l?this.ct(l,e,o):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=Zn(r).toUint8Array()}catch(u){if(u instanceof R0)return Ii("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Dd(o,i,s)}catch(u){return Ii(u instanceof ks?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const l=this.ot(o);if(l){if(s.current&&uh(l.target)){const u=new Q(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,Ze.newNoDocument(u,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=se();this.He.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new Bl(e,n,this.Ye,this.je,r);return this.je=tr(),this.Je=oa(),this.He=oa(),this.Ye=new Ce(te),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new tg,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Le(te),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Le(te),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new tg),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function oa(){return new Ce(Q.comparator)}function ng(){return new Ce(Q.comparator)}const FI={asc:"ASCENDING",desc:"DESCENDING"},UI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zI={and:"AND",or:"OR"};class BI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function fh(t,e){return t.useProto3Json||jl(e)?e:{value:e}}function ph(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function n_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function fi(t){return _e(!!t,49232),G.fromTimestamp(function(n){const r=Jn(n);return new fe(r.seconds,r.nanos)}(t))}function r_(t,e){return mh(t,e).canonicalString()}function mh(t,e){const n=function(i){return new ue(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function i_(t){const e=ue.fromString(t);return _e(u_(e),10190,{key:e.toString()}),e}function Qu(t,e){const n=i_(e);if(n.get(1)!==t.databaseId.projectId)throw new B(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(o_(n))}function s_(t,e){return r_(t.databaseId,e)}function $I(t){const e=i_(t);return e.length===4?ue.emptyPath():o_(e)}function rg(t){return new ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function o_(t){return _e(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function qI(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Y(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,p){return h.useProto3Json?(_e(p===void 0||typeof p=="string",58123),He.fromBase64String(p||"")):(_e(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),He.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const p=h.code===void 0?L.UNKNOWN:Z0(h.code);return new B(p,h.message||"")}(o);n=new t_(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Qu(t,r.document.name),s=fi(r.document.updateTime),o=r.document.createTime?fi(r.document.createTime):G.min(),l=new Zt({mapValue:{fields:r.document.fields}}),u=Ze.newFoundDocument(i,s,o,l),h=r.targetIds||[],p=r.removedTargetIds||[];n=new Pa(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Qu(t,r.document),s=r.readTime?fi(r.readTime):G.min(),o=Ze.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Pa([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Qu(t,r.document),s=r.removedTargetIds||[];n=new Pa([],s,i,null)}else{if(!("filter"in e))return Y(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new MI(i,s),l=r.targetId;n=new e_(l,o)}}return n}function WI(t,e){return{documents:[s_(t,e.path)]}}function HI(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=s_(t,i);const s=function(h){if(h.length!==0)return l_($t.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(p=>function(g){return{field:Wr(g.field),direction:GI(g.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=fh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:i}}function KI(t){let e=$I(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){_e(r===1,65062);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(m){const g=a_(m);return g instanceof $t&&O0(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(A){return new go(Hr(A.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,jl(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,k=m.values||[];return new cl(k,g)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const g=!m.before,k=m.values||[];return new cl(k,g)}(n.endAt)),yI(e,i,o,s,l,"F",u,h)}function QI(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function a_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Hr(n.unaryFilter.field);return Pe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Hr(n.unaryFilter.field);return Pe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Hr(n.unaryFilter.field);return Pe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Hr(n.unaryFilter.field);return Pe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Y(61313);default:return Y(60726)}}(t):t.fieldFilter!==void 0?function(n){return Pe.create(Hr(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Y(58110);default:return Y(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return $t.create(n.compositeFilter.filters.map(r=>a_(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y(1026)}}(n.compositeFilter.op))}(t):Y(30097,{filter:t})}function GI(t){return FI[t]}function YI(t){return UI[t]}function XI(t){return zI[t]}function Wr(t){return{fieldPath:t.canonicalString()}}function Hr(t){return et.fromServerFormat(t.fieldPath)}function l_(t){return t instanceof Pe?function(n){if(n.op==="=="){if(qm(n.value))return{unaryFilter:{field:Wr(n.field),op:"IS_NAN"}};if($m(n.value))return{unaryFilter:{field:Wr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(qm(n.value))return{unaryFilter:{field:Wr(n.field),op:"IS_NOT_NAN"}};if($m(n.value))return{unaryFilter:{field:Wr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wr(n.field),op:YI(n.op),value:n.value}}}(t):t instanceof $t?function(n){const r=n.getFilters().map(i=>l_(i));return r.length===1?r[0]:{compositeFilter:{op:XI(n.op),filters:r}}}(t):Y(54877,{filter:t})}function u_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,n,r,i,s=G.min(),o=G.min(),l=He.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Mn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Mn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Mn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Mn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e){this.yt=e}}function ZI(t){const e=KI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?hl(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(){this.Cn=new t2}addToCollectionParentIndex(e,n){return this.Cn.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(Xn.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(Xn.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class t2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Le(ue.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Le(ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},c_=41943040;class ct{static withCacheSize(e){return new ct(e,ct.DEFAULT_COLLECTION_PERCENTILE,ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ct.DEFAULT_COLLECTION_PERCENTILE=10,ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ct.DEFAULT=new ct(c_,ct.DEFAULT_COLLECTION_PERCENTILE,ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ct.DISABLED=new ct(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ri(0)}static cr(){return new Ri(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg="LruGarbageCollector",n2=1048576;function og([t,e],[n,r]){const i=te(t,n);return i===0?te(e,r):i}class r2{constructor(e){this.Ir=e,this.buffer=new Le(og),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();og(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class i2{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){$(sg,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Fi(n)?$(sg,"Ignoring IndexedDB error during garbage collection: ",n):await bl(n)}await this.Vr(3e5)})}}class s2{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return j.resolve(Ml.ce);const r=new r2(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(ig)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ig):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,l,u,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(s=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(h=Date.now(),$r()<=re.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(h-u)+`ms
Total Duration: ${h-p}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}function o2(t,e){return new s2(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(){this.changes=new Lr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ze.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&zs(r.mutation,i,bn.empty(),fe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){const i=xr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Is();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=xr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=tr();const o=Us(),l=function(){return Us()}();return n.forEach((u,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof zl)?s=s.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),zs(p.mutation,h,p.mutation.getFieldMask(),fe.now())):o.set(h.key,bn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>l.set(h,new l2(p,o.get(h)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Us();let i=new Ce((o,l)=>o-l),s=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let p=r.get(u)||bn.empty();p=l.applyToLocalView(h,p),r.set(u,p);const m=(i.get(l.batchId)||se()).add(u);i=i.insert(l.batchId,m)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,p=u.value,m=H0();p.forEach(g=>{if(!s.has(g)){const k=X0(n.get(g),r.get(g));k!==null&&m.set(g,k),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return j.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):B0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):j.resolve(xr());let l=ho,u=s;return o.next(h=>j.forEach(h,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(p)?j.resolve():this.remoteDocumentCache.getEntry(e,p).next(g=>{u=u.insert(p,g)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,se())).next(p=>({batchId:l,changes:xI(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let i=Is();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Is();return this.indexManager.getCollectionParents(e,s).next(l=>j.forEach(l,u=>{const h=function(m,g){return new zi(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(p=>{p.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,Ze.newInvalidDocument(p)))});let l=Is();return o.forEach((u,h)=>{const p=s.get(u);p!==void 0&&zs(p.mutation,h,bn.empty(),fe.now()),Fl(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return j.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:fi(i.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:ZI(i.bundledQuery),readTime:fi(i.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(){this.overlays=new Ce(Q.comparator),this.qr=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const r=xr();return j.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),j.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){const i=xr(),s=n.length+1,o=new Q(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return j.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ce((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=s.get(h.largestBatchId);p===null&&(p=xr(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=xr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=i)););return j.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new bI(n,r));let s=this.qr.get(n);s===void 0&&(s=se(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(){this.sessionToken=He.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(){this.Qr=new Le(Fe.$r),this.Ur=new Le(Fe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Fe(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Fe(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Q(new ue([])),r=new Fe(n,e),i=new Fe(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Q(new ue([])),r=new Fe(n,e),i=new Fe(n,e+1);let s=se();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Fe(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Fe{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Q.comparator(e.key,n.key)||te(e.Yr,n.Yr)}static Kr(e,n){return te(e.Yr,n.Yr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Le(Fe.$r)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new DI(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.Zr=this.Zr.add(new Fe(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return j.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?JS:this.tr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Fe(n,0),i=new Fe(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const l=this.Xr(o.Yr);s.push(l)}),j.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Le(te);return n.forEach(i=>{const s=new Fe(i,0),o=new Fe(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],l=>{r=r.add(l.Yr)})}),j.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Q.isDocumentKey(s)||(s=s.child(""));const o=new Fe(new Q(s),0);let l=new Le(te);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.Yr)),!0)},o),j.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){_e(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return j.forEach(n.mutations,i=>{const s=new Fe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Fe(n,0),i=this.Zr.firstAfterOrEqual(r);return j.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e){this.ri=e,this.docs=function(){return new Ce(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():Ze.newInvalidDocument(n))}getEntries(e,n){let r=tr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ze.newInvalidDocument(i))}),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=tr();const o=n.path,l=new Q(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||QS(KS(p),r)<=0||(i.has(p.key)||Fl(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return j.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Y(9500)}ii(e,n){return j.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new m2(this)}getSize(e){return j.resolve(this.size)}}class m2 extends a2{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),j.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e){this.persistence=e,this.si=new Lr(n=>Cd(n),Ad),this.lastRemoteSnapshotVersion=G.min(),this.highestTargetId=0,this.oi=0,this._i=new bd,this.targetCount=0,this.ai=Ri.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),j.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ri(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Pr(n),j.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),j.waitFor(s).next(()=>i)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),j.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),j.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ml(0),this.li=!1,this.li=!0,this.hi=new d2,this.referenceDelegate=e(this),this.Pi=new g2(this),this.indexManager=new e2,this.remoteDocumentCache=function(i){return new p2(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new JI(n),this.Ii=new c2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new h2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new f2(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){$("MemoryPersistence","Starting transaction:",e);const i=new y2(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return j.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class y2 extends YS{constructor(e){super(),this.currentSequenceNumber=e}}class Md{constructor(e){this.persistence=e,this.Ri=new bd,this.Vi=null}static mi(e){return new Md(e)}get fi(){if(this.Vi)return this.Vi;throw Y(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),j.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.fi,r=>{const i=Q.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,G.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return j.or([()=>j.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class pl{constructor(e,n){this.persistence=e,this.pi=new Lr(r=>eI(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=o2(this,n)}static mi(e,n){return new pl(e,n)}Ei(){}di(e){return j.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return j.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?j.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,s.removeEntry(o,G.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),j.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),j.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Aa(e.data.value)),n}br(e,n,r){return j.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return j.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=se(),i=se();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new jd(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return gT()?8:XS(pT())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new v2;return this.Ss(e,n,o).next(l=>{if(s.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?($r()<=re.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",qr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),j.resolve()):($r()<=re.DEBUG&&$("QueryEngine","Query:",qr(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?($r()<=re.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",qr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nn(n))):j.resolve())}ys(e,n){if(Qm(n))return j.resolve(null);let r=nn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=hl(n,null,"F"),r=nn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=se(...s);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,o,u.readTime)?this.ys(e,hl(n,null,"F")):this.vs(e,h,n,u)}))})))}ws(e,n,r,i){return Qm(n)||i.isEqual(G.min())?j.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?j.resolve(null):($r()<=re.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qr(n)),this.vs(e,o,n,HS(i,ho)).next(l=>l))})}Ds(e,n){let r=new Le(q0(e));return n.forEach((i,s)=>{Fl(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return $r()<=re.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",qr(n)),this.ps.getDocumentsMatchingQuery(e,n,Xn.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld="LocalStore",w2=3e8;class E2{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Ce(te),this.xs=new Lr(s=>Cd(s),Ad),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new u2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function x2(t,e,n,r){return new E2(t,e,n,r)}async function d_(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=se();for(const h of i){o.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of s){l.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Ls:h,removedBatchIds:o,addedBatchIds:l}))})})}function f_(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function T2(t,e){const n=ie(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach((p,m)=>{const g=i.get(m);if(!g)return;l.push(n.Pi.removeMatchingKeys(s,p.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(s,p.addedDocuments,m)));let k=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?k=k.withResumeToken(He.EMPTY_BYTE_STRING,G.min()).withLastLimboFreeSnapshotVersion(G.min()):p.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(p.resumeToken,r)),i=i.insert(m,k),function(R,N,E){return R.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=w2?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(g,k,p)&&l.push(n.Pi.updateTargetData(s,k))});let u=tr(),h=se();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),l.push(S2(s,o,e.documentUpdates).next(p=>{u=p.ks,h=p.qs})),!r.isEqual(G.min())){const p=n.Pi.getLastRemoteSnapshotVersion(s).next(m=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(p)}return j.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.Ms=i,s))}function S2(t,e,n){let r=se(),i=se();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=tr();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(G.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):$(Ld,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:o,qs:i}})}function I2(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,j.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new Mn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function gh(t,e,n){const r=ie(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Fi(o))throw o;$(Ld,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function ag(t,e,n){const r=ie(t);let i=G.min(),s=se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,p){const m=ie(u),g=m.xs.get(p);return g!==void 0?j.resolve(m.Ms.get(g)):m.Pi.getTargetData(h,p)}(r,o,nn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:G.min(),n?s:se())).next(l=>(k2(r,_I(e),l),{documents:l,Qs:s})))}function k2(t,e,n){let r=t.Os.get(e)||G.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class lg{constructor(){this.activeTargetIds=II()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class C2{constructor(){this.Mo=new lg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new lg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="ConnectivityMonitor";class cg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){$(ug,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){$(ug,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aa=null;function yh(){return aa===null?aa=function(){return 268435456+Math.round(2147483648*Math.random())}():aa++,"0x"+aa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu="RestConnection",R2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class P2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===ll?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=yh(),l=this.zo(e,n.toUriEncodedString());$(Gu,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,s);const{host:h}=new URL(l),p=Ed(h);return this.Jo(e,l,u,r,p).then(m=>($(Gu,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Ii(Gu,`RPC '${e}' ${o} failed with error: `,m,"url: ",l,"request:",r),m})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Oi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=R2[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ye="WebChannelConnection";class V2 extends P2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=yh();return new Promise((l,u)=>{const h=new v0;h.setWithCredentials(!0),h.listenOnce(_0.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case ka.NO_ERROR:const m=h.getResponseJson();$(Ye,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case ka.TIMEOUT:$(Ye,`RPC '${e}' ${o} timed out`),u(new B(L.DEADLINE_EXCEEDED,"Request time out"));break;case ka.HTTP_ERROR:const g=h.getStatus();if($(Ye,`RPC '${e}' ${o} failed with status:`,g,"response text:",h.getResponseText()),g>0){let k=h.getResponseJson();Array.isArray(k)&&(k=k[0]);const A=k==null?void 0:k.error;if(A&&A.status&&A.message){const R=function(E){const v=E.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(v)>=0?v:L.UNKNOWN}(A.status);u(new B(R,A.message))}else u(new B(L.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new B(L.UNAVAILABLE,"Connection failed."));break;default:Y(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{$(Ye,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(i);$(Ye,`RPC '${e}' ${o} sending request:`,i),h.send(n,"POST",p,r,15)})}T_(e,n,r){const i=yh(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=x0(),l=E0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=s.join("");$(Ye,`Creating RPC '${e}' stream ${i}: ${p}`,u);const m=o.createWebChannel(p,u);this.I_(m);let g=!1,k=!1;const A=new N2({Yo:N=>{k?$(Ye,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(g||($(Ye,`Opening RPC '${e}' stream ${i} transport.`),m.open(),g=!0),$(Ye,`RPC '${e}' stream ${i} sending:`,N),m.send(N))},Zo:()=>m.close()}),R=(N,E,v)=>{N.listen(E,x=>{try{v(x)}catch(P){setTimeout(()=>{throw P},0)}})};return R(m,Ss.EventType.OPEN,()=>{k||($(Ye,`RPC '${e}' stream ${i} transport opened.`),A.o_())}),R(m,Ss.EventType.CLOSE,()=>{k||(k=!0,$(Ye,`RPC '${e}' stream ${i} transport closed`),A.a_(),this.E_(m))}),R(m,Ss.EventType.ERROR,N=>{k||(k=!0,Ii(Ye,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),A.a_(new B(L.UNAVAILABLE,"The operation could not be completed")))}),R(m,Ss.EventType.MESSAGE,N=>{var E;if(!k){const v=N.data[0];_e(!!v,16349);const x=v,P=(x==null?void 0:x.error)||((E=x[0])==null?void 0:E.error);if(P){$(Ye,`RPC '${e}' stream ${i} received error:`,P);const M=P.status;let F=function(T){const I=Ae[T];if(I!==void 0)return Z0(I)}(M),w=P.message;F===void 0&&(F=L.INTERNAL,w="Unknown error status: "+M+" with message "+P.message),k=!0,A.a_(new B(F,w)),m.close()}else $(Ye,`RPC '${e}' stream ${i} received:`,v),A.u_(v)}}),R(l,w0.STAT_EVENT,N=>{N.stat===ih.PROXY?$(Ye,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===ih.NOPROXY&&$(Ye,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.__()},0),A}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Yu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(t){return new BI(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&$("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg="PersistentStream";class D2{constructor(e,n,r,i,s,o,l,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new p_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(yn(n.toString()),yn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new B(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return $(hg,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():($(hg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class b2 extends D2{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=qI(this.serializer,e),r=function(s){if(!("targetChange"in s))return G.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?G.min():o.readTime?fi(o.readTime):G.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=rg(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=uh(u)?{documents:WI(s,u)}:{query:HI(s,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=n_(s,o.resumeToken);const h=fh(s,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(G.min())>0){l.readTime=ph(s,o.snapshotVersion.toTimestamp());const h=fh(s,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=QI(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=rg(this.serializer),n.removeTarget=e,this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{}class j2 extends M2{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new B(L.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,mh(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(L.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,mh(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(L.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class L2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(yn(n),this.aa=!1):$("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi="RemoteStore";class O2{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{ko(this)&&($(Pi,"Restarting streams for network reachability change."),await async function(u){const h=ie(u);h.Ea.add(4),await Io(h),h.Ra.set("Unknown"),h.Ea.delete(4),await ql(h)}(this))})}),this.Ra=new L2(r,i)}}async function ql(t){if(ko(t))for(const e of t.da)await e(!0)}async function Io(t){for(const e of t.da)await e(!1)}function m_(t,e){const n=ie(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),zd(n)?Ud(n):Bi(n).O_()&&Fd(n,e))}function Od(t,e){const n=ie(t),r=Bi(n);n.Ia.delete(e),r.O_()&&g_(n,e),n.Ia.size===0&&(r.O_()?r.L_():ko(n)&&n.Ra.set("Unknown"))}function Fd(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(G.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Bi(t).Y_(e)}function g_(t,e){t.Va.Ue(e),Bi(t).Z_(e)}function Ud(t){t.Va=new OI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Bi(t).start(),t.Ra.ua()}function zd(t){return ko(t)&&!Bi(t).x_()&&t.Ia.size>0}function ko(t){return ie(t).Ea.size===0}function y_(t){t.Va=void 0}async function F2(t){t.Ra.set("Online")}async function U2(t){t.Ia.forEach((e,n)=>{Fd(t,e)})}async function z2(t,e){y_(t),zd(t)?(t.Ra.ha(e),Ud(t)):t.Ra.set("Unknown")}async function B2(t,e,n){if(t.Ra.set("Online"),e instanceof t_&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ia.delete(l),i.Va.removeTarget(l))}(t,e)}catch(r){$(Pi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await dg(t,r)}else if(e instanceof Pa?t.Va.Ze(e):e instanceof e_?t.Va.st(e):t.Va.tt(e),!n.isEqual(G.min()))try{const r=await f_(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Va.Tt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=s.Ia.get(h);p&&s.Ia.set(h,p.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const p=s.Ia.get(u);if(!p)return;s.Ia.set(u,p.withResumeToken(He.EMPTY_BYTE_STRING,p.snapshotVersion)),g_(s,u);const m=new Mn(p.target,u,h,p.sequenceNumber);Fd(s,m)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){$(Pi,"Failed to raise snapshot:",r),await dg(t,r)}}async function dg(t,e,n){if(!Fi(e))throw e;t.Ea.add(1),await Io(t),t.Ra.set("Offline"),n||(n=()=>f_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{$(Pi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ql(t)})}async function fg(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),$(Pi,"RemoteStore received new credentials");const r=ko(n);n.Ea.add(3),await Io(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ql(n)}async function $2(t,e){const n=ie(t);e?(n.Ea.delete(2),await ql(n)):e||(n.Ea.add(2),await Io(n),n.Ra.set("Unknown"))}function Bi(t){return t.ma||(t.ma=function(n,r,i){const s=ie(n);return s.sa(),new b2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:F2.bind(null,t),t_:U2.bind(null,t),r_:z2.bind(null,t),H_:B2.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),zd(t)?Ud(t):t.Ra.set("Unknown")):(await t.ma.stop(),y_(t))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new Bd(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function v_(t,e){if(yn("AsyncQueue",`${e}: ${t}`),Fi(t))return new B(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{static emptySet(e){return new pi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=Is(),this.sortedSet=new Ce(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof pi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new pi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(){this.ga=new Ce(Q.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Y(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ni{constructor(e,n,r,i,s,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Ni(e,n,pi.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ol(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class W2{constructor(){this.queries=mg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=ie(n),s=i.queries;i.queries=mg(),s.forEach((o,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new B(L.ABORTED,"Firestore shutting down"))}}function mg(){return new Lr(t=>$0(t),Ol)}async function H2(t,e){const n=ie(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new q2,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=v_(o,`Initialization of query '${qr(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&$d(n)}async function K2(t,e){const n=ie(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Q2(t,e){const n=ie(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.Sa)l.Fa(i)&&(r=!0);o.wa=i}}r&&$d(n)}function G2(t,e,n){const r=ie(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function $d(t){t.Ca.forEach(e=>{e.next()})}var vh,gg;(gg=vh||(vh={})).Ma="default",gg.Cache="cache";class Y2{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ni(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ni.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==vh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e){this.key=e}}class w_{constructor(e){this.key=e}}class X2{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=se(),this.mutatedKeys=se(),this.eu=q0(e),this.tu=new pi(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new pg,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,m)=>{const g=i.get(p),k=Fl(this.query,m)?m:null,A=!!g&&this.mutatedKeys.has(g.key),R=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let N=!1;g&&k?g.data.isEqual(k.data)?A!==R&&(r.track({type:3,doc:k}),N=!0):this.su(g,k)||(r.track({type:2,doc:k}),N=!0,(u&&this.eu(k,u)>0||h&&this.eu(k,h)<0)&&(l=!0)):!g&&k?(r.track({type:0,doc:k}),N=!0):g&&!k&&(r.track({type:1,doc:g}),N=!0,(u||h)&&(l=!0)),N&&(k?(o=o.add(k),s=R?s.add(p):s.delete(p)):(o=o.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{tu:o,iu:r,Cs:l,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((p,m)=>function(k,A){const R=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y(20277,{Rt:N})}};return R(k)-R(A)}(p.type,m.type)||this.eu(p.doc,m.doc)),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,h=u!==this.Za;return this.Za=u,o.length!==0||h?{snapshot:new Ni(this.query,e.tu,s,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new pg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=se(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new w_(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new __(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=se();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ni.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const qd="SyncEngine";class J2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Z2{constructor(e){this.key=e,this.hu=!1}}class ek{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Lr(l=>$0(l),Ol),this.Iu=new Map,this.Eu=new Set,this.du=new Ce(Q.comparator),this.Au=new Map,this.Ru=new bd,this.Vu={},this.mu=new Map,this.fu=Ri.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function tk(t,e,n=!0){const r=I_(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await E_(r,e,n,!0),i}async function nk(t,e){const n=I_(t);await E_(n,e,!0,!1)}async function E_(t,e,n,r){const i=await I2(t.localStore,nn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await rk(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&m_(t.remoteStore,i),l}async function rk(t,e,n,r,i){t.pu=(m,g,k)=>async function(R,N,E,v){let x=N.view.ru(E);x.Cs&&(x=await ag(R.localStore,N.query,!1).then(({documents:w})=>N.view.ru(w,x)));const P=v&&v.targetChanges.get(N.targetId),M=v&&v.targetMismatches.get(N.targetId)!=null,F=N.view.applyChanges(x,R.isPrimaryClient,P,M);return vg(R,N.targetId,F.au),F.snapshot}(t,m,g,k);const s=await ag(t.localStore,e,!0),o=new X2(e,s.Qs),l=o.ru(s.documents),u=So.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(l,t.isPrimaryClient,u);vg(t,n,h.au);const p=new J2(e,n,o);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function ik(t,e,n){const r=ie(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!Ol(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await gh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Od(r.remoteStore,i.targetId),_h(r,i.targetId)}).catch(bl)):(_h(r,i.targetId),await gh(r.localStore,i.targetId,!0))}async function sk(t,e){const n=ie(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Od(n.remoteStore,r.targetId))}async function x_(t,e){const n=ie(t);try{const r=await T2(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(_e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?_e(o.hu,14607):i.removedDocuments.size>0&&(_e(o.hu,42227),o.hu=!1))}),await S_(n,r,e)}catch(r){await bl(r)}}function yg(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const l=o.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=ie(o);u.onlineState=l;let h=!1;u.queries.forEach((p,m)=>{for(const g of m.Sa)g.va(l)&&(h=!0)}),h&&$d(u)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ok(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Ce(Q.comparator);o=o.insert(s,Ze.newNoDocument(s,G.min()));const l=se().add(s),u=new Bl(G.min(),new Map,new Ce(te),o,l);await x_(r,u),r.du=r.du.remove(s),r.Au.delete(e),Wd(r)}else await gh(r.localStore,e,!1).then(()=>_h(r,e,n)).catch(bl)}function _h(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||T_(t,r)})}function T_(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Od(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Wd(t))}function vg(t,e,n){for(const r of n)r instanceof __?(t.Ru.addReference(r.key,e),ak(t,r)):r instanceof w_?($(qd,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||T_(t,r.key)):Y(19791,{wu:r})}function ak(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||($(qd,"New document in limbo: "+n),t.Eu.add(r),Wd(t))}function Wd(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Q(ue.fromString(e)),r=t.fu.next();t.Au.set(r,new Z2(n)),t.du=t.du.insert(n,r),m_(t.remoteStore,new Mn(nn(Rd(n.path)),r,"TargetPurposeLimboResolution",Ml.ce))}}async function S_(t,e,n){const r=ie(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{o.push(r.pu(u,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(h){i.push(h);const m=jd.As(u.targetId,h);s.push(m)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(u,h){const p=ie(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>j.forEach(h,g=>j.forEach(g.Es,k=>p.persistence.referenceDelegate.addReference(m,g.targetId,k)).next(()=>j.forEach(g.ds,k=>p.persistence.referenceDelegate.removeReference(m,g.targetId,k)))))}catch(m){if(!Fi(m))throw m;$(Ld,"Failed to update sequence numbers: "+m)}for(const m of h){const g=m.targetId;if(!m.fromCache){const k=p.Ms.get(g),A=k.snapshotVersion,R=k.withLastLimboFreeSnapshotVersion(A);p.Ms=p.Ms.insert(g,R)}}}(r.localStore,s))}async function lk(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){$(qd,"User change. New user:",e.toKey());const r=await d_(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new B(L.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await S_(n,r.Ls)}}function uk(t,e){const n=ie(t),r=n.Au.get(e);if(r&&r.hu)return se().add(r.key);{let i=se();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const l=n.Tu.get(o);i=i.unionWith(l.view.nu)}return i}}function I_(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=x_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ok.bind(null,e),e.Pu.H_=Q2.bind(null,e.eventManager),e.Pu.yu=G2.bind(null,e.eventManager),e}class ml{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$l(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return x2(this.persistence,new _2,e.initialUser,this.serializer)}Cu(e){return new h_(Md.mi,this.serializer)}Du(e){return new C2}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ml.provider={build:()=>new ml};class ck extends ml{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){_e(this.persistence.referenceDelegate instanceof pl,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new i2(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ct.withCacheSize(this.cacheSizeBytes):ct.DEFAULT;return new h_(r=>pl.mi(r,n),this.serializer)}}class wh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>yg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=lk.bind(null,this.syncEngine),await $2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new W2}()}createDatastore(e){const n=$l(e.databaseInfo.databaseId),r=function(s){return new V2(s)}(e.databaseInfo);return function(s,o,l,u){return new j2(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new O2(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>yg(this.syncEngine,n,0),function(){return cg.v()?new cg:new A2}())}createSyncEngine(e,n){return function(i,s,o,l,u,h,p){const m=new ek(i,s,o,l,u,h);return p&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ie(i);$(Pi,"RemoteStore shutting down."),s.Ea.add(5),await Io(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}wh.provider={build:()=>new wh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):yn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr="FirestoreClient";class dk{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Xe.UNAUTHENTICATED,this.clientId=Sd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{$(nr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>($(nr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=v_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Xu(t,e){t.asyncQueue.verifyOperationInProgress(),$(nr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await d_(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function _g(t,e){t.asyncQueue.verifyOperationInProgress();const n=await fk(t);$(nr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>fg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>fg(e.remoteStore,i)),t._onlineComponents=e}async function fk(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$(nr,"Using user provided OfflineComponentProvider");try{await Xu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===L.FAILED_PRECONDITION||i.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ii("Error using user provided cache. Falling back to memory cache: "+n),await Xu(t,new ml)}}else $(nr,"Using default OfflineComponentProvider"),await Xu(t,new ck(void 0));return t._offlineComponents}async function pk(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($(nr,"Using user provided OnlineComponentProvider"),await _g(t,t._uninitializedComponentsProvider._online)):($(nr,"Using default OnlineComponentProvider"),await _g(t,new wh))),t._onlineComponents}async function wg(t){const e=await pk(t),n=e.eventManager;return n.onListen=tk.bind(null,e.syncEngine),n.onUnlisten=ik.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=nk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=sk.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="firestore.googleapis.com",xg=!0;class Tg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new B(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=C_,this.ssl=xg}else this.host=e.host,this.ssl=e.ssl??xg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=c_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<n2)throw new B(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=k_(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new B(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new B(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new B(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wl{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new bS;switch(r.type){case"firstParty":return new OS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Eg.get(n);r&&($("ComponentProvider","Removing Datastore"),Eg.delete(n),r.terminate())}(this),Promise.resolve()}}function mk(t,e,n,r={}){var h;t=Ca(t,Wl);const i=Ed(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(uT(`https://${l}`),fT("Firestore",!0)),s.host!==C_&&s.host!==l&&Ii("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:i,emulatorOptions:r};if(!il(u,o)&&(t._setSettings(u),r.mockUserToken)){let p,m;if(typeof r.mockUserToken=="string")p=r.mockUserToken,m=Xe.MOCK_USER;else{p=cT(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new B(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Xe(g)}t._authCredentials=new MS(new S0(p,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new or(this.firestore,e,this._query)}}class je{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new je(this.firestore,e,this._key)}toJSON(){return{type:je._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(To(n,je._jsonSchema))return new je(e,r||null,new Q(ue.fromString(n.referencePath)))}}je._jsonSchemaVersion="firestore/documentReference/1.0",je._jsonSchema={type:Ne("string",je._jsonSchemaVersion),referencePath:Ne("string")};class Qn extends or{constructor(e,n,r){super(e,n,Rd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new je(this.firestore,null,new Q(e))}withConverter(e){return new Qn(this.firestore,e,this._path)}}function gk(t,e,...n){if(t=Si(t),I0("collection","path",e),t instanceof Wl){const r=ue.fromString(e,...n);return bm(r),new Qn(t,null,r)}{if(!(t instanceof je||t instanceof Qn))throw new B(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ue.fromString(e,...n));return bm(r),new Qn(t.firestore,null,r)}}function yk(t,e,...n){if(t=Si(t),arguments.length===1&&(e=Sd.newId()),I0("doc","path",e),t instanceof Wl){const r=ue.fromString(e,...n);return Dm(r),new je(t,null,new Q(r))}{if(!(t instanceof je||t instanceof Qn))throw new B(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ue.fromString(e,...n));return Dm(r),new je(t.firestore,t instanceof Qn?t.converter:null,new Q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg="AsyncQueue";class Ig{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new p_(this,"async_queue_retry"),this._c=()=>{const r=Yu();r&&$(Sg,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Yu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Yu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new di;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Fi(e))throw e;$(Sg,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,yn("INTERNAL UNHANDLED ERROR: ",kg(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Bd.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&Y(47125,{Pc:kg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function kg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Eh extends Wl{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Ig,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ig(e),this._firestoreClient=void 0,await e}}}function vk(t,e){const n=typeof t=="object"?t:TS(),r=typeof t=="string"?t:ll,i=vS(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=aT("firestore");s&&mk(i,...s)}return i}function _k(t){if(t._terminated)throw new B(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||wk(t),t._firestoreClient}function wk(t){var r,i,s;const e=t._freezeSettings(),n=function(l,u,h,p){return new rI(l,u,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,k_(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new dk(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ct(He.fromBase64String(e))}catch(n){throw new B(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ct(He.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ct._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(To(e,Ct._jsonSchema))return Ct.fromBase64String(e.bytes)}}Ct._jsonSchemaVersion="firestore/bytes/1.0",Ct._jsonSchema={type:Ne("string",Ct._jsonSchemaVersion),bytes:Ne("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return te(this._lat,e._lat)||te(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:rn._jsonSchemaVersion}}static fromJSON(e){if(To(e,rn._jsonSchema))return new rn(e.latitude,e.longitude)}}rn._jsonSchemaVersion="firestore/geoPoint/1.0",rn._jsonSchema={type:Ne("string",rn._jsonSchemaVersion),latitude:Ne("number"),longitude:Ne("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:sn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(To(e,sn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new sn(e.vectorValues);throw new B(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}sn._jsonSchemaVersion="firestore/vectorValue/1.0",sn._jsonSchema={type:Ne("string",sn._jsonSchemaVersion),vectorValues:Ne("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=/^__.*__$/;function P_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y(40011,{Ac:t})}}class Hd{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Hd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return xh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(P_(this.Ac)&&Ek.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class xk{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||$l(e)}Cc(e,n,r,i=!1){return new Hd({Ac:e,methodName:n,Dc:r,path:et.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tk(t){const e=t._freezeSettings(),n=$l(t._databaseId);return new xk(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Sk(t,e,n,r=!1){return Kd(n,t.Cc(r?4:3,e))}function Kd(t,e){if(N_(t=Si(t)))return kk("Unsupported field value:",e,t),Ik(t,e);if(t instanceof R_)return function(r,i){if(!P_(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=Kd(l,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Si(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kI(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=fe.fromDate(r);return{timestampValue:ph(i.serializer,s)}}if(r instanceof fe){const s=new fe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ph(i.serializer,s)}}if(r instanceof rn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ct)return{bytesValue:n_(i.serializer,r._byteString)};if(r instanceof je){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:r_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof sn)return function(o,l){return{mapValue:{fields:{[b0]:{stringValue:M0},[ul]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return Pd(l.serializer,h)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Dl(r)}`)}(t,e)}function Ik(t,e){const n={};return A0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ui(t,(r,i)=>{const s=Kd(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function N_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof fe||t instanceof rn||t instanceof Ct||t instanceof je||t instanceof R_||t instanceof sn)}function kk(t,e,n){if(!N_(n)||!k0(n)){const r=Dl(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}const Ck=new RegExp("[~\\*/\\[\\]]");function Ak(t,e,n){if(e.search(Ck)>=0)throw xh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new A_(...e.split("."))._internalPath}catch{throw xh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function xh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new B(L.INVALID_ARGUMENT,l+t+u)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Rk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Hl("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Rk extends V_{data(){return super.data()}}function Hl(t,e){return typeof e=="string"?Ak(t,e):e instanceof A_?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qd{}class Gd extends Qd{}function Nk(t,e,...n){let r=[];e instanceof Qd&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Yd).length,l=s.filter(u=>u instanceof Kl).length;if(o>1||o>0&&l>0)throw new B(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Kl extends Gd{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Kl(e,n,r)}_apply(e){const n=this._parse(e);return D_(e._query,n),new or(e.firestore,e.converter,ch(e._query,n))}_parse(e){const n=Tk(e.firestore);return function(s,o,l,u,h,p,m){let g;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new B(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){Rg(m,p);const A=[];for(const R of m)A.push(Ag(u,s,R));g={arrayValue:{values:A}}}else g=Ag(u,s,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||Rg(m,p),g=Sk(l,o,m,p==="in"||p==="not-in");return Pe.create(h,p,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Vk(t,e,n){const r=e,i=Hl("where",t);return Kl._create(i,r,n)}class Yd extends Qd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Yd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:$t.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)D_(o,u),o=ch(o,u)}(e._query,n),new or(e.firestore,e.converter,ch(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Xd extends Gd{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Xd(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new B(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new B(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new go(s,o)}(e._query,this._field,this._direction);return new or(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new zi(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Dk(t,e="asc"){const n=e,r=Hl("orderBy",t);return Xd._create(r,n)}class Jd extends Gd{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Jd(e,n,r)}_apply(e){return new or(e.firestore,e.converter,hl(e._query,this._limit,this._limitType))}}function bk(t){return WS("limit",t),Jd._create("limit",t,"F")}function Ag(t,e,n){if(typeof(n=Si(n))=="string"){if(n==="")throw new B(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!B0(e)&&n.indexOf("/")!==-1)throw new B(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ue.fromString(n));if(!Q.isDocumentKey(r))throw new B(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Bm(t,new Q(r))}if(n instanceof je)return Bm(t,n._key);throw new B(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dl(n)}.`)}function Rg(t,e){if(!Array.isArray(t)||t.length===0)throw new B(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function D_(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Mk{convertValue(e,n="none"){switch(er(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ie(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ui(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[ul].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Ie(o.doubleValue));return new sn(n)}convertGeoPoint(e){return new rn(Ie(e.latitude),Ie(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ll(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(fo(e));default:return null}}convertTimestamp(e){const n=Jn(e);return new fe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ue.fromString(e);_e(u_(r),9688,{name:e});const i=new po(r.get(1),r.get(3)),s=new Q(r.popFirst(5));return i.isEqual(n)||yn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}class Cs{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kr extends V_{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Na(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Hl("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new B(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=kr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}kr._jsonSchemaVersion="firestore/documentSnapshot/1.0",kr._jsonSchema={type:Ne("string",kr._jsonSchemaVersion),bundleSource:Ne("string","DocumentSnapshot"),bundleName:Ne("string"),bundle:Ne("string")};class Na extends kr{data(e={}){return super.data(e)}}class mi{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Cs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Na(this._firestore,this._userDataWriter,r.key,r,new Cs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new Na(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Cs(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Na(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Cs(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),p=o.indexOf(l.doc.key)),{type:jk(l.type),doc:u,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new B(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=mi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Sd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function jk(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y(61501,{type:t})}}mi._jsonSchemaVersion="firestore/querySnapshot/1.0",mi._jsonSchema={type:Ne("string",mi._jsonSchemaVersion),bundleSource:Ne("string","QuerySnapshot"),bundleName:Ne("string"),bundle:Ne("string")};class b_ extends Mk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ct(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new je(this.firestore,null,n)}}function M_(t,...e){var u,h,p;t=Si(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Cg(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Cg(e[r])){const m=e[r];e[r]=(u=m.next)==null?void 0:u.bind(m),e[r+1]=(h=m.error)==null?void 0:h.bind(m),e[r+2]=(p=m.complete)==null?void 0:p.bind(m)}let s,o,l;if(t instanceof je)o=Ca(t.firestore,Eh),l=Rd(t._key.path),s={next:m=>{e[r]&&e[r](Lk(o,t,m))},error:e[r+1],complete:e[r+2]};else{const m=Ca(t,or);o=Ca(m.firestore,Eh),l=m._query;const g=new b_(o);s={next:k=>{e[r]&&e[r](new mi(o,g,m,k))},error:e[r+1],complete:e[r+2]},Pk(t._query)}return function(g,k,A,R){const N=new hk(R),E=new Y2(k,N,A);return g.asyncQueue.enqueueAndForget(async()=>H2(await wg(g),E)),()=>{N.Nu(),g.asyncQueue.enqueueAndForget(async()=>K2(await wg(g),E))}}(_k(o),l,i,s)}function Lk(t,e,n){const r=n.docs.get(e._key),i=new b_(t);return new kr(t,i,e._key,r,new Cs(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Oi=i})(xS),ol(new uo("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Eh(new jS(r.getProvider("auth-internal")),new FS(o,r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new B(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new po(h.options.projectId,p)}(o,i),o);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),hi(Rm,Pm,e),hi(Rm,Pm,"esm2020")})();var Ok="firebase",Fk="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hi(Ok,Fk,"app");const Uk={apiKey:"AIzaSyAbGnz-lsTwWFRbcNeYOX_Z5eb2XGcm7xk",authDomain:"terratrak-f252a.firebaseapp.com",projectId:"terratrak-f252a",storageBucket:"terratrak-f252a.firebasestorage.app",messagingSenderId:"675405963427",appId:"1:675405963427:web:cd0568bfb02abc167c1f16"},zk=p0(Uk),j_=vk(zk),Bk="tt_thresholds",ot={ok:"#10b981",warn:"#f59e0b",alert:"#ef4444"},$k={ok:"bg-emerald-500",warn:"bg-amber-500",alert:"bg-rose-500"},Kt=(t,e,n)=>Math.max(e,Math.min(n,t)),fs=t=>t.length?Number((t.reduce((e,n)=>e+n,0)/t.length).toFixed(1)):0,yr=t=>t.length?Math.min(...t):0,vr=t=>t.length?Math.max(...t):0,qk=96,Qt=(t,e)=>[...t.slice(-95),e],ps=(t,e,n)=>t<e*.95||t>n*1.05?"alert":t<e||t>n?"warn":"ok";function Wk(){const[t,e]=J.useState([]),[n,r]=J.useState([]),[i,s]=J.useState([]),[o,l]=J.useState([]),[u,h]=J.useState([]),[p,m]=J.useState("sim"),[g,k]=J.useState(null);return J.useEffect(()=>{if(t.length)return;const A=[],R=[],N=[],E=[],v=[];let x=48,P=62,M=120,F=55,w=130;for(let _=0;_<qk;_++)x=Kt(x+(Math.random()-.5)*1.1,25,70),P=Kt(P+(Math.random()-.5)*1.3,30,90),M=Kt(M+(Math.random()-.5)*6,30,260),F=Kt(F+(Math.random()-.5)*4,10,150),w=Kt(w+(Math.random()-.5)*6,30,260),A.push(Number(x.toFixed(1))),R.push(Number(P.toFixed(1))),N.push(Math.round(M)),E.push(Math.round(F)),v.push(Math.round(w));e(A),r(R),s(N),l(E),h(v)},[]),J.useEffect(()=>{let A,R=!1;const N=()=>{A||(A=window.setInterval(()=>{const x=Kt((t.at(-1)??48)+(Math.random()-.5)*1,25,70),P=Kt((n.at(-1)??62)+(Math.random()-.5)*1.2,30,90),M=Kt((i.at(-1)??120)+(Math.random()-.5)*6,30,260),F=Kt((o.at(-1)??55)+(Math.random()-.5)*4,10,150),w=Kt((u.at(-1)??130)+(Math.random()-.5)*6,30,260);e(_=>Qt(_,Number(x.toFixed(1)))),r(_=>Qt(_,Number(P.toFixed(1)))),s(_=>Qt(_,Math.round(M))),l(_=>Qt(_,Math.round(F))),h(_=>Qt(_,Math.round(w)))},9e3))};m("sim"),N();const E=yk(j_,"sensor_readings","latest"),v=M_(E,x=>{var V,S,ge,nt,Vt,Dt,z;if(!x.exists())return;const P=x.data(),M=Number((P==null?void 0:P.tempC)??(P==null?void 0:P.temperature)),F=Number((P==null?void 0:P.moisturePct)??(P==null?void 0:P.moisture)),w=Number((V=P==null?void 0:P.npk)==null?void 0:V.n),_=Number((S=P==null?void 0:P.npk)==null?void 0:S.p),T=Number((ge=P==null?void 0:P.npk)==null?void 0:ge.k);if(![M,F,w,_,T].every(H=>Number.isFinite(H)))return;R||(R=!0,m("firebase"),A&&(window.clearInterval(A),A=void 0));const C=((Vt=(nt=x.data())==null?void 0:nt.updatedAt)==null?void 0:Vt.toMillis())||((z=(Dt=x.data())==null?void 0:Dt.timestamp)==null?void 0:z.toMillis())||(x.metadata.hasPendingWrites?void 0:Date.now());C&&k(C),e(H=>Qt(H,Number(M.toFixed(1)))),r(H=>Qt(H,Number(F.toFixed(1)))),s(H=>Qt(H,Math.round(w))),l(H=>Qt(H,Math.round(_))),h(H=>Qt(H,Math.round(T)))},()=>{m("sim"),A||N()});return()=>{v(),A&&window.clearInterval(A)}},[]),{temp:t,moist:n,n:i,p:o,k:u,mode:p,lastUpdate:g}}function Hk(){const t=J.useMemo(()=>{var P,M,F,w,_,T,I,C,V,S,ge,nt,Vt,Dt,z,H;try{const X=localStorage.getItem(Bk);if(X){const K=JSON.parse(X);return{temperature:{min:Number(((P=K==null?void 0:K.temperature)==null?void 0:P.min)??15),max:Number(((M=K==null?void 0:K.temperature)==null?void 0:M.max)??65)},moisture:{min:Number(((F=K==null?void 0:K.moisture)==null?void 0:F.min)??40),max:Number(((w=K==null?void 0:K.moisture)==null?void 0:w.max)??80)},npk:{n:{min:Number(((T=(_=K==null?void 0:K.npk)==null?void 0:_.n)==null?void 0:T.min)??50),max:Number(((C=(I=K==null?void 0:K.npk)==null?void 0:I.n)==null?void 0:C.max)??200)},p:{min:Number(((S=(V=K==null?void 0:K.npk)==null?void 0:V.p)==null?void 0:S.min)??20),max:Number(((nt=(ge=K==null?void 0:K.npk)==null?void 0:ge.p)==null?void 0:nt.max)??100)},k:{min:Number(((Dt=(Vt=K==null?void 0:K.npk)==null?void 0:Vt.k)==null?void 0:Dt.min)??50),max:Number(((H=(z=K==null?void 0:K.npk)==null?void 0:z.k)==null?void 0:H.max)??200)}}}}}catch{}return{temperature:{min:15,max:65},moisture:{min:40,max:80},npk:{n:{min:50,max:200},p:{min:20,max:100},k:{min:50,max:200}}}},[]),{temp:e,moist:n,n:r,p:i,k:s,mode:o,lastUpdate:l}=Wk(),u={temp:{avg:fs(e),min:yr(e),max:vr(e)},moist:{avg:fs(n),min:yr(n),max:vr(n)},npk:{n:{avg:fs(r),min:yr(r),max:vr(r)},p:{avg:fs(i),min:yr(i),max:vr(i)},k:{avg:fs(s),min:yr(s),max:vr(s)}}},h=ps(u.temp.avg,t.temperature.min,t.temperature.max),p=ps(u.moist.avg,t.moisture.min,t.moisture.max),m=ps(u.npk.n.avg,t.npk.n.min,t.npk.n.max),g=ps(u.npk.p.avg,t.npk.p.min,t.npk.p.max),k=ps(u.npk.k.avg,t.npk.k.min,t.npk.k.max),A=["alert","warn","ok"].find(P=>[m,g,k].includes(P))||"ok",R=["alert","warn","ok"].find(P=>[h,p,A].includes(P))||"ok",N=[];h!=="ok"&&N.push({id:"t",level:h,msg:h==="warn"?"Temperature nearing threshold":"Temperature out of range"}),p!=="ok"&&N.push({id:"m",level:p,msg:p==="warn"?"Moisture nearing threshold":"Moisture out of range"}),m!=="ok"&&N.push({id:"n",level:m,msg:m==="warn"?"Nitrogen nearing threshold":"Nitrogen out of range"}),g!=="ok"&&N.push({id:"p",level:g,msg:g==="warn"?"Phosphorus nearing threshold":"Phosphorus out of range"}),k!=="ok"&&N.push({id:"k",level:k,msg:k==="warn"?"Potassium nearing threshold":"Potassium out of range"});const E=["Opt for a moist, wrung-out sponge feeltoo wet limits air flow.","Shred cardboard (carbon) to balance kitchen scraps (nitrogen).","Turn or lift bedding weekly to prevent anaerobic pockets.","Keep nutrients balanced; excess salts can stress the bin.","Small, frequent feedings reduce odor and heating spikes."],[v,x]=J.useState(0);return J.useEffect(()=>{const P=setInterval(()=>x(M=>(M+1)%E.length),8e3);return()=>clearInterval(P)},[]),f.jsxs("div",{className:"space-y-4 animate-fade-in-up",children:[f.jsxs("section",{className:"card card-live relative p-4 md:p-6 overflow-hidden",children:[f.jsx("div",{className:"card-shimmer"}),f.jsx("div",{className:"corner-glow top-[-3rem] right-[-3rem]"}),f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[f.jsxs("div",{className:"flex flex-col gap-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("h1",{className:"text-base md:text-lg font-semibold",children:"Overview (24 Hours)"}),f.jsx("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-semibold border border-[hsl(var(--border))] dark:border-white/10 opacity-80",children:o==="firebase"?"LIVE  Firebase":"SIM"})]}),o==="sim"?f.jsx("p",{className:"mt-1 text-sm text-amber-600 dark:text-amber-400",children:"ESP32 not transmitting data, in simulation mode"}):l&&f.jsxs("p",{className:"mt-1 text-sm text-emerald-600 dark:text-emerald-400",children:["ESP32 transmitted data last ",new Date(l).toLocaleString()]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-sm opacity-80",children:"Overall health"}),f.jsx("span",{className:"px-2.5 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:ot[R]+"22",color:ot[R],border:`1px solid ${ot[R]}44`},children:R==="ok"?"Good":R==="warn"?"Watch":"Attention"})]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4",children:[f.jsxs("section",{className:"lg:col-span-8 space-y-4",children:[f.jsx(Pg,{title:"Temperature",unit:"C",data:u.temp,status:h,gradient:"from-emerald-400/35 via-emerald-400/10 to-emerald-400/0",sparkColor:"#10b981",series:e}),f.jsx(Pg,{title:"Moisture",unit:"%",data:u.moist,status:p,gradient:"from-sky-400/35 via-sky-400/10 to-sky-400/0",sparkColor:"#38bdf8",series:n}),f.jsx(Kk,{data:u.npk,status:A,statuses:{n:m,p:g,k},thresholds:t.npk,series:{n:r,p:i,k:s}})]}),f.jsxs("section",{className:"lg:col-span-4 card card-live relative p-4 md:p-6 overflow-hidden",children:[f.jsx("div",{className:"card-shimmer"}),f.jsx("div",{className:"corner-glow bottom-[-3rem] left-[-3rem]"}),f.jsx("h3",{className:"text-sm md:text-base font-semibold",children:"Active alerts"}),f.jsxs("div",{className:"mt-3 space-y-2",children:[N.length===0&&f.jsx("div",{className:"rounded-lg border border-[hsl(var(--border))] dark:border-white/10 px-3 py-2 text-sm opacity-80",children:"No active alerts. All parameters are within range."}),N.map(P=>f.jsxs("div",{className:"rounded-lg border px-3 py-2 text-sm flex items-center gap-2",style:{borderColor:ot[P.level]+"55",background:ot[P.level]+"10",color:ot[P.level]},children:[f.jsx("span",{className:"w-2 h-2 rounded-full "+$k[P.level]}),f.jsx("span",{className:"font-medium",children:P.msg})]},P.id))]}),f.jsxs("div",{className:"mt-5 border-t border-[hsl(var(--border))] dark:border-white/10 pt-4",children:[f.jsx("h4",{className:"text-sm font-semibold",children:"Vermicomposting tip"}),f.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-200 mt-1 transition-opacity duration-300",children:E[v]}),f.jsxs("div",{className:"mt-2 text-xs flex flex-wrap gap-4 opacity-80",children:[f.jsx(_d,{to:"/about",className:"hover:underline",children:"Learn more"}),f.jsx("a",{href:"https://youtu.be/08GQGQ8U-vI",target:"_blank",rel:"noreferrer",className:"hover:underline",children:"Quick video guide"})]})]})]})]})]})}function Pg({title:t,unit:e,data:n,status:r,gradient:i,sparkColor:s,series:o}){return f.jsxs("section",{className:"card card-live relative overflow-hidden",children:[f.jsx("div",{className:"card-shimmer"}),f.jsx("div",{className:"p-4 md:p-6",children:f.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4",children:[f.jsxs("div",{className:"min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("h3",{className:"text-sm md:text-base font-semibold",children:t}),f.jsx("span",{className:"px-2 py-0.5 rounded-full text-[11px] font-semibold border",style:{color:ot[r],borderColor:ot[r]+"55",background:ot[r]+"10"},children:r==="ok"?"OK":r==="warn"?"Watch":"Alert"})]}),f.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-3 text-sm",children:[f.jsx(gi,{label:"Avg",value:`${n.avg.toFixed(1)}${e}`}),f.jsx(gi,{label:"Min",value:`${n.min.toFixed(1)}${e}`}),f.jsx(gi,{label:"Max",value:`${n.max.toFixed(1)}${e}`})]})]}),f.jsx("div",{className:"w-full md:max-w-[440px]",children:f.jsx(Qk,{color:s,data:o})})]})}),f.jsx("div",{className:`absolute inset-x-0 bottom-0 h-16 bg-gradient-to-t ${i} pointer-events-none`})]})}function gi({label:t,value:e}){return f.jsxs("div",{children:[f.jsx("div",{className:"text-xs opacity-70",children:t}),f.jsx("div",{className:"font-semibold tabular-nums",children:e})]})}function Kk({data:t,status:e,statuses:n,thresholds:r,series:i}){const s="#22c55e",o="#06b6d4",l="#f59e0b";return f.jsxs("section",{className:"card card-live relative overflow-hidden",children:[f.jsx("div",{className:"card-shimmer"}),f.jsx("div",{className:"p-4 md:p-6",children:f.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4",children:[f.jsxs("div",{className:"w-full",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("h3",{className:"text-sm md:text-base font-semibold",children:"NPK (ppm)"}),f.jsx("span",{className:"px-2 py-0.5 rounded-full text-[11px] font-semibold border",style:{color:ot[e],borderColor:ot[e]+"55",background:ot[e]+"10"},children:e==="ok"?"OK":"Watch/Alert"})]}),f.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-3 gap-3 text-sm",children:[f.jsx(Ju,{label:"N",color:s,status:n.n,val:t.n.avg,minV:t.n.min,maxV:t.n.max,th:r.n}),f.jsx(Ju,{label:"P",color:o,status:n.p,val:t.p.avg,minV:t.p.min,maxV:t.p.max,th:r.p}),f.jsx(Ju,{label:"K",color:l,status:n.k,val:t.k.avg,minV:t.k.min,maxV:t.k.max,th:r.k})]})]}),f.jsx("div",{className:"w-full md:max-w-[440px]",children:f.jsx(Gk,{series:[{data:i.n,color:s},{data:i.p,color:o},{data:i.k,color:l}]})})]})}),f.jsx("div",{className:"absolute inset-x-0 bottom-0 h-16 bg-gradient-to-t from-green-400/30 via-cyan-400/20 to-amber-400/0 pointer-events-none"})]})}function Ju({label:t,color:e,status:n,val:r,minV:i,maxV:s,th:o}){return f.jsxs("div",{className:"rounded-xl border border-[hsl(var(--border))] dark:border-white/10 p-3",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 rounded-full text-xs font-bold",style:{background:e+"22",color:e},children:t}),f.jsx("span",{className:"px-2 py-0.5 rounded-full text-[11px] font-semibold border",style:{color:ot[n],borderColor:ot[n]+"55",background:ot[n]+"10"},children:n==="ok"?"OK":n==="warn"?"Watch":"Alert"})]}),f.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-3 text-sm",children:[f.jsx(gi,{label:"Avg",value:`${r.toFixed(0)}`}),f.jsx(gi,{label:"Min",value:`${i.toFixed(0)}`}),f.jsx(gi,{label:"Max",value:`${s.toFixed(0)}`})]}),f.jsxs("div",{className:"mt-2 text-[11px] opacity-70",children:["Range: ",o.min,"",o.max," ppm"]})]})}function Qk({data:t,color:e}){const n=J.useRef(null),[r,i]=J.useState({w:360,h:72});J.useEffect(()=>{const R=()=>{var x;const E=Math.max(240,Math.min(520,((x=n.current)==null?void 0:x.clientWidth)||360)),v=E<320?64:72;i({w:E,h:v})};R();const N=new ResizeObserver(R);return n.current&&N.observe(n.current),()=>N.disconnect()},[]);const s=8,{w:o,h:l}=r;if(!t.length)return f.jsx("div",{ref:n,className:"h-[72px]"});const u=t.slice(-48),h=yr(u),p=vr(u),m=R=>l-s-(R-h)/(p-h||1)*(l-s*2),g=(o-s*2)/Math.max(1,u.length-1),k=`M ${s},${m(u[0])} `+u.slice(1).map((R,N)=>`L ${s+(N+1)*g},${m(R)}`).join(" "),A=`M ${s},${l-s} L ${s},${m(u[0])} `+u.slice(1).map((R,N)=>`L ${s+(N+1)*g},${m(R)}`).join(" ")+` L ${s+(u.length-1)*g},${l-s} Z`;return f.jsx("div",{ref:n,className:"w-full",children:f.jsxs("svg",{viewBox:`0 0 ${o} ${l}`,width:"100%",height:l,role:"img","aria-label":"mini trend",children:[f.jsx("defs",{children:f.jsxs("linearGradient",{id:"sg1",x1:"0",x2:"0",y1:"0",y2:"1",children:[f.jsx("stop",{offset:"0%",stopColor:e,stopOpacity:"0.45"}),f.jsx("stop",{offset:"100%",stopColor:e,stopOpacity:"0.06"})]})}),f.jsxs("g",{opacity:".16",stroke:"currentColor",children:[f.jsx("line",{x1:s,y1:l-s,x2:o-s,y2:l-s}),f.jsx("line",{x1:s,y1:l/2,x2:o-s,y2:l/2})]}),f.jsx("path",{d:A,fill:"url(#sg1)"}),f.jsx("path",{d:k,fill:"none",stroke:e,strokeWidth:"2.2",strokeLinejoin:"round",strokeLinecap:"round"}),f.jsx("circle",{cx:s+(u.length-1)*g,cy:m(u.at(-1)),r:"3.4",fill:e})]})})}function Gk({series:t}){var A;const e=J.useRef(null),[n,r]=J.useState({w:360,h:72});J.useEffect(()=>{const R=()=>{var x;const E=Math.max(240,Math.min(520,((x=e.current)==null?void 0:x.clientWidth)||360)),v=E<320?64:72;r({w:E,h:v})};R();const N=new ResizeObserver(R);return e.current&&N.observe(e.current),()=>N.disconnect()},[]);const i=8,{w:s,h:o}=n;if(!t.find(R=>R.data.length))return f.jsx("div",{ref:e,className:"h-[72px]"});const u=t.map(R=>R.data.slice(-48)),h=u.flat(),p=yr(h),m=vr(h),g=R=>o-i-(R-p)/(m-p||1)*(o-i*2),k=(s-i*2)/Math.max(1,(((A=u[0])==null?void 0:A.length)||1)-1);return f.jsx("div",{ref:e,className:"w-full",children:f.jsxs("svg",{viewBox:`0 0 ${s} ${o}`,width:"100%",height:o,role:"img","aria-label":"NPK trends",children:[f.jsxs("g",{opacity:".12",stroke:"currentColor",children:[f.jsx("line",{x1:i,y1:o-i,x2:s-i,y2:o-i}),f.jsx("line",{x1:i,y1:o/2,x2:s-i,y2:o/2})]}),u.map((R,N)=>{if(!R.length)return null;const E=`M ${i},${g(R[0])} `+R.slice(1).map((v,x)=>`L ${i+(x+1)*k},${g(v)}`).join(" ");return f.jsx("path",{d:E,fill:"none",stroke:t[N].color,strokeWidth:"2.0",strokeLinejoin:"round",strokeLinecap:"round",opacity:"0.95"},N)}),u.map((R,N)=>R.length?f.jsx("circle",{cx:i+(R.length-1)*k,cy:g(R.at(-1)),r:"3.0",fill:t[N].color},"c"+N):null)]})})}const L_="esp32-001",jt=(t,e,n)=>Math.max(e,Math.min(n,t)),ms=t=>t.length?Number((t.reduce((e,n)=>e+n,0)/t.length).toFixed(1)):0,Bs=t=>t==="ok"?"#10b981":t==="low"?"#38bdf8":"#f59e0b",gs=(t,e,n)=>t<e?"low":t>n?"high":"ok",xe={temp:{min:15,max:65},moist:{min:40,max:80},n:{min:150,max:900},p:{min:50,max:300},k:{min:100,max:800}},O_={live:30*60*1e3,"1h":60*60*1e3,"24h":24*60*60*1e3,"7d":7*24*60*60*1e3};function Yk(t,e=L_){const[n,r]=J.useState([]),[i,s]=J.useState("sim");return J.useEffect(()=>{let o;const l=new Date(Date.now()-O_[t]),u=()=>{if(o)return;const k=Date.now();let A=48,R=62,N=420,E=140,v=380;const x=[];for(let P=300;P>0;P--)A=jt(A+(Math.random()-.5)*1,20,70),R=jt(R+(Math.random()-.5)*1.2,25,90),N=jt(N+(Math.random()-.5)*18,xe.n.min/2,xe.n.max*1.2),E=jt(E+(Math.random()-.5)*6,xe.p.min/2,xe.p.max*1.2),v=jt(v+(Math.random()-.5)*14,xe.k.min/2,xe.k.max*1.2),x.push({ts:k-P*12e3,temp:+A.toFixed(1),moist:+R.toFixed(1),n:Math.round(N),p:Math.round(E),k:Math.round(v)});r(x),s("sim"),o=window.setInterval(()=>{r(P=>{const M=P.at(-1)??{temp:48,moist:62,n:420,p:140,k:380},F={ts:Date.now(),temp:+jt(M.temp+(Math.random()-.5)*1,20,70).toFixed(1),moist:+jt(M.moist+(Math.random()-.5)*1.2,25,90).toFixed(1),n:Math.round(jt(M.n+(Math.random()-.5)*18,xe.n.min/2,xe.n.max*1.2)),p:Math.round(jt(M.p+(Math.random()-.5)*6,xe.p.min/2,xe.p.max*1.2)),k:Math.round(jt(M.k+(Math.random()-.5)*14,xe.k.min/2,xe.k.max*1.2))};return[...P.slice(-4999),F]})},9e3)},h=gk(j_,"sensor_readings",e,"readings"),p=Nk(h,Vk("updatedAt",">=",fe.fromDate(l)),Dk("updatedAt","asc"),bk(t==="7d"?5e3:t==="24h"?3e3:1e3));let m=!1;const g=M_(p,k=>{const A=k.docs.map(R=>{var E,v,x,P,M;const N=R.data();return{ts:((v=(E=N.updatedAt)==null?void 0:E.toMillis)==null?void 0:v.call(E))??Date.now(),temp:Number(N.tempC??N.temperature),moist:Number(N.moisturePct??N.moisture),n:Number((x=N.npk)==null?void 0:x.n),p:Number((P=N.npk)==null?void 0:P.p),k:Number((M=N.npk)==null?void 0:M.k)}}).filter(R=>[R.temp,R.moist,R.n,R.p,R.k].every(Number.isFinite));A.length>0?(m=!0,s("firebase"),r(A.slice(-5e3)),o&&(window.clearInterval(o),o=void 0)):!m&&!o&&u()},()=>{o||u()});return u(),()=>{g(),o&&window.clearInterval(o)}},[t,e]),{samples:n,mode:i}}function Xk(){const[t,e]=J.useState("live"),{samples:n,mode:r}=Yk(t,L_),i=Date.now()-O_[t],s=J.useMemo(()=>n.filter(A=>A.ts>=i),[n,i]),o=J.useMemo(()=>({temp:s.map(A=>A.temp),moist:s.map(A=>A.moist),n:s.map(A=>A.n),p:s.map(A=>A.p),k:s.map(A=>A.k)}),[s]),l=J.useMemo(()=>({temp:{avg:ms(o.temp),min:Math.min(...o.temp,1/0)||0,max:Math.max(...o.temp,-1/0)||0},moist:{avg:ms(o.moist),min:Math.min(...o.moist,1/0)||0,max:Math.max(...o.moist,-1/0)||0},n:{avg:Math.round(ms(o.n)),min:Math.min(...o.n,1/0)||0,max:Math.max(...o.n,-1/0)||0},p:{avg:Math.round(ms(o.p)),min:Math.min(...o.p,1/0)||0,max:Math.max(...o.p,-1/0)||0},k:{avg:Math.round(ms(o.k)),min:Math.min(...o.k,1/0)||0,max:Math.max(...o.k,-1/0)||0}}),[o]),u=gs(l.temp.avg,xe.temp.min,xe.temp.max),h=gs(l.moist.avg,xe.moist.min,xe.moist.max),p=gs(l.n.avg,xe.n.min,xe.n.max),m=gs(l.p.avg,xe.p.min,xe.p.max),g=gs(l.k.avg,xe.k.min,xe.k.max),k=J.useMemo(()=>{const A=[];return h==="low"&&A.push("Moisture is trending lowconsider watering lightly to reach 6070%."),h==="high"&&A.push("Moisture is highadd dry bedding and turn the bin to improve airflow."),u==="high"&&A.push("Temperature is elevatedmix the bedding and reduce feed volume."),u==="low"&&A.push("Temperature is lowinsulate the bin and avoid over-watering."),[p,m,g].every(N=>N==="ok")||A.push("NPK balance is offadd carbon for high N, or a light feed for low N/P/K."),A.length===0&&A.push("All parameters look healthy. Maintain current routine."),A},[u,h,p,m,g]);return f.jsxs("div",{className:"space-y-4 animate-fade-in-up",children:[f.jsxs("section",{className:"card card-live relative p-5 md:p-6 overflow-hidden",children:[f.jsx("div",{className:"card-shimmer"}),f.jsx("div",{className:"corner-glow top-[-3rem] right-[-3rem]"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("h2",{className:"text-base md:text-lg font-semibold",children:"Sensors"}),f.jsx("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-semibold border border-[hsl(var(--border))] dark:border-white/10 opacity-80",children:r==="firebase"?"LIVE  Firebase":"SIM"})]}),r==="sim"?f.jsx("p",{className:"mt-1 text-sm text-amber-600 dark:text-amber-400",children:"ESP32 not transmitting data, in simulation mode."}):f.jsxs("p",{className:"mt-1 text-sm text-emerald-600 dark:text-emerald-400",children:["ESP32 transmitted data last"," ",n.length>0?new Date(n[n.length-1].ts).toLocaleString():"N/A"]}),f.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-200",children:"Live + historical Temperature, Moisture, and NPK. Use the range switcher to view recent history."})]}),f.jsx("section",{className:"card card-live p-3 md:p-4",children:f.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[f.jsx(la,{label:"Live",active:t==="live",onClick:()=>e("live")}),f.jsx(la,{label:"1h",active:t==="1h",onClick:()=>e("1h")}),f.jsx(la,{label:"24h",active:t==="24h",onClick:()=>e("24h")}),f.jsx(la,{label:"7d",active:t==="7d",onClick:()=>e("7d")}),f.jsxs("span",{className:"ml-auto text-xs opacity-75",children:["Window shows last ",t==="live"?"30 min":t,"."]})]})}),f.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-4",children:[f.jsx(Ng,{title:"Temperature",unit:"C",color:Bs(u),status:u,values:{avg:l.temp.avg,min:l.temp.min,max:l.temp.max}}),f.jsx(Ng,{title:"Moisture",unit:"%",color:Bs(h),status:h,values:{avg:l.moist.avg,min:l.moist.min,max:l.moist.max}}),f.jsx(Jk,{n:l.n.avg,p:l.p.avg,k:l.k.avg,status:{n:p,p:m,k:g}})]}),f.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[f.jsx(ec,{title:"Temperature",unit:"C",color:"#10b981",data:o.temp,bigValue:l.temp.avg}),f.jsx(ec,{title:"Moisture",unit:"%",color:"#38bdf8",data:o.moist,bigValue:l.moist.avg}),f.jsx(ec,{title:"NPK (mean)",unit:"",color:"#f59e0b",data:o.n.map((A,R)=>Math.round((A+(o.p[R]??A)+(o.k[R]??A))/3)),bigValue:Math.round((l.n.avg+l.p.avg+l.k.avg)/3)})]}),f.jsxs("section",{className:"card card-live relative p-5 md:p-6 overflow-hidden",children:[f.jsx("div",{className:"corner-glow bottom-[-3rem] left-[-3rem]"}),f.jsx("h3",{className:"text-sm md:text-base font-semibold",children:"Actionable tips"}),f.jsx("ul",{className:"mt-3 space-y-2 text-sm",children:k.map((A,R)=>f.jsxs("li",{className:"flex items-start gap-2",children:[f.jsx("span",{className:"mt-[6px] inline-block w-1.5 h-1.5 rounded-full bg-emerald-500"}),f.jsx("span",{children:A})]},R))})]})]})}function la({label:t,active:e,onClick:n}){return f.jsx("button",{onClick:n,className:["px-3 py-1.5 rounded-lg text-sm transition",e?"border border-[hsl(var(--border))] dark:border-white/10 bg-[hsl(var(--muted))] dark:bg-white/[0.06] font-medium":"border border-transparent hover:border-[hsl(var(--border))] dark:hover:border-white/10"].join(" "),children:t})}function Ng({title:t,unit:e,color:n,status:r,values:i}){return f.jsxs("section",{className:"card card-live p-5 overflow-hidden",children:[f.jsx("div",{className:"card-shimmer"}),f.jsx("div",{className:"flex items-start justify-between gap-4",children:f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("h4",{className:"text-sm md:text-base font-semibold",children:t}),f.jsx("span",{className:"px-2 py-0.5 rounded-full text-[11px] font-semibold border",style:{color:n,borderColor:n+"55",background:n+"10"},children:r==="ok"?"OK":r==="low"?"Low":"High"})]}),f.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-3 text-sm",children:[f.jsx(Zu,{label:"Avg",value:`${i.avg.toFixed(1)}${e}`}),f.jsx(Zu,{label:"Min",value:`${i.min.toFixed(1)}${e}`}),f.jsx(Zu,{label:"Max",value:`${i.max.toFixed(1)}${e}`})]})]})})]})}function Jk({n:t,p:e,k:n,status:r}){const i=(s,o,l)=>f.jsxs("div",{className:"flex items-center justify-between rounded-lg border px-3 py-2",style:{borderColor:Bs(l)+"55",background:Bs(l)+"0F"},children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full",style:{backgroundColor:Bs(l)}}),f.jsx("span",{className:"text-xs opacity-80",children:s})]}),f.jsx("div",{className:"font-semibold tabular-nums",children:o})]});return f.jsxs("section",{className:"card card-live p-5 overflow-hidden",children:[f.jsx("div",{className:"card-shimmer"}),f.jsx("h4",{className:"text-sm md:text-base font-semibold",children:"NPK"}),f.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-3",children:[i("N",t,r.n),i("P",e,r.p),i("K",n,r.k)]}),f.jsx("div",{className:"mt-2 text-xs opacity-70",children:"Units based on your NPK sensor (e.g., ppm / a.u.)."})]})}function Zu({label:t,value:e}){return f.jsxs("div",{children:[f.jsx("div",{className:"text-xs opacity-70",children:t}),f.jsx("div",{className:"font-semibold tabular-nums",children:e})]})}function ec({title:t,unit:e,color:n,data:r,bigValue:i}){return f.jsxs("section",{className:"card card-live p-5 overflow-hidden animate-fade-in-up",children:[f.jsx("div",{className:"card-shimmer"}),f.jsx("div",{className:"corner-glow top-[-3rem] left-[-3rem]"}),f.jsxs("div",{className:"flex items-end justify-between",children:[f.jsx("h4",{className:"text-sm md:text-base font-semibold",children:t}),f.jsx("div",{className:"text-base md:text-lg font-semibold tabular-nums",children:Number.isFinite(i)?`${i.toFixed(1)}${e}`:"--"})]}),f.jsx(Zk,{data:r,stroke:n})]})}function Zk({data:t,stroke:e}){const n=J.useRef(null),[r,i]=J.useState({w:900,h:220});J.useEffect(()=>{const N=()=>{var P;const v=((P=n.current)==null?void 0:P.clientWidth)??900,x=jt(Math.round(v*.24),150,280);i({w:v,h:x})};N();const E=new ResizeObserver(N);return n.current&&E.observe(n.current),()=>E.disconnect()},[]);const s=16,{w:o,h:l}=r,u=Math.min(...t.length?t:[0]),h=Math.max(...t.length?t:[1]),p=u-(h-u)*.15,m=h+(h-u)*.15||1,g=N=>(1-(N-p)/(m-p))*(l-s*2)+s,k=(o-s*2)/Math.max(1,t.length-1),A=t.length?`M ${s},${g(t[0])} `+t.slice(1).map((N,E)=>`L ${s+(E+1)*k},${g(N)}`).join(" "):"",R=t.length?`M ${s},${l-s} L ${s},${g(t[0])} `+t.slice(1).map((N,E)=>`L ${s+(E+1)*k},${g(N)}`).join(" ")+` L ${s+(t.length-1)*k},${l-s} Z`:"";return f.jsx("div",{ref:n,className:"w-full chart-enter",children:f.jsxs("svg",{viewBox:`0 0 ${o} ${l}`,width:"100%",height:l,children:[f.jsx("defs",{children:f.jsxs("linearGradient",{id:"lineGradAuto",x1:"0",x2:"0",y1:"0",y2:"1",children:[f.jsx("stop",{offset:"0%",stopColor:e,stopOpacity:"0.55"}),f.jsx("stop",{offset:"100%",stopColor:e,stopOpacity:"0.06"})]})}),f.jsxs("g",{opacity:".16",stroke:"currentColor",children:[f.jsx("line",{x1:s,y1:s,x2:o-s,y2:s}),f.jsx("line",{x1:s,y1:l/2,x2:o-s,y2:l/2}),f.jsx("line",{x1:s,y1:l-s,x2:o-s,y2:l-s})]}),t.length>1&&f.jsx("path",{d:R,fill:"url(#lineGradAuto)"}),t.length>1&&f.jsx("path",{d:A,fill:"none",stroke:e,strokeWidth:"2.75",strokeLinejoin:"round",strokeLinecap:"round"}),t.length>0&&f.jsx("circle",{cx:s+(t.length-1)*k,cy:g(t[t.length-1]),r:"3.8",fill:e})]})})}const tc="tt_thresholds",nc="tt_alert_email",St={temperature:{min:15,max:65},moisture:{min:40,max:80},n:{min:150,max:900},p:{min:50,max:300},k:{min:100,max:800}},Gt=t=>{if(t===""||t===void 0||t===null)return"";const e=Number(t);return Number.isFinite(e)?e:""};function eC(t){var n,r,i,s,o,l,u,h,p,m;const e=typeof t=="string"?JSON.parse(t):t||{};return{temperature:{min:Gt((n=e==null?void 0:e.temperature)==null?void 0:n.min)||St.temperature.min,max:Gt((r=e==null?void 0:e.temperature)==null?void 0:r.max)||St.temperature.max},moisture:{min:Gt((i=e==null?void 0:e.moisture)==null?void 0:i.min)||St.moisture.min,max:Gt((s=e==null?void 0:e.moisture)==null?void 0:s.max)||St.moisture.max},n:{min:Gt((o=e==null?void 0:e.n)==null?void 0:o.min)||St.n.min,max:Gt((l=e==null?void 0:e.n)==null?void 0:l.max)||St.n.max},p:{min:Gt((u=e==null?void 0:e.p)==null?void 0:u.min)||St.p.min,max:Gt((h=e==null?void 0:e.p)==null?void 0:h.max)||St.p.max},k:{min:Gt((p=e==null?void 0:e.k)==null?void 0:p.min)||St.k.min,max:Gt((m=e==null?void 0:e.k)==null?void 0:m.max)||St.k.max}}}function tC(){const[t,e]=J.useState(()=>{const v=localStorage.getItem(tc);return v?eC(v):St}),[n,r]=J.useState(()=>localStorage.getItem(nc)||""),[i,s]=J.useState(null),[o,l]=J.useState(null),[u,h]=J.useState(null),p=(v,x,P)=>{(P===""||/^-?\d+(\.\d+)?$/.test(P))&&e(M=>({...M,[v]:{...M[v],[x]:P===""?"":Number(P)}}))},m=v=>v==="temperature"?"Temperature":v==="moisture"?"Moisture":v==="n"?"Nitrogen (N)":v==="p"?"Phosphorus (P)":"Potassium (K)",g=v=>{for(const x of Object.keys(v)){const{min:P,max:M}=v[x];if(P===""||M==="")return"All threshold fields must be filled.";if(typeof P!="number"||typeof M!="number")return"Thresholds must be numbers.";if(M<P)return`For ${m(x)}, max must be greater than min.`}return null},k=J.useMemo(()=>{const v=localStorage.getItem(tc),x=JSON.stringify(t);return v?v!==x:!0},[t]),A=()=>{const v=g(t);if(v){l({kind:"err",msg:v});return}s("thresholds"),localStorage.setItem(tc,JSON.stringify(t)),setTimeout(()=>{s(null),h("t"),l({kind:"ok",msg:"Thresholds saved. These values will be used by alerts and charts."}),setTimeout(()=>h(null),900)},300)},R=v=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v),N=J.useMemo(()=>(localStorage.getItem(nc)||"")!==n,[n]),E=()=>{if(!R(n)){l({kind:"err",msg:"Please enter a valid email address."});return}s("email"),localStorage.setItem(nc,n),setTimeout(()=>{s(null),h("e"),l({kind:"ok",msg:"Alert email saved. Well use this for notifications."}),setTimeout(()=>h(null),900)},260)};return f.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-4 animate-fade-in-up",children:[o&&f.jsx("div",{className:`xl:col-span-12 banner-enter rounded-xl px-4 py-2 border text-sm
                        bg-white/80 dark:bg-[hsl(var(--card))]/85 backdrop-blur
                        border-[hsl(var(--border))] dark:border-white/10`,children:f.jsx("span",{className:o.kind==="ok"?"text-emerald-700 dark:text-emerald-300":"text-rose-700 dark:text-rose-300",children:o.msg})}),f.jsxs("section",{className:["xl:col-span-7 setting-card p-5 md:p-6 overflow-hidden",u==="t"?"glow-on-save":"","animate-fade-in-up"].join(" "),style:{animationDelay:"60ms"},children:[f.jsx("div",{className:`pointer-events-none absolute inset-x-0 top-0 h-[2px] animate-shimmer opacity-60
                        bg-gradient-to-r from-transparent via-white to-transparent dark:via-white/50`}),f.jsx("div",{className:"absolute inset-0 -z-10 text-emerald-600 dark:text-emerald-400 bg-dots"}),f.jsx("div",{className:`pointer-events-none absolute -top-12 -right-16 w-56 h-56 rounded-full
                        bg-emerald-400/15 blur-2xl dark:bg-emerald-300/10`}),f.jsx(Vg,{title:"Threshold calibration",subtitle:"Define safe ranges TerraTrak should maintain.",icon:f.jsx(iC,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"}),chip:k?"Unsaved changes":"Saved",chipVariant:k?"muted":"success"}),f.jsxs("div",{className:"mt-4 grid gap-4",children:[f.jsx(ys,{label:"Temperature",unit:"C",hint:"Typical compost core: 4070C. Below 40C usually means slow activity.",tooltip:"We monitor compost core temp. Too hot can harm worms; too low slows decomposition.",min:t.temperature.min,max:t.temperature.max,onMin:v=>p("temperature","min",v),onMax:v=>p("temperature","max",v)}),f.jsx(Dg,{}),f.jsx(ys,{label:"Moisture",unit:"%",hint:"Ideal: 4080% relative moisture (like a wrung-out sponge).",tooltip:"Moisture keeps worms active and prevents overheating. Above ~80% can cause anaerobic zones.",min:t.moisture.min,max:t.moisture.max,onMin:v=>p("moisture","min",v),onMax:v=>p("moisture","max",v)}),f.jsx(Dg,{}),f.jsx(ys,{label:"Nitrogen (N)",unit:"ppm",hint:"Higher N indicates fresh greens/manure; too high can heat the bin.",tooltip:"We read N from your NPK sensor. Tune bounds to your sensors scale and desired feedstock ratio.",min:t.n.min,max:t.n.max,onMin:v=>p("n","min",v),onMax:v=>p("n","max",v)}),f.jsx(ys,{label:"Phosphorus (P)",unit:"ppm",hint:"Important for plant root development; compost P rises with balanced feedstock.",tooltip:"Use this to track nutrient maturity trends. Calibrate with your sensors docs.",min:t.p.min,max:t.p.max,onMin:v=>p("p","min",v),onMax:v=>p("p","max",v)}),f.jsx(ys,{label:"Potassium (K)",unit:"ppm",hint:"Supports overall plant vigor. K typically ramps as compost stabilizes.",tooltip:"If K is low while N is high, consider more brown/carbon feedstock.",min:t.k.min,max:t.k.max,onMin:v=>p("k","min",v),onMax:v=>p("k","max",v)})]}),f.jsxs("div",{className:"mt-5 flex flex-wrap items-center gap-3",children:[f.jsxs("button",{onClick:A,className:"inline-flex items-center gap-2 rounded-xl px-4 py-2 bg-emerald-600 text-white hover:bg-emerald-700 transition-colors disabled:opacity-60",disabled:i==="thresholds"||!k,children:[i==="thresholds"?f.jsx(rC,{}):null,"Save thresholds"]}),f.jsx("button",{onClick:()=>{e(St),l(null)},className:"rounded-xl px-4 py-2 border border-[hsl(var(--border))] dark:border-white/15 hover:bg-[hsl(var(--muted))] dark:hover:bg-white/[0.06] transition-colors",children:"Reset"}),f.jsxs("div",{className:"ml-auto flex gap-2 text-xs flex-wrap",children:[f.jsx(vs,{label:"Temp",value:`${t.temperature.min||""}${t.temperature.max||""}C`}),f.jsx(vs,{label:"Moist",value:`${t.moisture.min||""}${t.moisture.max||""}%`}),f.jsx(vs,{label:"N",value:`${t.n.min||""}${t.n.max||""} ppm`}),f.jsx(vs,{label:"P",value:`${t.p.min||""}${t.p.max||""} ppm`}),f.jsx(vs,{label:"K",value:`${t.k.min||""}${t.k.max||""} ppm`})]})]})]}),f.jsxs("section",{className:["xl:col-span-5 setting-card p-5 md:p-6 overflow-hidden",u==="e"?"glow-on-save":"","animate-fade-in-up"].join(" "),style:{animationDelay:"140ms"},children:[f.jsx("div",{className:`pointer-events-none absolute inset-x-0 top-0 h-[2px] animate-shimmer opacity-60
                        bg-gradient-to-r from-transparent via-white to-transparent dark:via-white/50`}),f.jsx("div",{className:`pointer-events-none absolute -bottom-14 -left-10 w-56 h-56 rounded-full
                        bg-emerald-400/15 blur-2xl dark:bg-emerald-300/10`}),f.jsx(Vg,{title:"Alert preferences",subtitle:"Choose where TerraTrak should send notifications.",icon:f.jsx(sC,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"}),chip:N?"Unsaved changes":n?"Saved":"Not set",chipVariant:N?"muted":n?"success":"muted"}),f.jsxs("div",{className:"mt-4 max-w-xl",children:[f.jsxs("label",{className:"block text-sm font-medium mb-1 flex items-center gap-2",children:["Alert email",f.jsx(F_,{text:"Well email you when readings breach the thresholds above, and for system notices (e.g., sensor offline)."})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"email",inputMode:"email",value:n,onChange:v=>r(v.target.value),placeholder:"you@example.com",className:"input flex-1"}),f.jsx("button",{onClick:E,className:"rounded-xl px-4 py-2 bg-emerald-600 text-white hover:bg-emerald-700 transition-colors disabled:opacity-60",disabled:i==="email"||!N,children:i==="email"?"Saving":"Save"})]}),f.jsx("p",{className:"mt-1 text-xs text-gray-600 dark:text-gray-300",children:"Use a shared team inbox if multiple people should receive alerts."})]}),f.jsxs("div",{className:"mt-5 grid sm:grid-cols-2 gap-3",children:[f.jsx(ua,{children:"Daily summary"}),f.jsx(ua,{children:"Threshold breach"}),f.jsx(ua,{children:"Sensor offline"}),f.jsx(ua,{children:"Firmware update"})]})]}),f.jsxs("section",{className:"xl:col-span-12 rounded-xl border border-dashed border-[hsl(var(--border))] dark:border-white/15 p-4 text-xs text-gray-600 dark:text-gray-300 animate-fade-in-up",style:{animationDelay:"220ms"},children:[f.jsx("strong",{children:"Developer notes:"})," read the saved values later with:",f.jsxs("code",{className:"ml-1 px-1.5 py-0.5 rounded bg-[hsl(var(--muted))] dark:bg-white/[0.08]",children:['JSON.parse(localStorage.getItem("tt_thresholds") || "','")']})," ","and"," ",f.jsx("code",{className:"px-1.5 py-0.5 rounded bg-[hsl(var(--muted))] dark:bg-white/[0.08]",children:'localStorage.getItem("tt_alert_email")'}),"."]})]})}function Vg({title:t,subtitle:e,icon:n,chip:r,chipVariant:i="muted"}){return f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-2",children:[n??f.jsx(nC,{}),f.jsx("h2",{className:"text-base md:text-lg font-semibold",children:t}),r&&f.jsx("span",{className:["ml-2 px-2 py-0.5 rounded-full text-[11px]",i==="success"?"bg-emerald-50 text-emerald-700 border border-emerald-100 dark:bg-emerald-400/10 dark:text-emerald-200 dark:border-emerald-400/20":"bg-[hsl(var(--muted))] text-gray-700 border border-[hsl(var(--border))] dark:bg-white/[0.06] dark:text-gray-200 dark:border-white/10"].join(" "),children:r})]}),e&&f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:e})]})}function nC(){return f.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500 inline-block shadow-[0_0_0_3px_rgba(16,185,129,0.15)]"})}function Dg(){return f.jsx("div",{className:"h-px bg-[hsl(var(--border))] dark:bg-white/10"})}function ys(t){const{label:e,unit:n,min:r,max:i,onMin:s,onMax:o,hint:l,tooltip:u}=t;return f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-12 gap-3 items-start",children:[f.jsxs("div",{className:"sm:col-span-4",children:[f.jsxs("div",{className:"text-sm font-medium flex items-center gap-2",children:[e,u?f.jsx(F_,{text:u}):null]}),l&&f.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300",children:l})]}),f.jsxs("div",{className:"sm:col-span-8 grid grid-cols-2 gap-3",children:[f.jsx(bg,{label:"Min",value:r,onChange:s,unit:n}),f.jsx(bg,{label:"Max",value:i,onChange:o,unit:n})]})]})}function bg({label:t,value:e,onChange:n,unit:r}){return f.jsxs("label",{className:"w-full",children:[f.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300 mb-1",children:t}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"text",inputMode:"decimal",value:e,onChange:i=>n(i.target.value.trim()),placeholder:"0",className:"input w-full pr-12"}),f.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-500 dark:text-gray-400 select-none",children:r})]})]})}function vs({label:t,value:e}){return f.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-md text-xs
                     bg-[hsl(var(--muted))] dark:bg-white/[0.06]
                     border border-[hsl(var(--border))] dark:border-white/10`,children:[f.jsx("span",{className:"w-1 h-1 rounded-full bg-emerald-500"}),f.jsxs("span",{className:"text-gray-700 dark:text-gray-200",children:[t,":"]}),f.jsx("span",{className:"font-medium",children:e})]})}function ua({children:t}){return f.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-md text-xs
                     bg-[hsl(var(--muted))] dark:bg-white/[0.06]
                     border border-[hsl(var(--border))] dark:border-white/10`,children:[f.jsx("span",{className:"w-1 h-1 rounded-full bg-emerald-500"}),t]})}function rC(){return f.jsxs("svg",{className:"w-4 h-4 animate-spin text-white",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3"}),f.jsx("path",{className:"opacity-75",d:"M12 2a10 10 0 0 1 10 10h-3A7 7 0 0 0 12 5V2z",fill:"currentColor"})]})}function F_({text:t}){return f.jsxs("span",{className:"relative group inline-flex items-center",children:[f.jsxs("svg",{className:"w-3.5 h-3.5 opacity-70 group-hover:opacity-100 transition",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:[f.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"1.5"}),f.jsx("path",{d:"M12 17v-5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),f.jsx("circle",{cx:"12",cy:"8",r:"1",fill:"currentColor"})]}),f.jsx("span",{className:`absolute left-1/2 -translate-x-1/2 top-[130%] w-64 z-10
                       hidden group-hover:block text-xs p-2 rounded-md
                       bg-black/80 text-white shadow-lg`,children:t})]})}function iC(t){return f.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",...t,children:[f.jsx("path",{d:"M10 4a2 2 0 1 1 4 0v7.1a4.5 4.5 0 1 1-4 0V4z",stroke:"currentColor",strokeWidth:"1.5"}),f.jsx("path",{d:"M12 13v-3.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function sC(t){return f.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",...t,children:[f.jsx("path",{d:"M12 5a5 5 0 0 0-5 5v2.5l-1.3 2.2a1 1 0 0 0 .9 1.5h10.8a1 1 0 0 0 .9-1.5L17 12.5V10a5 5 0 0 0-5-5z",stroke:"currentColor",strokeWidth:"1.5"}),f.jsx("path",{d:"M9.5 18a2.5 2.5 0 0 0 5 0",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function oC(){return f.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-4 animate-fade-in-up",children:[f.jsxs("section",{className:"relative xl:col-span-7 card card-live p-5 md:p-6 overflow-hidden",children:[f.jsx("div",{className:`pointer-events-none absolute inset-x-0 top-0 h-[2px] animate-shimmer opacity-60
                     bg-gradient-to-r from-transparent via-white to-transparent dark:via-white/50`}),f.jsx("div",{className:`pointer-events-none absolute -top-10 -right-14 w-48 h-48 rounded-full
                     bg-emerald-400/15 blur-2xl dark:bg-emerald-300/10`}),f.jsx(Mg,{icon:f.jsx(aC,{}),title:"About TerraTrak"}),f.jsxs("div",{className:"space-y-4 text-sm text-gray-700 dark:text-gray-200 leading-6 max-w-prose",children:[f.jsx("p",{className:"text-gray-900 dark:text-gray-100 font-medium",children:"TerraTrak unifies composting and soil health in one smart, data-driven system so users can produce consistent, high-quality compostwithout guesswork."}),f.jsx("p",{children:"Many farmers and gardeners struggle with uncertainty: too much moisture or unstable soil quality leads to poor results, pushing reliance on chemical fertilizers. Existing tools are often costly, fragmented, or focus on either soil monitoring or compostingbut not both."}),f.jsxs("p",{children:["TerraTrak uses sensors to track ",f.jsx("em",{children:"temperature"}),", ",f.jsx("em",{children:"humidity"}),", and",f.jsx("em",{children:" nutrients"}),", surfacing real-time insights via a simple dashboard. The result: consistent compost, healthier soils, and a sustainable alternative to chemical fertilizers in a solution thats affordable and accessible for everyday users."]})]}),f.jsxs("div",{className:"mt-5 grid grid-cols-2 sm:grid-cols-4 gap-3",children:[f.jsx(ca,{label:"Sensors",value:"4+",hint:"Temp  Moist  NPK"}),f.jsx(ca,{label:"Cycle time",value:"~68 wks",hint:"steady conditions"}),f.jsx(ca,{label:"Pilot sites",value:"3",hint:"community gardens"}),f.jsx(ca,{label:"Fertilizer spend",value:" 2540%",hint:"target reduction"})]}),f.jsxs("div",{className:"mt-5 border-t border-[hsl(var(--border))] dark:border-white/10 pt-4 grid md:grid-cols-2 gap-3",children:[f.jsx(ha,{text:"Real-time guidance removes trial & error"}),f.jsx(ha,{text:"One system for compost & soil health"}),f.jsx(ha,{text:"Affordable, modular hardware"}),f.jsx(ha,{text:"Clear, actionable UI for daily decisions"})]}),f.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[f.jsx(Br,{float:!0,children:"Temperature"}),f.jsx(Br,{children:"Humidity"}),f.jsx(Br,{float:!0,children:"pH"}),f.jsx(Br,{children:"Nutrients"}),f.jsx(Br,{children:"Dashboard"}),f.jsx(Br,{float:!0,children:"Alerts"})]})]}),f.jsxs("section",{className:"relative xl:col-span-5 card card-live p-5 md:p-6 overflow-hidden",children:[f.jsx("div",{className:`pointer-events-none absolute inset-x-0 top-0 h-[2px] animate-shimmer opacity-60
                     bg-gradient-to-r from-transparent via-white to-transparent dark:via-white/50`}),f.jsx("div",{className:`pointer-events-none absolute -bottom-10 -left-14 w-48 h-48 rounded-full
                     bg-emerald-400/15 blur-2xl dark:bg-emerald-300/10`}),f.jsx(Mg,{icon:f.jsx(lo,{name:"info",className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"}),title:"Who made TerraTrak possible?"}),f.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mt-2 mb-2",children:"Researchers"}),f.jsxs("ul",{className:"space-y-2",children:[f.jsx(fa,{name:"Corcino, Daniel Justine"}),f.jsx(fa,{name:"De Mesa, Charisse Anne"}),f.jsx(fa,{name:"Lagrimas, Angelo"}),f.jsx(fa,{name:"Zurbito, Pierre Victor"})]}),f.jsxs("div",{className:"mt-5 grid sm:grid-cols-2 gap-4",children:[f.jsx(jg,{label:"Organization",value:"Polytechnic University of the Philippines"}),f.jsx(jg,{label:"Farm",value:""})]}),f.jsxs("div",{className:"mt-5 border-t border-[hsl(var(--border))] dark:border-white/10 pt-4 grid sm:grid-cols-2 gap-3",children:[f.jsx(da,{children:"Research"}),f.jsx(da,{children:"Field testing"}),f.jsx(da,{children:"Electronics"}),f.jsx(da,{children:"Software"})]})]})]})}function Mg({icon:t,title:e}){return f.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t,f.jsx("h2",{className:"text-base md:text-lg font-semibold",children:e})]})}function ca({label:t,value:e,hint:n}){return f.jsxs("div",{className:`rounded-xl border border-[hsl(var(--border))] dark:border-white/10 bg-[hsl(var(--card))] px-3 py-2
                    transition-all duration-200 hover:-translate-y-0.5 hover:border-emerald-400/40 hover:shadow-sm`,children:[f.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300",children:t}),f.jsx("div",{className:"text-sm font-semibold",children:e}),n&&f.jsx("div",{className:"text-[11px] text-gray-500 dark:text-gray-400",children:n})]})}function ha({text:t}){return f.jsxs("div",{className:"flex items-start gap-2 group",children:[f.jsx("span",{className:`mt-1 inline-block w-1.5 h-1.5 rounded-full bg-emerald-500/80 dark:bg-emerald-400/80
                       transition-transform group-hover:scale-125`}),f.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-200",children:t})]})}function Br({children:t,float:e}){return f.jsx("span",{className:["px-2.5 py-1 rounded-full text-xs","bg-emerald-50 text-emerald-700 border border-emerald-100","dark:bg-emerald-400/10 dark:text-emerald-200 dark:border-emerald-400/20","transition-transform duration-200 hover:translate-y-[-1px]",e?"animate-float-slow":""].join(" "),children:t})}function da({children:t}){return f.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-md text-xs
                     bg-[hsl(var(--muted))] dark:bg-white/[0.06]
                     border border-[hsl(var(--border))] dark:border-white/10`,children:[f.jsx("span",{className:"w-1 h-1 rounded-full bg-emerald-500"}),t]})}function fa({name:t}){const e=t.split(/[ ,]+/).filter(Boolean).slice(0,2).map(n=>{var r;return(r=n[0])==null?void 0:r.toUpperCase()}).join("");return f.jsxs("li",{className:`flex items-center gap-3 rounded-lg px-1 py-1 transition-colors
                   hover:bg-[hsl(var(--muted))] dark:hover:bg-white/[0.05]`,children:[f.jsx("div",{className:`w-8 h-8 rounded-full grid place-items-center
                      bg-emerald-500/15 text-emerald-700 border border-emerald-500/20
                      dark:bg-emerald-400/10 dark:text-emerald-200 dark:border-emerald-400/20
                      text-xs font-semibold transition-transform duration-200
                      group-hover:translate-y-[-1px]`,children:e||"TT"}),f.jsx("span",{className:"text-sm text-gray-800 dark:text-gray-200",children:t})]})}function jg({label:t,value:e}){return f.jsxs("div",{className:"transition-all duration-200 hover:-translate-y-0.5",children:[f.jsx("div",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:t}),f.jsx("div",{className:"text-sm text-gray-800 dark:text-gray-200",children:e})]})}function aC(){return f.jsx("svg",{viewBox:"0 0 24 24",fill:"none",className:"w-4 h-4 text-emerald-600 dark:text-emerald-400",children:f.jsx("path",{d:"M12 3l2.1 4.3L19 8l-3.5 3.4L16 17l-4-2.1L8 17l.5-5.6L5 8l4.9-.7L12 3z",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round"})})}function lC(){return f.jsx(Bx,{children:f.jsxs("div",{className:"min-h-screen flex",children:[f.jsx(Kx,{}),f.jsxs("div",{className:"flex-1 flex flex-col",children:[f.jsx(Qx,{}),f.jsx("main",{className:"px-4 pb-6",children:f.jsxs(Mx,{children:[f.jsx(Ts,{path:"/",element:f.jsx(Hk,{})}),f.jsx(Ts,{path:"/sensors",element:f.jsx(Xk,{})}),f.jsx(Ts,{path:"/settings",element:f.jsx(tC,{})}),f.jsx(Ts,{path:"/about",element:f.jsx(oC,{})})]})})]})]})})}rc.createRoot(document.getElementById("root")).render(f.jsx(J.StrictMode,{children:f.jsx(lC,{})}));
